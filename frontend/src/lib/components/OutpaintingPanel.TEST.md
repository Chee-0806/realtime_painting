# OutpaintingPanel 组件测试清单

## 测试概述

本文档提供 OutpaintingPanel 组件的手动测试清单，确保所有功能正常工作。

## 测试环境

- **浏览器**: Chrome/Firefox/Safari
- **后端**: 需要运行后端服务并实现 `/api/outpaint` 端点
- **测试图像**: 准备几张不同尺寸和格式的测试图像

---

## 功能测试清单

### 1. 图像上传功能 ✅

#### 测试步骤
1. 点击"选择图像"按钮
2. 选择一张有效的图像文件（PNG/JPG）
3. 验证图像是否正确加载到预览区域

#### 预期结果
- ✅ 图像正确显示在预览区域
- ✅ 按钮文本变为"更换图像"
- ✅ 预览区域显示扩展方向的虚线框

#### 边界测试
- [ ] 上传非图像文件（应显示错误提示）
- [ ] 上传超大图像（应自动缩放到512px以内）
- [ ] 上传不同格式：PNG, JPG, WebP, GIF

---

### 2. 扩展方向选择 ✅

#### 测试步骤
1. 上传一张测试图像
2. 依次点击每个方向按钮：← 左、→ 右、↑ 上、↓ 下、⊕ 全部
3. 观察预览区域的变化

#### 预期结果
- ✅ 点击方向按钮后，按钮高亮显示
- ✅ 预览区域正确显示对应方向的扩展区域（灰色+虚线框）
- ✅ 切换方向时预览实时更新

#### 测试用例
- [ ] **向左扩展**: 左侧出现灰色扩展区域
- [ ] **向右扩展**: 右侧出现灰色扩展区域
- [ ] **向上扩展**: 上方出现灰色扩展区域
- [ ] **向下扩展**: 下方出现灰色扩展区域
- [ ] **全方向扩展**: 四周都出现灰色扩展区域

---

### 3. 扩展尺寸配置 ✅

#### 测试步骤
1. 上传测试图像并选择扩展方向
2. 拖动"扩展尺寸"滑块
3. 观察预览区域和数值显示

#### 预期结果
- ✅ 滑块值范围：64px - 512px
- ✅ 步长为 64px
- ✅ 数值实时显示在滑块旁边
- ✅ 预览区域的扩展大小实时更新

#### 测试用例
- [ ] 设置为最小值（64px）
- [ ] 设置为中间值（256px）
- [ ] 设置为最大值（512px）
- [ ] 验证预览区域大小变化正确

---

### 4. Prompt 输入 ✅

#### 测试步骤
1. 在 Prompt 输入框中输入文本
2. 在 Negative Prompt 输入框中输入文本
3. 验证输入是否正常

#### 预期结果
- ✅ Prompt 输入框支持多行文本
- ✅ Negative Prompt 输入框支持多行文本
- ✅ 输入框有合适的占位符文本
- ✅ 输入框样式正确（边框、焦点状态）

#### 测试用例
- [ ] 输入短文本（< 50字符）
- [ ] 输入长文本（> 200字符）
- [ ] 输入特殊字符和表情符号
- [ ] 清空输入框

---

### 5. 参数配置 ✅

#### 测试步骤
1. 调整"引导强度"滑块
2. 调整"生成步数"滑块
3. 验证数值显示和范围

#### 预期结果
- ✅ 引导强度范围：1.0 - 20.0，步长 0.5
- ✅ 生成步数范围：10 - 50，步长 5
- ✅ 数值实时显示
- ✅ 滑块操作流畅

#### 测试用例
- [ ] 引导强度设置为 1.0（最小值）
- [ ] 引导强度设置为 7.5（默认值）
- [ ] 引导强度设置为 20.0（最大值）
- [ ] 生成步数设置为 10（最小值）
- [ ] 生成步数设置为 20（默认值）
- [ ] 生成步数设置为 50（最大值）

---

### 6. 验证和错误处理 ✅

#### 测试步骤
1. 不上传图像，直接点击"开始扩展"
2. 上传图像但不输入 Prompt，点击"开始扩展"
3. 上传非图像文件
4. 模拟网络错误（断开网络后点击"开始扩展"）

#### 预期结果
- ✅ 未上传图像时显示错误提示
- ✅ 未输入 Prompt 时按钮禁用
- ✅ 上传非图像文件时显示错误提示
- ✅ 网络错误时显示友好的错误消息和建议

#### 测试用例
- [ ] **验证错误**: 未上传图像
- [ ] **验证错误**: Prompt 为空
- [ ] **文件类型错误**: 上传 .txt 文件
- [ ] **网络错误**: 断开网络连接
- [ ] **API错误**: 后端服务未运行

---

### 7. Outpainting 生成流程 ✅

#### 测试步骤
1. 上传测试图像
2. 选择扩展方向（如"全部"）
3. 设置扩展尺寸（如 128px）
4. 输入 Prompt（如 "beautiful landscape, mountains, blue sky"）
5. 点击"开始扩展"按钮
6. 等待生成完成

#### 预期结果
- ✅ 点击按钮后显示加载状态（"扩展中..."）
- ✅ 按钮在加载时禁用
- ✅ 生成完成后显示结果图像
- ✅ 结果图像包含扩展的内容
- ✅ 可以下载结果图像

#### 测试用例
- [ ] **向左扩展**: 生成左侧内容
- [ ] **向右扩展**: 生成右侧内容
- [ ] **向上扩展**: 生成上方内容
- [ ] **向下扩展**: 生成下方内容
- [ ] **全方向扩展**: 生成四周内容
- [ ] **不同尺寸**: 64px, 128px, 256px, 512px
- [ ] **不同 Prompt**: 测试各种描述

---

### 8. 结果展示和下载 ✅

#### 测试步骤
1. 完成一次 Outpainting 生成
2. 查看结果显示区域
3. 点击"下载"按钮

#### 预期结果
- ✅ 结果图像正确显示
- ✅ 结果区域有绿色边框高亮
- ✅ 显示"✨ 生成结果"标题
- ✅ 点击下载按钮后自动下载图像
- ✅ 下载的文件名包含时间戳

#### 测试用例
- [ ] 验证结果图像清晰度
- [ ] 验证下载功能正常
- [ ] 验证文件名格式：`outpaint_result_[timestamp].png`
- [ ] 验证下载的图像可以正常打开

---

### 9. 重置功能 ✅

#### 测试步骤
1. 完成一次完整的 Outpainting 流程
2. 点击右上角的"重置"按钮
3. 验证所有状态是否清空

#### 预期结果
- ✅ 源图像清空
- ✅ 结果图像清空
- ✅ Prompt 清空
- ✅ Negative Prompt 清空
- ✅ 方向重置为"全部"
- ✅ 尺寸重置为 128px
- ✅ 错误状态清除

#### 测试用例
- [ ] 在上传图像后重置
- [ ] 在生成结果后重置
- [ ] 在出现错误后重置

---

### 10. UI/UX 测试 ✅

#### 测试步骤
1. 在不同屏幕尺寸下测试组件
2. 测试所有交互元素的响应
3. 验证视觉反馈

#### 预期结果
- ✅ 响应式布局正常
- ✅ 按钮悬停效果正常
- ✅ 禁用状态样式正确
- ✅ 加载动画流畅
- ✅ 颜色和间距符合设计规范

#### 测试用例
- [ ] **桌面端**: 1920x1080
- [ ] **平板端**: 768x1024
- [ ] **移动端**: 375x667
- [ ] 所有按钮的悬停效果
- [ ] 所有输入框的焦点效果
- [ ] 加载动画的流畅度

---

## 性能测试

### 11. 图像处理性能 ✅

#### 测试步骤
1. 上传不同大小的图像
2. 测试预览更新速度
3. 测试方向切换响应时间

#### 预期结果
- ✅ 大图像自动缩放不卡顿
- ✅ 预览更新流畅（< 100ms）
- ✅ 方向切换即时响应

#### 测试用例
- [ ] 小图像（< 500KB）
- [ ] 中等图像（1-2MB）
- [ ] 大图像（> 5MB）
- [ ] 高分辨率图像（4K+）

---

### 12. API 请求性能 ✅

#### 测试步骤
1. 测试不同参数下的生成时间
2. 测试并发请求处理
3. 测试超时处理

#### 预期结果
- ✅ 生成时间合理（取决于后端）
- ✅ 加载状态正确显示
- ✅ 超时有适当的错误提示

---

## 集成测试

### 13. 与其他组件集成 ✅

#### 测试步骤
1. 在主页面中集成 OutpaintingPanel
2. 与 InpaintingPanel 同时使用
3. 与 ErrorHandler 组件配合

#### 预期结果
- ✅ 可以正常集成到主页面
- ✅ 与其他组件不冲突
- ✅ 错误处理正确显示

---

## 浏览器兼容性测试

### 14. 跨浏览器测试 ✅

#### 测试浏览器
- [ ] Chrome (最新版本)
- [ ] Firefox (最新版本)
- [ ] Safari (最新版本)
- [ ] Edge (最新版本)

#### 测试项目
- [ ] 图像上传和预览
- [ ] Canvas 渲染
- [ ] API 请求
- [ ] 文件下载
- [ ] 样式显示

---

## 回归测试清单

在修改代码后，运行以下快速回归测试：

1. [ ] 上传图像 → 选择方向 → 调整尺寸 → 输入 Prompt → 生成
2. [ ] 测试所有5个扩展方向
3. [ ] 测试错误处理（无图像、无 Prompt）
4. [ ] 测试重置功能
5. [ ] 测试下载功能

---

## 测试结果记录

### 测试日期: ___________
### 测试人员: ___________
### 浏览器版本: ___________

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 图像上传 | ⬜ 通过 / ⬜ 失败 | |
| 方向选择 | ⬜ 通过 / ⬜ 失败 | |
| 尺寸配置 | ⬜ 通过 / ⬜ 失败 | |
| Prompt输入 | ⬜ 通过 / ⬜ 失败 | |
| 参数配置 | ⬜ 通过 / ⬜ 失败 | |
| 错误处理 | ⬜ 通过 / ⬜ 失败 | |
| 生成流程 | ⬜ 通过 / ⬜ 失败 | |
| 结果展示 | ⬜ 通过 / ⬜ 失败 | |
| 重置功能 | ⬜ 通过 / ⬜ 失败 | |
| UI/UX | ⬜ 通过 / ⬜ 失败 | |

---

## 已知问题

记录测试中发现的问题：

1. 
2. 
3. 

---

## 测试总结

### 通过率: _____ / _____

### 主要发现:


### 建议改进:


---

**文档版本**: 1.0  
**最后更新**: 2025-11-17
