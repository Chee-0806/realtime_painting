# ControlNetItem 组件测试指南

## 测试概述

本文档提供 `ControlNetItem.svelte` 组件的完整测试指南。

## 测试环境准备

### 启动开发服务器

```bash
cd frontend
npm run dev
```

访问示例页面：`http://localhost:5173/src/lib/components/ControlNetItem.example.svelte`

## 功能测试清单

### ✅ 基础渲染测试

- [ ] 组件正常渲染
- [ ] 标题显示正确的索引号
- [ ] 所有表单元素可见

### ✅ 类型选择测试

- [ ] 下拉菜单功能正常
- [ ] 所有类型都可选择
- [ ] 选择后值正确更新

### ✅ 图像上传测试

- [ ] 文件选择功能正常
- [ ] 图像预览正确显示
- [ ] 支持 PNG/JPG/WebP 格式
- [ ] 非图像文件显示错误提示

### ✅ 权重滑块测试

- [ ] 滑块可以拖动
- [ ] 值范围：0.0 - 2.0
- [ ] 标签显示当前值
- [ ] 键盘操作正常

### ✅ 引导范围测试

- [ ] 引导开始滑块正常
- [ ] 引导结束滑块正常
- [ ] 值范围：0.0 - 1.0
- [ ] 响应式布局正确

### ✅ 删除功能测试

- [ ] 删除按钮可点击
- [ ] 触发 onRemove 回调
- [ ] 传递正确的 ID

## 交互测试场景

### 场景 1: 完整配置流程

1. 添加 ControlNet
2. 选择类型为 "depth"
3. 上传测试图像
4. 调整权重到 1.5
5. 设置引导范围 0.2-0.8
6. 验证配置状态

### 场景 2: 多个 ControlNet 管理

1. 添加 3 个 ControlNet
2. 为每个设置不同配置
3. 验证独立性
4. 删除中间项目
5. 验证索引号重新计算

### 场景 3: 错误处理

1. 上传非图像文件
2. 验证错误提示
3. 验证解决建议

## 浏览器兼容性

- [ ] Chrome 90+
- [ ] Firefox 88+
- [ ] Safari 14+
- [ ] Edge 90+

---

**最后更新**: 2025-11-17
