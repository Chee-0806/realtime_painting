# ImageEditor 滤镜功能测试指南

## 概述

本文档描述如何测试 ImageEditor 组件的滤镜功能。

## 实现的滤镜

### 1. 模糊滤镜 (Blur)
- **功能**: 使图像变得柔和，减少细节
- **算法**: 盒式模糊（Box Blur）
- **强度控制**: 0-100%，控制模糊半径
- **应用场景**: 背景虚化、柔焦效果

### 2. 锐化滤镜 (Sharpen)
- **功能**: 增强图像边缘，使细节更清晰
- **算法**: 卷积锐化核
- **强度控制**: 0-100%，控制锐化程度
- **应用场景**: 增强细节、提升清晰度

### 3. 灰度滤镜 (Grayscale)
- **功能**: 将彩色图像转换为黑白
- **算法**: 标准灰度转换公式 (0.299R + 0.587G + 0.114B)
- **强度控制**: 无（完全转换）
- **应用场景**: 黑白效果、艺术风格

## 测试步骤

### 基础功能测试

#### 1. 滤镜选择测试
```
步骤：
1. 上传一张测试图像
2. 在"滤镜效果"面板中打开滤镜下拉菜单
3. 验证显示以下选项：
   - 无滤镜
   - 模糊
   - 锐化
   - 灰度

预期结果：
✓ 下拉菜单正确显示所有滤镜选项
✓ 默认选中"无滤镜"
```

#### 2. 模糊滤镜测试
```
步骤：
1. 选择"模糊"滤镜
2. 观察图像实时预览
3. 调整强度滑块（0-100%）
4. 观察模糊效果变化
5. 点击"应用滤镜"按钮

预期结果：
✓ 选择滤镜后立即显示模糊效果
✓ 强度滑块可调节模糊程度
✓ 强度越高，模糊越明显
✓ 应用后滤镜效果保存到历史记录
✓ 显示提示信息："模糊滤镜：使图像变得柔和，减少细节"
```

#### 3. 锐化滤镜测试
```
步骤：
1. 选择"锐化"滤镜
2. 观察图像实时预览
3. 调整强度滑块（0-100%）
4. 观察锐化效果变化
5. 点击"应用滤镜"按钮

预期结果：
✓ 选择滤镜后立即显示锐化效果
✓ 强度滑块可调节锐化程度
✓ 强度越高，边缘越清晰
✓ 应用后滤镜效果保存到历史记录
✓ 显示提示信息："锐化滤镜：增强图像边缘，使细节更清晰"
```

#### 4. 灰度滤镜测试
```
步骤：
1. 选择"灰度"滤镜
2. 观察图像实时预览
3. 验证不显示强度滑块
4. 点击"应用滤镜"按钮

预期结果：
✓ 选择滤镜后立即显示灰度效果
✓ 图像完全转换为黑白
✓ 不显示强度控制滑块
✓ 应用后滤镜效果保存到历史记录
✓ 显示提示信息："灰度滤镜：将图像转换为黑白"
```

### 交互功能测试

#### 5. 滤镜取消测试
```
步骤：
1. 选择任意滤镜
2. 观察预览效果
3. 点击"取消"按钮

预期结果：
✓ 图像恢复到应用滤镜前的状态
✓ 滤镜选择重置为"无滤镜"
✓ 强度滑块重置为100%
```

#### 6. 滤镜切换测试
```
步骤：
1. 选择"模糊"滤镜
2. 不点击应用，直接切换到"锐化"滤镜
3. 再切换到"灰度"滤镜
4. 最后切换回"无滤镜"

预期结果：
✓ 每次切换都立即显示新滤镜效果
✓ 切换到"无滤镜"时恢复原始图像
✓ 未应用的滤镜不会保存到历史记录
```

#### 7. 滤镜与撤销/重做测试
```
步骤：
1. 应用模糊滤镜
2. 应用锐化滤镜
3. 点击"撤销"按钮
4. 点击"重做"按钮

预期结果：
✓ 撤销后回到模糊滤镜状态
✓ 重做后回到锐化滤镜状态
✓ 历史记录正确管理滤镜操作
```

#### 8. 滤镜与重置测试
```
步骤：
1. 应用多个滤镜
2. 进行其他编辑操作（旋转、缩放等）
3. 点击"重置"按钮

预期结果：
✓ 图像恢复到原始状态
✓ 所有滤镜效果被清除
✓ 滤镜选择重置为"无滤镜"
✓ 历史记录被清空
```

### 性能测试

#### 9. 大图像滤镜测试
```
步骤：
1. 上传一张大尺寸图像（如2000x2000px）
2. 应用模糊滤镜（强度100%）
3. 观察处理时间和响应性

预期结果：
✓ 滤镜处理在合理时间内完成（<3秒）
✓ UI不会冻结
✓ 滤镜效果正确应用
```

#### 10. 连续滤镜测试
```
步骤：
1. 连续应用多个不同滤镜
2. 每次应用后观察效果
3. 验证历史记录

预期结果：
✓ 每个滤镜都正确应用
✓ 滤镜效果可以叠加
✓ 历史记录正确保存每次操作
✓ 可以撤销到任意历史状态
```

### 边界情况测试

#### 11. 空画布滤镜测试
```
步骤：
1. 不上传图像
2. 尝试选择滤镜

预期结果：
✓ 滤镜选择可用但不产生效果
✓ 不会出现错误
```

#### 12. 滤镜强度边界测试
```
步骤：
1. 选择模糊滤镜
2. 将强度设置为0%
3. 将强度设置为100%
4. 观察效果差异

预期结果：
✓ 0%强度时几乎无效果
✓ 100%强度时效果最明显
✓ 不会出现错误或异常
```

## UI验证清单

- [ ] 滤镜下拉菜单正确显示
- [ ] 滤镜选项文字清晰易懂
- [ ] 强度滑块仅在需要时显示
- [ ] 强度百分比实时更新
- [ ] 滤镜说明文字正确显示
- [ ] "应用滤镜"和"取消"按钮正确显示
- [ ] 按钮状态正确（启用/禁用）
- [ ] 实时预览流畅无卡顿
- [ ] 提示信息清晰有帮助

## 已知限制

1. **模糊滤镜**: 使用简单的盒式模糊算法，对于大半径可能较慢
2. **锐化滤镜**: 过度锐化可能产生光晕效果
3. **灰度滤镜**: 不可逆，应用后无法恢复原始颜色（除非撤销）

## 性能优化建议

1. 对于大图像，考虑降采样后应用滤镜
2. 可以添加进度指示器显示处理状态
3. 考虑使用 Web Workers 进行后台处理

## 测试结果记录

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 滤镜选择 | ⏳ 待测试 | |
| 模糊滤镜 | ⏳ 待测试 | |
| 锐化滤镜 | ⏳ 待测试 | |
| 灰度滤镜 | ⏳ 待测试 | |
| 滤镜取消 | ⏳ 待测试 | |
| 滤镜切换 | ⏳ 待测试 | |
| 撤销/重做 | ⏳ 待测试 | |
| 重置功能 | ⏳ 待测试 | |
| 大图像性能 | ⏳ 待测试 | |
| 连续滤镜 | ⏳ 待测试 | |

## 测试环境

- **浏览器**: Chrome/Firefox/Safari
- **操作系统**: macOS/Windows/Linux
- **测试图像**: 各种尺寸和格式（PNG, JPG, WebP）

---

**测试日期**: 2025-11-17
**测试人员**: 待定
**版本**: 1.0
