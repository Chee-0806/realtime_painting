# FaceRestorePanel 测试指南

## 测试概述

本文档提供 `FaceRestorePanel` 组件的完整测试指南。

## 前置条件

### 后端服务
确保后端服务正常运行并支持面部修复功能。

### 测试图像
准备以下测试图像：
- ✅ 包含清晰人脸的图像（512x512 或更大）
- ✅ 低质量/模糊的人脸图像
- ✅ 多人脸图像
- ❌ 不包含人脸的图像（用于错误测试）

## 手动测试清单

### 1. 图像上传功能

#### 测试用例 1.1：正常图像上传
- [ ] 点击"选择图像"按钮
- [ ] 选择包含人脸的 PNG/JPG 图像
- [ ] 验证图像正确显示在预览区域
- [ ] 验证显示正确的图像尺寸信息

**预期结果**：图像成功加载并显示

#### 测试用例 1.2：无效文件类型
- [ ] 尝试上传非图像文件
- [ ] 验证显示错误提示

**预期结果**：显示"请选择图像文件"错误

### 2. 模型选择功能

#### 测试用例 2.1：CodeFormer 模型
- [ ] 选择 "CodeFormer (推荐)" 模型
- [ ] 执行修复操作
- [ ] 验证修复成功

#### 测试用例 2.2：GFPGAN 模型
- [ ] 选择 "GFPGAN" 模型
- [ ] 执行修复操作
- [ ] 验证修复成功

### 3. 修复强度调整

#### 测试用例 3.1：不同强度测试
- [ ] 测试强度 0.0（轻微修复）
- [ ] 测试强度 0.5（平衡修复）
- [ ] 测试强度 1.0（强力修复）
- [ ] 验证提示文本根据强度变化

### 4. 面部修复执行

#### 测试用例 4.1：正常修复流程
- [ ] 上传包含人脸的图像
- [ ] 选择模型和强度
- [ ] 点击"开始修复"按钮
- [ ] 验证显示进度条
- [ ] 验证修复完成后显示结果

#### 测试用例 4.2：未上传图像
- [ ] 不上传图像直接点击修复
- [ ] 验证显示"请选择源图像"错误

### 5. 前后对比功能

#### 测试用例 5.1：对比滑块交互
- [ ] 完成修复后验证显示对比视图
- [ ] 拖动对比滑块
- [ ] 验证分隔线位置实时更新
- [ ] 验证左侧显示原图，右侧显示修复结果

#### 测试用例 5.2：切换对比视图
- [ ] 点击"隐藏对比"按钮
- [ ] 验证只显示修复结果
- [ ] 点击"显示对比"按钮
- [ ] 验证重新显示对比视图

### 6. 结果下载

#### 测试用例 6.1：下载修复结果
- [ ] 完成修复后点击"下载"按钮
- [ ] 验证文件下载成功
- [ ] 验证文件名格式正确

### 7. 重置功能

#### 测试用例 7.1：完整重置
- [ ] 完成修复后点击"重置"按钮
- [ ] 验证所有状态恢复默认值

### 8. 错误处理

#### 测试用例 8.1：网络错误
- [ ] 停止后端服务
- [ ] 尝试执行修复
- [ ] 验证显示网络错误提示

#### 测试用例 8.2：无人脸图像
- [ ] 使用不包含人脸的图像
- [ ] 执行修复
- [ ] 验证显示适当的错误信息

## API 测试

### 测试端点
POST /api/face-restore

### 请求示例
```json
{
  "image": "data:image/png;base64,...",
  "model": "codeformer",
  "strength": 0.8
}
```

### 预期响应
```json
{
  "success": true,
  "image": "data:image/png;base64,...",
  "message": "面部修复成功"
}
```

## 浏览器兼容性

测试以下浏览器：
- [ ] Chrome 90+
- [ ] Firefox 88+
- [ ] Safari 14+
- [ ] Edge 90+

---

**最后更新**：2025-11-17
