<script lang="ts">
  /**
   * UpscalePanel ä½¿ç”¨ç¤ºä¾‹
   * 
   * æœ¬æ–‡ä»¶å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸åŒåœºæ™¯ä¸‹ä½¿ç”¨ UpscalePanel ç»„ä»¶
   */
  
  import UpscalePanel from './UpscalePanel.svelte';
  
  // ç¤ºä¾‹ 1: åŸºæœ¬ä½¿ç”¨
  let showBasicExample = true;
  
  // ç¤ºä¾‹ 2: åœ¨æ¨¡æ€æ¡†ä¸­ä½¿ç”¨
  let showModalExample = false;
  
  // ç¤ºä¾‹ 3: åœ¨æ ‡ç­¾é¡µä¸­ä½¿ç”¨
  let activeTab = 'upscale';
  
  // ç¤ºä¾‹ 4: ä¸å…¶ä»–åŠŸèƒ½é›†æˆ
  let showIntegratedExample = false;
</script>

<div class="examples-container">
  <h1 class="text-2xl font-bold mb-6">UpscalePanel ä½¿ç”¨ç¤ºä¾‹</h1>
  
  <!-- ç¤ºä¾‹å¯¼èˆª -->
  <div class="mb-8 flex gap-2">
    <button 
      on:click={() => showBasicExample = !showBasicExample}
      class="px-4 py-2 bg-primary text-white rounded-lg"
    >
      ç¤ºä¾‹ 1: åŸºæœ¬ä½¿ç”¨
    </button>
    <button 
      on:click={() => showModalExample = !showModalExample}
      class="px-4 py-2 bg-primary text-white rounded-lg"
    >
      ç¤ºä¾‹ 2: æ¨¡æ€æ¡†
    </button>
    <button 
      on:click={() => activeTab = 'upscale'}
      class="px-4 py-2 bg-primary text-white rounded-lg"
    >
      ç¤ºä¾‹ 3: æ ‡ç­¾é¡µ
    </button>
    <button 
      on:click={() => showIntegratedExample = !showIntegratedExample}
      class="px-4 py-2 bg-primary text-white rounded-lg"
    >
      ç¤ºä¾‹ 4: é›†æˆä½¿ç”¨
    </button>
  </div>
  
  <!-- ç¤ºä¾‹ 1: åŸºæœ¬ä½¿ç”¨ -->
  {#if showBasicExample}
    <section class="example-section">
      <h2 class="text-xl font-semibold mb-4">ç¤ºä¾‹ 1: åŸºæœ¬ä½¿ç”¨</h2>
      <p class="text-sm text-text-secondary mb-4">
        æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼Œç›´æ¥åœ¨é¡µé¢ä¸­åµŒå…¥ç»„ä»¶ã€‚
      </p>
      
      <div class="card p-6">
        <UpscalePanel />
      </div>
      
      <details class="mt-4">
        <summary class="cursor-pointer text-primary font-medium">æŸ¥çœ‹ä»£ç </summary>
        <pre class="mt-2 p-4 bg-surface-elevated rounded-lg overflow-x-auto"><code>{`<script>
  import UpscalePanel from '$lib/components/UpscalePanel.svelte';
</script>

<div class="card">
  <UpscalePanel />
</div>`}</code></pre>
      </details>
    </section>
  {/if}
  
  <!-- ç¤ºä¾‹ 2: åœ¨æ¨¡æ€æ¡†ä¸­ä½¿ç”¨ -->
  {#if showModalExample}
    <section class="example-section">
      <h2 class="text-xl font-semibold mb-4">ç¤ºä¾‹ 2: åœ¨æ¨¡æ€æ¡†ä¸­ä½¿ç”¨</h2>
      <p class="text-sm text-text-secondary mb-4">
        å°†ç»„ä»¶æ”¾åœ¨æ¨¡æ€æ¡†ä¸­ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚
      </p>
      
      <button 
        on:click={() => showModalExample = true}
        class="px-4 py-2 bg-success text-white rounded-lg"
      >
        æ‰“å¼€å›¾åƒæ”¾å¤§å·¥å…·
      </button>
      
      <!-- æ¨¡æ€æ¡† -->
      <div class="modal-overlay">
        <div class="modal-content">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold">å›¾åƒæ”¾å¤§</h3>
            <button 
              on:click={() => showModalExample = false}
              class="text-2xl text-text-secondary hover:text-text-primary"
            >
              Ã—
            </button>
          </div>
          
          <UpscalePanel />
        </div>
      </div>
      
      <details class="mt-4">
        <summary class="cursor-pointer text-primary font-medium">æŸ¥çœ‹ä»£ç </summary>
        <pre class="mt-2 p-4 bg-surface-elevated rounded-lg overflow-x-auto"><code>{`<script>
  import UpscalePanel from '$lib/components/UpscalePanel.svelte';
  let showModal = false;
</script>

<button on:click={() => showModal = true}>
  æ‰“å¼€å›¾åƒæ”¾å¤§å·¥å…·
</button>

{#if showModal}
  <div class="modal-overlay">
    <div class="modal-content">
      <div class="flex justify-between items-center mb-4">
        <h3>å›¾åƒæ”¾å¤§</h3>
        <button on:click={() => showModal = false}>Ã—</button>
      </div>
      <UpscalePanel />
    </div>
  </div>
{/if}`}</code></pre>
      </details>
    </section>
  {/if}
  
  <!-- ç¤ºä¾‹ 3: åœ¨æ ‡ç­¾é¡µä¸­ä½¿ç”¨ -->
  <section class="example-section">
    <h2 class="text-xl font-semibold mb-4">ç¤ºä¾‹ 3: åœ¨æ ‡ç­¾é¡µä¸­ä½¿ç”¨</h2>
    <p class="text-sm text-text-secondary mb-4">
      ä¸å…¶ä»–å›¾åƒå¤„ç†åŠŸèƒ½æ”¾åœ¨åŒä¸€ä¸ªæ ‡ç­¾é¡µç•Œé¢ä¸­ã€‚
    </p>
    
    <div class="card p-6">
      <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
      <div class="flex gap-2 mb-6 border-b border-border">
        <button 
          on:click={() => activeTab = 'upscale'}
          class="px-4 py-2 {activeTab === 'upscale' ? 'border-b-2 border-primary text-primary' : 'text-text-secondary'}"
        >
          å›¾åƒæ”¾å¤§
        </button>
        <button 
          on:click={() => activeTab = 'inpaint'}
          class="px-4 py-2 {activeTab === 'inpaint' ? 'border-b-2 border-primary text-primary' : 'text-text-secondary'}"
        >
          å±€éƒ¨é‡ç»˜
        </button>
        <button 
          on:click={() => activeTab = 'outpaint'}
          class="px-4 py-2 {activeTab === 'outpaint' ? 'border-b-2 border-primary text-primary' : 'text-text-secondary'}"
        >
          ç”»å¸ƒæ‰©å±•
        </button>
      </div>
      
      <!-- æ ‡ç­¾é¡µå†…å®¹ -->
      {#if activeTab === 'upscale'}
        <UpscalePanel />
      {:else if activeTab === 'inpaint'}
        <div class="text-center text-text-secondary py-8">
          å±€éƒ¨é‡ç»˜åŠŸèƒ½ï¼ˆç¤ºä¾‹ï¼‰
        </div>
      {:else if activeTab === 'outpaint'}
        <div class="text-center text-text-secondary py-8">
          ç”»å¸ƒæ‰©å±•åŠŸèƒ½ï¼ˆç¤ºä¾‹ï¼‰
        </div>
      {/if}
    </div>
    
    <details class="mt-4">
      <summary class="cursor-pointer text-primary font-medium">æŸ¥çœ‹ä»£ç </summary>
      <pre class="mt-2 p-4 bg-surface-elevated rounded-lg overflow-x-auto"><code>{`<script>
  import UpscalePanel from '$lib/components/UpscalePanel.svelte';
  let activeTab = 'upscale';
</script>

<div class="tabs">
  <button on:click={() => activeTab = 'upscale'}>
    å›¾åƒæ”¾å¤§
  </button>
  <button on:click={() => activeTab = 'inpaint'}>
    å±€éƒ¨é‡ç»˜
  </button>
  <button on:click={() => activeTab = 'outpaint'}>
    ç”»å¸ƒæ‰©å±•
  </button>
</div>

{#if activeTab === 'upscale'}
  <UpscalePanel />
{:else if activeTab === 'inpaint'}
  <!-- InpaintingPanel -->
{:else if activeTab === 'outpaint'}
  <!-- OutpaintingPanel -->
{/if}`}</code></pre>
    </details>
  </section>
  
  <!-- ç¤ºä¾‹ 4: ä¸å…¶ä»–åŠŸèƒ½é›†æˆ -->
  {#if showIntegratedExample}
    <section class="example-section">
      <h2 class="text-xl font-semibold mb-4">ç¤ºä¾‹ 4: ä¸å…¶ä»–åŠŸèƒ½é›†æˆ</h2>
      <p class="text-sm text-text-secondary mb-4">
        åœ¨ä¸»é¡µé¢ä¸­é›†æˆï¼Œä¸ç”ŸæˆåŠŸèƒ½é…åˆä½¿ç”¨ã€‚
      </p>
      
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- å·¦ä¾§ï¼šç”ŸæˆåŒºåŸŸï¼ˆç¤ºä¾‹ï¼‰ -->
        <div class="card p-6">
          <h3 class="text-lg font-semibold mb-4">å›¾åƒç”Ÿæˆ</h3>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2">Prompt</label>
              <textarea 
                class="w-full px-3 py-2 bg-surface-elevated border border-border rounded-lg"
                rows="3"
                placeholder="æè¿°ä½ æƒ³è¦ç”Ÿæˆçš„å›¾åƒ..."
              ></textarea>
            </div>
            
            <button class="w-full px-4 py-3 bg-primary text-white rounded-lg">
              ç”Ÿæˆå›¾åƒ
            </button>
            
            <div class="border border-border rounded-lg p-4 bg-surface-elevated">
              <p class="text-center text-text-secondary">ç”Ÿæˆç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</p>
            </div>
            
            <button class="w-full px-4 py-2 bg-success text-white rounded-lg">
              æ”¾å¤§ç”Ÿæˆç»“æœ â†’
            </button>
          </div>
        </div>
        
        <!-- å³ä¾§ï¼šæ”¾å¤§åŒºåŸŸ -->
        <div class="card p-6">
          <UpscalePanel />
        </div>
      </div>
      
      <details class="mt-4">
        <summary class="cursor-pointer text-primary font-medium">æŸ¥çœ‹ä»£ç </summary>
        <pre class="mt-2 p-4 bg-surface-elevated rounded-lg overflow-x-auto"><code>{`<script>
  import UpscalePanel from '$lib/components/UpscalePanel.svelte';
  
  let generatedImage = '';
  
  async function generateImage() {
    // ç”Ÿæˆå›¾åƒé€»è¾‘
    const response = await fetch('/api/generate', {
      method: 'POST',
      body: JSON.stringify({ prompt: '...' })
    });
    const data = await response.json();
    generatedImage = data.image;
  }
  
  function upscaleGenerated() {
    // å°†ç”Ÿæˆçš„å›¾åƒä¼ é€’ç»™ UpscalePanel
    // å¯ä»¥é€šè¿‡äº‹ä»¶æˆ–çŠ¶æ€ç®¡ç†å®ç°
  }
</script>

<div class="grid grid-cols-2 gap-6">
  <div class="card">
    <h3>å›¾åƒç”Ÿæˆ</h3>
    <textarea bind:value={prompt}></textarea>
    <button on:click={generateImage}>ç”Ÿæˆå›¾åƒ</button>
    {#if generatedImage}
      <img src={generatedImage} alt="ç”Ÿæˆç»“æœ" />
      <button on:click={upscaleGenerated}>æ”¾å¤§ç”Ÿæˆç»“æœ</button>
    {/if}
  </div>
  
  <div class="card">
    <UpscalePanel />
  </div>
</div>`}</code></pre>
      </details>
    </section>
  {/if}
  
  <!-- ä½¿ç”¨æŠ€å·§ -->
  <section class="example-section mt-8">
    <h2 class="text-xl font-semibold mb-4">ğŸ’¡ ä½¿ç”¨æŠ€å·§</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="card p-4">
        <h3 class="font-semibold mb-2">ğŸ¯ é€‰æ‹©åˆé€‚çš„ç®—æ³•</h3>
        <ul class="text-sm text-text-secondary space-y-1">
          <li>â€¢ <strong>Real-ESRGAN</strong>: ç…§ç‰‡ã€è‰ºæœ¯ä½œå“</li>
          <li>â€¢ <strong>Lanczos</strong>: å¿«é€Ÿé¢„è§ˆ</li>
          <li>â€¢ <strong>Bicubic</strong>: ä¸€èˆ¬ç”¨é€”</li>
        </ul>
      </div>
      
      <div class="card p-4">
        <h3 class="font-semibold mb-2">ğŸ“ æ”¾å¤§å€æ•°å»ºè®®</h3>
        <ul class="text-sm text-text-secondary space-y-1">
          <li>â€¢ <strong>2.0x</strong>: æœ€å¸¸ç”¨ï¼Œæ•ˆæœå¥½</li>
          <li>â€¢ <strong>3.0x-4.0x</strong>: é«˜å€æ”¾å¤§ï¼Œè€—æ—¶é•¿</li>
          <li>â€¢ <strong>1.0x-1.5x</strong>: è½»å¾®æ”¾å¤§ï¼Œå¿«é€Ÿ</li>
        </ul>
      </div>
      
      <div class="card p-4">
        <h3 class="font-semibold mb-2">âš¡ æ€§èƒ½ä¼˜åŒ–</h3>
        <ul class="text-sm text-text-secondary space-y-1">
          <li>â€¢ åŸå§‹å›¾åƒä¸è¦å¤ªå¤§ï¼ˆâ‰¤ 2048pxï¼‰</li>
          <li>â€¢ é¢„è§ˆæ—¶ä½¿ç”¨ Lanczos</li>
          <li>â€¢ æœ€ç»ˆè¾“å‡ºä½¿ç”¨ Real-ESRGAN</li>
        </ul>
      </div>
      
      <div class="card p-4">
        <h3 class="font-semibold mb-2">ğŸ”§ æ•…éšœæ’é™¤</h3>
        <ul class="text-sm text-text-secondary space-y-1">
          <li>â€¢ æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ</li>
          <li>â€¢ ç¡®è®¤ upscale_pipeline å·²åŠ è½½</li>
          <li>â€¢ æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯</li>
        </ul>
      </div>
    </div>
  </section>
</div>

<style>
  .examples-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
  }
  
  .example-section {
    margin-bottom: 3rem;
  }
  
  .card {
    background: var(--surface, #1a1a1a);
    border: 1px solid var(--border, #333);
    border-radius: 0.5rem;
  }
  
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }
  
  .modal-content {
    background: var(--surface, #1a1a1a);
    border: 1px solid var(--border, #333);
    border-radius: 0.5rem;
    padding: 2rem;
    max-width: 600px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
  }
  
  pre {
    font-size: 0.875rem;
    line-height: 1.5;
  }
  
  code {
    font-family: 'Courier New', monospace;
  }
</style>
