import{s as Il,f as i,g as c,h as _,d as f,j as n,i as j,C as pt,B as Xs,p as ul,a as x,u as O,c as E,v as l,D as Jt,k as zt,w as z,E as Rt,F as ma,l as L,m as S,n as ne,r as _a,x as ga,y as xa,z as Ea,G as ar,e as Wl,o as is,H as Ve,I as Ht,J as rs,K as yl,A as Sl,L as ss,M as xr,N as Ca,O as ya,P as Er,Q as wa,R as Da}from"../chunks/scheduler.ae4f2bff.js";import{S as Al,i as Tl,a as $e,t as ht,g as xl,c as El,b as ol,d as il,m as cl,e as fl,f as Cr}from"../chunks/index.92b2b836.js";import{w as or}from"../chunks/index.fa5aef85.js";import{s as _t,E as gt,c as nl,p as va,M as ka,P as Fa,g as yr,a as Ia}from"../chunks/ModelManager.36413409.js";import{E as Aa,K as Ta,k as Ba,M as Pa}from"../chunks/keyboard.6f54b027.js";import{S as Va}from"../chunks/spinner.471702df.js";import{e as Gt}from"../chunks/each.fa7c727b.js";const Na=!0,ai=Object.freeze(Object.defineProperty({__proto__:null,prerender:Na},Symbol.toStringTag,{value:"Module"}));var ba=(s=>(s.IMAGE="image",s.VIDEO="video",s))(ba||{}),ws=(s=>(s.DISCONNECTED="disconnected",s.CONNECTING="connecting",s.CONNECTED="connected",s.RUNNING="running",s.TIMEOUT="timeout",s.ERROR="error",s))(ws||{});const Jl=or("disconnected"),Ws=or(null);let Cl=null,_s=null,ys=null,gs=!1,nr=!1;function La(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const e=Math.random()*16|0;return(s==="x"?e:e&3|8).toString(16)})}async function Sa(){if(nr){console.warn("sendFrame: æ­£åœ¨å‘é€ä¸­ï¼Œè·³è¿‡æœ¬æ¬¡è¯·æ±‚");return}if(!Cl||Cl.readyState!==WebSocket.OPEN||!ys){console.warn("sendFrame: WebSocket æœªå°±ç»ªæˆ– streamDataGetter æœªè®¾ç½®",{ws:!!Cl,readyState:Cl==null?void 0:Cl.readyState,hasGetter:!!ys});return}nr=!0;try{const s=ys(),e=s[0],t=s.length>1?s[1]:null;console.log("sendFrame: å‡†å¤‡å‘é€æ•°æ®",{hasParams:!!e,hasImage:!!t,paramsKeys:e?Object.keys(e):[]});const r={};for(const[a,o]of Object.entries(e))if(o!==void 0){if(typeof o=="number"&&(isNaN(o)||!isFinite(o))){console.warn(`å‚æ•° ${a} çš„å€¼ ${o} ä¸æ˜¯æœ‰æ•ˆæ•°å­—ï¼Œè·³è¿‡`);continue}r[a]=o}const u={status:"next_frame",params:r};if(t){const a=await t.arrayBuffer(),o=new Uint8Array(a);let d="";const p=8192;for(let m=0;m<o.length;m+=p){const b=o.subarray(m,Math.min(m+p,o.length));d+=String.fromCharCode.apply(null,Array.from(b))}const h=btoa(d);u.image=`data:image/jpeg;base64,${h}`}Cl.send(JSON.stringify(u)),console.log("sendFrame: æ•°æ®å‘é€å®Œæˆ",{sentParams:!0,sentImage:!!t,messageSize:JSON.stringify(u).length})}catch(s){throw console.error("å‘é€å¸§å¤±è´¥:",s),s}finally{nr=!1}}const wr={async start(s){if(!gs){ys=s,_s=La(),Ws.set(_s),console.log("è®¾ç½® userId:",_s),gs=!0,Jl.set("connecting");try{const e=window.location.protocol==="https:"?"wss:":"ws:",t=window.location.host,r=`${e}//${t}/api/ws/${_s}`;Cl=new WebSocket(r),Cl.onopen=()=>{Jl.set("connected"),console.log("WebSocketè¿æ¥æˆåŠŸ")},Cl.onmessage=async u=>{try{if(typeof u.data=="string"){const a=JSON.parse(u.data);console.log("æ”¶åˆ°WebSocketæ¶ˆæ¯:",a),a.status==="send_frame"?(console.log("æ”¶åˆ° send_frame è¯·æ±‚ï¼Œå‡†å¤‡å‘é€æ•°æ®"),setTimeout(async()=>{try{await Sa(),console.log("æ•°æ®å·²å‘é€"),Jl.set("running")}catch(o){console.error("å‘é€å¸§æ—¶å‡ºé”™:",o)}},0)):(a.status==="connected"||a.status==="wait")&&console.log("WebSocketçŠ¶æ€:",a.status)}}catch(a){console.error("å¤„ç†WebSocketæ¶ˆæ¯å¤±è´¥:",a)}},Cl.onerror=u=>{console.error("WebSocketé”™è¯¯:",u),Jl.set("error"),gs=!1},Cl.onclose=()=>{Jl.set("disconnected"),gs=!1,Cl=null,_s=null,Ws.set(null)}}catch(e){throw Jl.set("error"),gs=!1,e}}},stop(){Cl&&(Cl.close(),Cl=null),_s=null,Ws.set(null),ys=null,gs=!1,Jl.set("disconnected")}};function Oa(s){let e,t,r="ğŸ–¼ï¸",u,a,o="ç”Ÿæˆç»“æœ",d;function p(b,v){return b[2]?Ua:ja}let h=p(s),m=h(s);return{c(){e=i("div"),t=i("div"),t.textContent=r,u=x(),a=i("p"),a.textContent=o,d=x(),m.c(),this.h()},l(b){e=c(b,"DIV",{class:!0});var v=_(e);t=c(v,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-97t3im"&&(t.textContent=r),u=E(v),a=c(v,"P",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-1vxztt1"&&(a.textContent=o),d=E(v),m.l(v),v.forEach(f),this.h()},h(){n(t,"class","text-6xl opacity-50"),n(a,"class","text-lg font-medium"),n(e,"class","flex flex-col items-center gap-4 text-text-secondary w-full")},m(b,v){j(b,e,v),l(e,t),l(e,u),l(e,a),l(e,d),m.m(e,null)},p(b,v){h!==(h=p(b))&&(m.d(1),m=h(b),m&&(m.c(),m.m(e,null)))},d(b){b&&f(e),m.d()}}}function Ma(s){let e,t,r,u;return{c(){e=i("img"),this.h()},l(a){e=c(a,"IMG",{src:!0,alt:!0,class:!0,style:!0}),this.h()},h(){Jt(e.src,t=s[1])||n(e,"src",t),n(e,"alt","ç”Ÿæˆç»“æœ"),n(e,"class","max-w-full max-h-full object-contain rounded-lg w-full"),zt(e,"max-height","70vh")},m(a,o){j(a,e,o),s[6](e),r||(u=[z(e,"load",s[7]),z(e,"error",s[8])],r=!0)},p(a,o){o&2&&!Jt(e.src,t=a[1])&&n(e,"src",t)},d(a){a&&f(e),s[6](null),r=!1,Rt(u)}}}function Ua(s){let e,t="ç­‰å¾…ç”Ÿæˆç»“æœ...";return{c(){e=i("p"),e.textContent=t,this.h()},l(r){e=c(r,"P",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-q6p80m"&&(e.textContent=t),this.h()},h(){n(e,"class","text-sm text-text-tertiary text-center")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function ja(s){let e,t='ç‚¹å‡»"å¼€å§‹ç”Ÿæˆ"æŒ‰é’®å¼€å§‹å®æ—¶ç”Ÿæˆ';return{c(){e=i("p"),e.textContent=t,this.h()},l(r){e=c(r,"P",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1drpcsf"&&(e.textContent=t),this.h()},h(){n(e,"class","text-sm text-text-tertiary text-center")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Ha(s){let e;function t(a,o){return a[1]?Ma:Oa}let r=t(s),u=r(s);return{c(){e=i("div"),u.c(),this.h()},l(a){e=c(a,"DIV",{class:!0});var o=_(e);u.l(o),o.forEach(f),this.h()},h(){n(e,"class","flex flex-col items-center justify-center min-h-[512px] bg-surface-elevated rounded-lg border border-border p-4 w-full")},m(a,o){j(a,e,o),u.m(e,null)},p(a,[o]){r===(r=t(a))&&u?u.p(a,o):(u.d(1),u=r(a),u&&(u.c(),u.m(e,null)))},i:pt,o:pt,d(a){a&&f(e),u.d()}}}function za(s,e,t){let r,u,a,o;Xs(s,Jl,v=>t(4,a=v)),Xs(s,Ws,v=>t(5,o=v));let d,p=null;function h(v){ul[v?"unshift":"push"](()=>{d=v,t(0,d),t(1,p),t(3,r),t(4,a),t(2,u),t(5,o)})}const m=()=>console.log("ImagePlayer: å›¾åƒåŠ è½½æˆåŠŸ",p),b=v=>console.error("ImagePlayer: å›¾åƒåŠ è½½å¤±è´¥",p,v);return s.$$.update=()=>{s.$$.dirty&32&&t(3,r=o),s.$$.dirty&16&&t(2,u=a===ws.RUNNING||a===ws.CONNECTED),s.$$.dirty&28&&console.log("ImagePlayer: userId å˜åŒ–",{userId:r,status:a,isRunning:u,hasUserId:!!r}),s.$$.dirty&8&&t(1,p=r?`/api/stream/${r}`:null),s.$$.dirty&31&&(p?(console.log("ImagePlayer: è®¾ç½®æµ URL",p,{userId:r,status:a,isRunning:u,hasImgElement:!!d}),d&&d.src!==p&&(t(0,d.src=p,d),console.log("ImagePlayer: å¼ºåˆ¶æ›´æ–° img.src",p))):console.log("ImagePlayer: imageUrl æœªè®¾ç½®",{userId:r,status:a,isRunning:u}))},[d,p,u,r,a,o,h,m,b]}class Ra extends Al{constructor(e){super(),Tl(this,e,za,Ha,Il,{})}}const ur=or({blob:null,timestamp:0}),qa={updateFrame(s){ur.set({blob:s,timestamp:Date.now()})},clearFrame(){ur.set({blob:null,timestamp:0})}};function Ga(s){let e,t,r="ğŸ“·",u,a,o="æ‘„åƒå¤´æœªå¯åŠ¨",d,p,h="å¯åŠ¨æ‘„åƒå¤´",m,b;return{c(){e=i("div"),t=i("div"),t.textContent=r,u=x(),a=i("p"),a.textContent=o,d=x(),p=i("button"),p.textContent=h,this.h()},l(v){e=c(v,"DIV",{class:!0});var g=_(e);t=c(g,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1tl9yyz"&&(t.textContent=r),u=E(g),a=c(g,"P",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-dlp303"&&(a.textContent=o),d=E(g),p=c(g,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),O(p)!=="svelte-1ahmd26"&&(p.textContent=h),g.forEach(f),this.h()},h(){n(t,"class","text-4xl mb-2"),n(a,"class","text-sm text-text-secondary mb-4"),n(p,"class","btn-primary"),n(p,"type","button"),n(e,"class","flex flex-col items-center justify-center min-h-[200px] w-full bg-surface-elevated rounded-lg border border-border p-4")},m(v,g){j(v,e,g),l(e,t),l(e,u),l(e,a),l(e,d),l(e,p),m||(b=z(p,"click",s[7]),m=!0)},p:pt,d(v){v&&f(e),m=!1,b()}}}function Wa(s){let e,t,r,u,a="æ‘„åƒå¤´å·²è¿æ¥",o,d,p="åœæ­¢æ‘„åƒå¤´",h,m;return{c(){e=i("canvas"),t=x(),r=i("div"),u=i("p"),u.textContent=a,o=x(),d=i("button"),d.textContent=p,this.h()},l(b){e=c(b,"CANVAS",{width:!0,height:!0,class:!0,style:!0}),_(e).forEach(f),t=E(b),r=c(b,"DIV",{class:!0});var v=_(r);u=c(v,"P",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-ba1vio"&&(u.textContent=a),o=E(v),d=c(v,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),O(d)!=="svelte-h1u78t"&&(d.textContent=p),v.forEach(f),this.h()},h(){n(e,"width",s[0]),n(e,"height",s[1]),n(e,"class","rounded-lg bg-surface-elevated border border-border w-full"),zt(e,"max-width","100%"),zt(e,"height","auto"),n(u,"class","text-xs text-text-tertiary"),n(d,"class","btn-secondary text-xs px-3 py-1"),n(d,"type","button"),n(r,"class","flex items-center justify-between w-full mt-2")},m(b,v){j(b,e,v),s[12](e),j(b,t,v),j(b,r,v),l(r,u),l(r,o),l(r,d),h||(m=z(d,"click",s[13]),h=!0)},p(b,v){v&1&&n(e,"width",b[0]),v&2&&n(e,"height",b[1])},d(b){b&&(f(e),f(t),f(r)),s[12](null),h=!1,m()}}}function Xa(s){let e,t,r="ğŸ“·",u,a,o,d,p,h="å¯åŠ¨æ‘„åƒå¤´",m,b;return{c(){e=i("div"),t=i("div"),t.textContent=r,u=x(),a=i("p"),o=L(s[5]),d=x(),p=i("button"),p.textContent=h,this.h()},l(v){e=c(v,"DIV",{class:!0});var g=_(e);t=c(g,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1tl9yyz"&&(t.textContent=r),u=E(g),a=c(g,"P",{class:!0});var C=_(a);o=S(C,s[5]),C.forEach(f),d=E(g),p=c(g,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),O(p)!=="svelte-1whtvr0"&&(p.textContent=h),g.forEach(f),this.h()},h(){n(t,"class","text-4xl mb-2"),n(a,"class","text-sm text-text-secondary text-center mb-4"),n(p,"class","btn-primary mt-2"),n(p,"type","button"),n(e,"class","flex flex-col items-center justify-center min-h-[200px] w-full bg-surface-elevated rounded-lg border border-border p-4")},m(v,g){j(v,e,g),l(e,t),l(e,u),l(e,a),l(a,o),l(e,d),l(e,p),m||(b=z(p,"click",s[7]),m=!0)},p(v,g){g&32&&ne(o,v[5])},d(v){v&&f(e),m=!1,b()}}}function Za(s){let e,t='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-2"></div> <p class="text-sm text-text-secondary">æ­£åœ¨è¯·æ±‚æ‘„åƒå¤´æƒé™...</p> <p class="text-xs text-text-tertiary mt-2">è¯·å…è®¸æµè§ˆå™¨è®¿é—®æ‚¨çš„æ‘„åƒå¤´</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-15p4y65"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex flex-col items-center justify-center min-h-[200px] w-full bg-surface-elevated rounded-lg border border-border p-4")},m(r,u){j(r,e,u)},p:pt,d(r){r&&f(e)}}}function Ya(s){let e,t,r;function u(d,p){return d[6]?Za:d[5]?Xa:d[3]?Wa:Ga}let a=u(s),o=a(s);return{c(){e=i("div"),t=i("video"),r=x(),o.c(),this.h()},l(d){e=c(d,"DIV",{class:!0});var p=_(e);t=c(p,"VIDEO",{width:!0,height:!0,class:!0,style:!0}),_(t).forEach(f),r=E(p),o.l(p),p.forEach(f),this.h()},h(){n(t,"width",s[0]),n(t,"height",s[1]),t.autoplay=!0,t.playsInline=!0,t.muted=!0,n(t,"class","rounded-lg bg-surface-elevated border border-border"),zt(t,"display","none"),n(e,"class","flex flex-col items-center gap-4 w-full")},m(d,p){j(d,e,p),l(e,t),s[11](t),l(e,r),o.m(e,null)},p(d,[p]){p&1&&n(t,"width",d[0]),p&2&&n(t,"height",d[1]),a===(a=u(d))&&o?o.p(d,p):(o.d(1),o=a(d),o&&(o.c(),o.m(e,null)))},i:pt,o:pt,d(d){d&&f(e),s[11](null),o.d()}}}function Ja(s,e,t){let{width:r=512}=e,{height:u=512}=e,a,o=null,d,p=null,h=null,m=!1,b="",v=!1;async function g(){t(6,v=!0),t(5,b="");try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("æµè§ˆå™¨ä¸æ”¯æŒæ‘„åƒå¤´è®¿é—®");t(3,o=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:r},height:{ideal:u}}})),t(6,v=!1);const k=()=>!a||!o?!1:(t(2,a.srcObject=o,a),a.play().then(()=>{const I=()=>a.readyState>=1?(d&&!p&&t(9,p=d.getContext("2d")),p&&d&&a&&(t(10,m=!0),C()),!0):!1;I()||(a.addEventListener("loadedmetadata",I,{once:!0}),setTimeout(()=>{!m&&o&&I()},1e3))}).catch(I=>{console.error("æ’­æ”¾è§†é¢‘å¤±è´¥:",I)}),!0);if(!k()){const I=setInterval(()=>{k()&&clearInterval(I)},50);setTimeout(()=>{clearInterval(I)},1e3)}}catch(k){console.error("æ— æ³•è®¿é—®æ‘„åƒå¤´:",k),t(6,v=!1),k instanceof Error?k.name==="NotAllowedError"||k.name==="PermissionDeniedError"?t(5,b="æ‘„åƒå¤´æƒé™è¢«æ‹’ç»ï¼Œè¯·åœ¨æµè§ˆå™¨è®¾ç½®ä¸­å…è®¸è®¿é—®æ‘„åƒå¤´"):k.name==="NotFoundError"||k.name==="DevicesNotFoundError"?t(5,b="æœªæ‰¾åˆ°æ‘„åƒå¤´è®¾å¤‡"):t(5,b=`æ— æ³•è®¿é—®æ‘„åƒå¤´: ${k.message}`):t(5,b="æ— æ³•è®¿é—®æ‘„åƒå¤´")}}ma(()=>{y(),o&&(o.getTracks().forEach(k=>k.stop()),t(3,o=null))});function C(){if(!d||!p||!a)return;const k=()=>{if(!m||!a||a.readyState!==a.HAVE_ENOUGH_DATA){h=requestAnimationFrame(k);return}p==null||p.drawImage(a,0,0,r,u),d.toBlob(I=>{I&&qa.updateFrame(I)},"image/png"),h=requestAnimationFrame(k)};k()}function y(){t(10,m=!1),h!==null&&(cancelAnimationFrame(h),h=null)}function D(k){ul[k?"unshift":"push"](()=>{a=k,t(2,a),t(3,o),t(4,d),t(9,p),t(10,m)})}function T(k){ul[k?"unshift":"push"](()=>{d=k,t(4,d)})}const F=()=>{y(),o&&(o.getTracks().forEach(k=>k.stop()),t(3,o=null)),t(6,v=!1),t(5,b="")};return s.$$set=k=>{"width"in k&&t(0,r=k.width),"height"in k&&t(1,u=k.height)},s.$$.update=()=>{s.$$.dirty&540&&a&&o&&!a.srcObject&&(t(2,a.srcObject=o,a),a.play().then(()=>{a.readyState>=1&&(d&&!p&&t(9,p=d.getContext("2d")),t(10,m=!0),C(),t(6,v=!1))})),s.$$.dirty&1564&&d&&!p&&(t(9,p=d.getContext("2d")),o&&a&&a.readyState>=1&&!m&&(t(10,m=!0),C(),t(6,v=!1)))},[r,u,a,o,d,b,v,g,y,p,m,D,T,F]}class Qa extends Al{constructor(e){super(),Tl(this,e,Ja,Ya,Il,{width:0,height:1})}}function Ka(s){let e,t,r,u;const a=s[6].default,o=_a(a,s,s[5],null);return{c(){e=i("button"),o&&o.c(),this.h()},l(d){e=c(d,"BUTTON",{class:!0,type:!0});var p=_(e);o&&o.l(p),p.forEach(f),this.h()},h(){n(e,"class",s[1]),e.disabled=s[0],n(e,"type","button")},m(d,p){j(d,e,p),o&&o.m(e,null),t=!0,r||(u=z(e,"click",s[7]),r=!0)},p(d,[p]){o&&o.p&&(!t||p&32)&&ga(o,a,d,d[5],t?Ea(a,d[5],p,null):xa(d[5]),null),(!t||p&2)&&n(e,"class",d[1]),(!t||p&1)&&(e.disabled=d[0])},i(d){t||($e(o,d),t=!0)},o(d){ht(o,d),t=!1},d(d){d&&f(e),o&&o.d(d),r=!1,u()}}}function $a(s,e,t){let r,u,{$$slots:a={},$$scope:o}=e,{variant:d="primary"}=e,{disabled:p=!1}=e,{classList:h=""}=e;function m(b){ar.call(this,s,b)}return s.$$set=b=>{"variant"in b&&t(2,d=b.variant),"disabled"in b&&t(0,p=b.disabled),"classList"in b&&t(3,h=b.classList),"$$scope"in b&&t(5,o=b.$$scope)},s.$$.update=()=>{s.$$.dirty&8&&t(4,r=typeof h=="string"?h:Object.entries(h).filter(([b,v])=>v).map(([b])=>b).join(" ")),s.$$.dirty&20&&t(1,u=`btn-${d} ${r}`.trim())},[p,u,d,h,r,o,a,m]}class eu extends Al{constructor(e){super(),Tl(this,e,$a,Ka,Il,{variant:2,disabled:0,classList:3})}}function Dr(s){let e,t,r,u="âš ï¸",a,o,d;return{c(){e=i("div"),t=i("div"),r=i("span"),r.textContent=u,a=x(),o=i("p"),d=L(s[0]),this.h()},l(p){e=c(p,"DIV",{class:!0});var h=_(e);t=c(h,"DIV",{class:!0});var m=_(t);r=c(m,"SPAN",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1gude3d"&&(r.textContent=u),a=E(m),o=c(m,"P",{class:!0});var b=_(o);d=S(b,s[0]),b.forEach(f),m.forEach(f),h.forEach(f),this.h()},h(){n(r,"class","text-warning text-lg"),n(o,"class","text-sm text-text-primary"),n(t,"class","flex items-center gap-2"),n(e,"class","card-compact mb-6 bg-warning/10 border-warning/30")},m(p,h){j(p,e,h),l(e,t),l(t,r),l(t,a),l(t,o),l(o,d)},p(p,h){h&1&&ne(d,p[0])},d(p){p&&f(e)}}}function tu(s){let e,t=s[1]&&Dr(s);return{c(){t&&t.c(),e=Wl()},l(r){t&&t.l(r),e=Wl()},m(r,u){t&&t.m(r,u),j(r,e,u)},p(r,[u]){r[1]?t?t.p(r,u):(t=Dr(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:pt,o:pt,d(r){r&&f(e),t&&t.d(r)}}}function lu(s,e,t){let r,{message:u=""}=e;return s.$$set=a=>{"message"in a&&t(0,u=a.message)},s.$$.update=()=>{s.$$.dirty&1&&t(1,r=u.length>0)},[u,r]}class su extends Al{constructor(e){super(),Tl(this,e,lu,tu,Il,{message:0})}}function kr(s){let e,t,r,u,a,o,d,p="ğŸ’¡ åœ¨å›¾åƒä¸Šç»˜åˆ¶çº¢è‰²åŒºåŸŸæ ‡è®°éœ€è¦é‡ç»˜çš„éƒ¨åˆ†",h,m,b,v,g,C,y,D,T,F,k,I,N="æ¸…é™¤",V,w,P,B,U,H,A,M,R,q,W,Z,K=(s[4]*100).toFixed(0)+"",G,X,pe,Y,Q,le,re,ae="Prompt",we,J,Ie,be,Se,ze="Negative Prompt",et,Pe,Oe,We,Ae,Re="å‚æ•°é…ç½®",Xe,at,me,ke,qe="é‡ç»˜å¼ºåº¦",de,Qe,Me=s[8].toFixed(2)+"",Ee,Ke,ce,Ue,Fe,oe="å€¼è¶Šé«˜ï¼Œé‡ç»˜åŒºåŸŸå˜åŒ–è¶Šå¤§",_e,ie,$,fe,he="å¼•å¯¼å¼ºåº¦",Be,Ge,lt=s[9].toFixed(1)+"",it,He,je,Ze,ve,ye,Ne,mt="ç”Ÿæˆæ­¥æ•°",st,rt,vt,yt,ut,ct,ft,ge,xe,Te,ue;function se(te,De){return te[11]?nu:ru}let Le=se(s),ee=Le(s);return{c(){e=i("div"),t=i("div"),r=i("canvas"),u=x(),a=i("canvas"),o=x(),d=i("p"),d.textContent=p,h=x(),m=i("div"),b=i("div"),v=i("button"),g=L("ğŸ–Œï¸ ç”»ç¬”"),y=x(),D=i("button"),T=L("ğŸ§¹ æ©¡çš®æ“¦"),k=x(),I=i("button"),I.textContent=N,V=x(),w=i("div"),P=i("label"),B=L("ç”»ç¬”å¤§å°: "),U=L(s[3]),H=L("px"),A=x(),M=i("input"),R=x(),q=i("div"),W=i("label"),Z=L("ç”»ç¬”ç¡¬åº¦: "),G=L(K),X=L("%"),pe=x(),Y=i("input"),Q=x(),le=i("div"),re=i("label"),re.textContent=ae,we=x(),J=i("textarea"),Ie=x(),be=i("div"),Se=i("label"),Se.textContent=ze,et=x(),Pe=i("textarea"),Oe=x(),We=i("div"),Ae=i("h4"),Ae.textContent=Re,Xe=x(),at=i("div"),me=i("div"),ke=i("label"),ke.textContent=qe,de=x(),Qe=i("span"),Ee=L(Me),Ke=x(),ce=i("input"),Ue=x(),Fe=i("p"),Fe.textContent=oe,_e=x(),ie=i("div"),$=i("div"),fe=i("label"),fe.textContent=he,Be=x(),Ge=i("span"),it=L(lt),He=x(),je=i("input"),Ze=x(),ve=i("div"),ye=i("div"),Ne=i("label"),Ne.textContent=mt,st=x(),rt=i("span"),vt=L(s[10]),yt=x(),ut=i("input"),ct=x(),ft=i("div"),ge=i("button"),ee.c(),this.h()},l(te){e=c(te,"DIV",{class:!0});var De=_(e);t=c(De,"DIV",{class:!0});var dt=_(t);r=c(dt,"CANVAS",{class:!0,style:!0}),_(r).forEach(f),u=E(dt),a=c(dt,"CANVAS",{class:!0,style:!0}),_(a).forEach(f),dt.forEach(f),o=E(De),d=c(De,"P",{class:!0,"data-svelte-h":!0}),O(d)!=="svelte-11y7tqv"&&(d.textContent=p),De.forEach(f),h=E(te),m=c(te,"DIV",{class:!0});var xt=_(m);b=c(xt,"DIV",{class:!0});var bt=_(b);v=c(bt,"BUTTON",{class:!0});var kt=_(v);g=S(kt,"ğŸ–Œï¸ ç”»ç¬”"),kt.forEach(f),y=E(bt),D=c(bt,"BUTTON",{class:!0});var Tt=_(D);T=S(Tt,"ğŸ§¹ æ©¡çš®æ“¦"),Tt.forEach(f),k=E(bt),I=c(bt,"BUTTON",{class:!0,"data-svelte-h":!0}),O(I)!=="svelte-1iqm2bj"&&(I.textContent=N),bt.forEach(f),V=E(xt),w=c(xt,"DIV",{class:!0});var Xt=_(w);P=c(Xt,"LABEL",{for:!0,class:!0});var Nt=_(P);B=S(Nt,"ç”»ç¬”å¤§å°: "),U=S(Nt,s[3]),H=S(Nt,"px"),Nt.forEach(f),A=E(Xt),M=c(Xt,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Xt.forEach(f),R=E(xt),q=c(xt,"DIV",{class:!0});var Ft=_(q);W=c(Ft,"LABEL",{for:!0,class:!0});var qt=_(W);Z=S(qt,"ç”»ç¬”ç¡¬åº¦: "),G=S(qt,K),X=S(qt,"%"),qt.forEach(f),pe=E(Ft),Y=c(Ft,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Ft.forEach(f),xt.forEach(f),Q=E(te),le=c(te,"DIV",{class:!0});var Zt=_(le);re=c(Zt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(re)!=="svelte-o7uiuu"&&(re.textContent=ae),we=E(Zt),J=c(Zt,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),_(J).forEach(f),Zt.forEach(f),Ie=E(te),be=c(te,"DIV",{class:!0});var It=_(be);Se=c(It,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(Se)!=="svelte-t87bqf"&&(Se.textContent=ze),et=E(It),Pe=c(It,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),_(Pe).forEach(f),It.forEach(f),Oe=E(te),We=c(te,"DIV",{class:!0});var Et=_(We);Ae=c(Et,"H4",{class:!0,"data-svelte-h":!0}),O(Ae)!=="svelte-t1m86p"&&(Ae.textContent=Re),Xe=E(Et),at=c(Et,"DIV",{class:!0});var Yt=_(at);me=c(Yt,"DIV",{class:!0});var Ut=_(me);ke=c(Ut,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(ke)!=="svelte-j1o7ru"&&(ke.textContent=qe),de=E(Ut),Qe=c(Ut,"SPAN",{class:!0});var Qt=_(Qe);Ee=S(Qt,Me),Qt.forEach(f),Ut.forEach(f),Ke=E(Yt),ce=c(Yt,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Ue=E(Yt),Fe=c(Yt,"P",{class:!0,"data-svelte-h":!0}),O(Fe)!=="svelte-ubq6g3"&&(Fe.textContent=oe),Yt.forEach(f),_e=E(Et),ie=c(Et,"DIV",{class:!0});var ml=_(ie);$=c(ml,"DIV",{class:!0});var Dt=_($);fe=c(Dt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(fe)!=="svelte-182jkhp"&&(fe.textContent=he),Be=E(Dt),Ge=c(Dt,"SPAN",{class:!0});var dl=_(Ge);it=S(dl,lt),dl.forEach(f),Dt.forEach(f),He=E(ml),je=c(ml,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),ml.forEach(f),Ze=E(Et),ve=c(Et,"DIV",{class:!0});var At=_(ve);ye=c(At,"DIV",{class:!0});var Bt=_(ye);Ne=c(Bt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(Ne)!=="svelte-12ps51r"&&(Ne.textContent=mt),st=E(Bt),rt=c(Bt,"SPAN",{class:!0});var Lt=_(rt);vt=S(Lt,s[10]),Lt.forEach(f),Bt.forEach(f),yt=E(At),ut=c(At,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),At.forEach(f),Et.forEach(f),ct=E(te),ft=c(te,"DIV",{class:!0});var Bl=_(ft);ge=c(Bl,"BUTTON",{class:!0});var el=_(ge);ee.l(el),el.forEach(f),Bl.forEach(f),this.h()},h(){n(r,"class","absolute inset-0 w-full h-full svelte-iyeoxk"),zt(r,"pointer-events","none"),n(a,"class","relative w-full h-full cursor-crosshair svelte-iyeoxk"),zt(a,"mix-blend-mode","multiply"),zt(a,"background-color","rgba(255, 0, 0, 0.3)"),n(t,"class","relative border border-border rounded-lg overflow-hidden bg-surface-elevated"),n(d,"class","text-xs text-text-secondary"),n(e,"class","space-y-3"),n(v,"class",C="flex-1 px-3 py-2 rounded-lg font-medium transition-colors "+(s[5]==="brush"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary")),n(D,"class",F="flex-1 px-3 py-2 rounded-lg font-medium transition-colors "+(s[5]==="eraser"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary")),n(I,"class","px-3 py-2 bg-danger/10 hover:bg-danger/20 text-danger rounded-lg font-medium transition-colors"),n(b,"class","flex gap-2"),n(P,"for","brush-size"),n(P,"class","block text-sm font-medium text-text-primary"),n(M,"id","brush-size"),n(M,"type","range"),n(M,"min","5"),n(M,"max","100"),n(M,"step","5"),n(M,"class","w-full"),n(w,"class","space-y-2"),n(W,"for","brush-hardness"),n(W,"class","block text-sm font-medium text-text-primary"),n(Y,"id","brush-hardness"),n(Y,"type","range"),n(Y,"min","0.1"),n(Y,"max","1.0"),n(Y,"step","0.1"),n(Y,"class","w-full"),n(q,"class","space-y-2"),n(m,"class","space-y-3 p-4 bg-surface-elevated border border-border rounded-lg"),n(re,"for","prompt-input"),n(re,"class","block text-sm font-medium text-text-primary"),n(J,"id","prompt-input"),n(J,"rows","3"),n(J,"class","w-full px-3 py-2 bg-surface-elevated border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary resize-none"),n(J,"placeholder","æè¿°ä½ æƒ³è¦åœ¨è’™ç‰ˆåŒºåŸŸç”Ÿæˆçš„å†…å®¹..."),n(le,"class","space-y-2"),n(Se,"for","negative-prompt-input"),n(Se,"class","block text-sm font-medium text-text-primary"),n(Pe,"id","negative-prompt-input"),n(Pe,"rows","2"),n(Pe,"class","w-full px-3 py-2 bg-surface-elevated border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary resize-none"),n(Pe,"placeholder","æè¿°ä½ ä¸æƒ³è¦çš„å†…å®¹..."),n(be,"class","space-y-2"),n(Ae,"class","text-sm font-semibold text-text-primary"),n(ke,"for","strength-slider"),n(ke,"class","text-sm font-medium text-text-primary"),n(Qe,"class","text-sm text-text-secondary"),n(me,"class","flex justify-between items-center"),n(ce,"id","strength-slider"),n(ce,"type","range"),n(ce,"min","0.0"),n(ce,"max","1.0"),n(ce,"step","0.05"),n(ce,"class","w-full"),n(Fe,"class","text-xs text-text-secondary"),n(at,"class","space-y-2"),n(fe,"for","guidance-slider"),n(fe,"class","text-sm font-medium text-text-primary"),n(Ge,"class","text-sm text-text-secondary"),n($,"class","flex justify-between items-center"),n(je,"id","guidance-slider"),n(je,"type","range"),n(je,"min","1.0"),n(je,"max","20.0"),n(je,"step","0.5"),n(je,"class","w-full"),n(ie,"class","space-y-2"),n(Ne,"for","steps-slider"),n(Ne,"class","text-sm font-medium text-text-primary"),n(rt,"class","text-sm text-text-secondary"),n(ye,"class","flex justify-between items-center"),n(ut,"id","steps-slider"),n(ut,"type","range"),n(ut,"min","10"),n(ut,"max","50"),n(ut,"step","5"),n(ut,"class","w-full"),n(ve,"class","space-y-2"),n(We,"class","space-y-3 p-4 bg-surface-elevated border border-border rounded-lg"),ge.disabled=xe=s[11]||!s[6].trim(),n(ge,"class","flex-1 px-4 py-3 bg-success hover:bg-success/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(ft,"class","flex gap-3")},m(te,De){j(te,e,De),l(e,t),l(t,r),s[25](r),l(t,u),l(t,a),s[26](a),l(e,o),l(e,d),j(te,h,De),j(te,m,De),l(m,b),l(b,v),l(v,g),l(b,y),l(b,D),l(D,T),l(b,k),l(b,I),l(m,V),l(m,w),l(w,P),l(P,B),l(P,U),l(P,H),l(w,A),l(w,M),Ve(M,s[3]),l(m,R),l(m,q),l(q,W),l(W,Z),l(W,G),l(W,X),l(q,pe),l(q,Y),Ve(Y,s[4]),j(te,Q,De),j(te,le,De),l(le,re),l(le,we),l(le,J),Ve(J,s[6]),j(te,Ie,De),j(te,be,De),l(be,Se),l(be,et),l(be,Pe),Ve(Pe,s[7]),j(te,Oe,De),j(te,We,De),l(We,Ae),l(We,Xe),l(We,at),l(at,me),l(me,ke),l(me,de),l(me,Qe),l(Qe,Ee),l(at,Ke),l(at,ce),Ve(ce,s[8]),l(at,Ue),l(at,Fe),l(We,_e),l(We,ie),l(ie,$),l($,fe),l($,Be),l($,Ge),l(Ge,it),l(ie,He),l(ie,je),Ve(je,s[9]),l(We,Ze),l(We,ve),l(ve,ye),l(ye,Ne),l(ye,st),l(ye,rt),l(rt,vt),l(ve,yt),l(ve,ut),Ve(ut,s[10]),j(te,ct,De),j(te,ft,De),l(ft,ge),ee.m(ge,null),Te||(ue=[z(a,"mousedown",s[16]),z(a,"mousemove",s[18]),z(a,"mouseup",s[17]),z(a,"mouseleave",s[17]),z(v,"click",s[27]),z(D,"click",s[28]),z(I,"click",s[19]),z(M,"change",s[29]),z(M,"input",s[29]),z(Y,"change",s[30]),z(Y,"input",s[30]),z(J,"input",s[31]),z(Pe,"input",s[32]),z(ce,"change",s[33]),z(ce,"input",s[33]),z(je,"change",s[34]),z(je,"input",s[34]),z(ut,"change",s[35]),z(ut,"input",s[35]),z(ge,"click",s[20])],Te=!0)},p(te,De){De[0]&32&&C!==(C="flex-1 px-3 py-2 rounded-lg font-medium transition-colors "+(te[5]==="brush"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary"))&&n(v,"class",C),De[0]&32&&F!==(F="flex-1 px-3 py-2 rounded-lg font-medium transition-colors "+(te[5]==="eraser"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary"))&&n(D,"class",F),De[0]&8&&ne(U,te[3]),De[0]&8&&Ve(M,te[3]),De[0]&16&&K!==(K=(te[4]*100).toFixed(0)+"")&&ne(G,K),De[0]&16&&Ve(Y,te[4]),De[0]&64&&Ve(J,te[6]),De[0]&128&&Ve(Pe,te[7]),De[0]&256&&Me!==(Me=te[8].toFixed(2)+"")&&ne(Ee,Me),De[0]&256&&Ve(ce,te[8]),De[0]&512&&lt!==(lt=te[9].toFixed(1)+"")&&ne(it,lt),De[0]&512&&Ve(je,te[9]),De[0]&1024&&ne(vt,te[10]),De[0]&1024&&Ve(ut,te[10]),Le!==(Le=se(te))&&(ee.d(1),ee=Le(te),ee&&(ee.c(),ee.m(ge,null))),De[0]&2112&&xe!==(xe=te[11]||!te[6].trim())&&(ge.disabled=xe)},d(te){te&&(f(e),f(h),f(m),f(Q),f(le),f(Ie),f(be),f(Oe),f(We),f(ct),f(ft)),s[25](null),s[26](null),ee.d(),Te=!1,Rt(ue)}}}function ru(s){let e;return{c(){e=L("å¼€å§‹é‡ç»˜")},l(t){e=S(t,"å¼€å§‹é‡ç»˜")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function nu(s){let e,t=`<div class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></div>
            ç”Ÿæˆä¸­...`;return{c(){e=i("span"),e.innerHTML=t,this.h()},l(r){e=c(r,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1ke97ui"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center justify-center gap-2")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Fr(s){let e,t,r,u="âœ¨ ç”Ÿæˆç»“æœ",a,o,d="ä¸‹è½½",p,h,m,b,v;return{c(){e=i("div"),t=i("div"),r=i("h4"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),h=i("img"),this.h()},l(g){e=c(g,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var y=_(t);r=c(y,"H4",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-12xd89o"&&(r.textContent=u),a=E(y),o=c(y,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-zfo8qh"&&(o.textContent=d),y.forEach(f),p=E(C),h=c(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(f),this.h()},h(){n(r,"class","text-sm font-semibold text-text-primary"),n(o,"class","px-3 py-1 text-sm bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors"),n(t,"class","flex items-center justify-between"),Jt(h.src,m=s[12])||n(h,"src",m),n(h,"alt","Inpaintingç»“æœ"),n(h,"class","w-full h-auto rounded-lg border border-border"),n(e,"class","space-y-3 p-4 bg-surface-elevated border border-success/30 rounded-lg")},m(g,C){j(g,e,C),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),l(e,h),b||(v=z(o,"click",s[21]),b=!0)},p(g,C){C[0]&4096&&!Jt(h.src,m=g[12])&&n(h,"src",m)},d(g){g&&f(e),b=!1,v()}}}function au(s){let e,t,r,u="ğŸ¨ å±€éƒ¨é‡ç»˜ (Inpainting)",a,o,d="é‡ç½®",p,h,m,b="æºå›¾åƒ",v,g,C,y,D=s[0]?"æ›´æ¢å›¾åƒ":"é€‰æ‹©å›¾åƒ",T,F,k,I,N,V=s[0]&&kr(s),w=s[13]&&s[12]&&Fr(s);return{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),h=i("div"),m=i("label"),m.textContent=b,v=x(),g=i("input"),C=x(),y=i("button"),T=L(D),F=x(),V&&V.c(),k=x(),w&&w.c(),this.h()},l(P){e=c(P,"DIV",{class:!0});var B=_(e);t=c(B,"DIV",{class:!0});var U=_(t);r=c(U,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1cbcbjm"&&(r.textContent=u),a=E(U),o=c(U,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-1qqk7vf"&&(o.textContent=d),U.forEach(f),p=E(B),h=c(B,"DIV",{class:!0});var H=_(h);m=c(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(m)!=="svelte-1xe4kp5"&&(m.textContent=b),v=E(H),g=c(H,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),C=E(H),y=c(H,"BUTTON",{class:!0});var A=_(y);T=S(A,D),A.forEach(f),H.forEach(f),F=E(B),V&&V.l(B),k=E(B),w&&w.l(B),B.forEach(f),this.h()},h(){n(r,"class","text-lg font-semibold text-text-primary"),n(o,"class","px-3 py-1 text-sm bg-surface-elevated hover:bg-surface-elevated/80 border border-border rounded-lg text-text-secondary transition-colors"),n(t,"class","flex items-center justify-between mb-4"),n(m,"for","image-upload"),n(m,"class","block text-sm font-medium text-text-primary"),n(g,"id","image-upload"),n(g,"type","file"),n(g,"accept","image/*"),n(g,"class","hidden"),n(y,"class","w-full px-4 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors font-medium"),n(h,"class","space-y-2"),n(e,"class","space-y-4")},m(P,B){j(P,e,B),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),l(e,h),l(h,m),l(h,v),l(h,g),s[23](g),l(h,C),l(h,y),l(y,T),l(e,F),V&&V.m(e,null),l(e,k),w&&w.m(e,null),I||(N=[z(o,"click",s[22]),z(g,"change",s[15]),z(y,"click",s[24])],I=!0)},p(P,B){B[0]&1&&D!==(D=P[0]?"æ›´æ¢å›¾åƒ":"é€‰æ‹©å›¾åƒ")&&ne(T,D),P[0]?V?V.p(P,B):(V=kr(P),V.c(),V.m(e,k)):V&&(V.d(1),V=null),P[13]&&P[12]?w?w.p(P,B):(w=Fr(P),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i:pt,o:pt,d(P){P&&f(e),s[23](null),V&&V.d(),w&&w.d(),I=!1,Rt(N)}}}function uu(s,e,t){let r="",u,a,o=null,d=null,p=30,h=.8,m=!1,b="brush",v="",g="",C=.6,y=7.5,D=20,T=!1,F="",k=!1,I;is(()=>{u&&a&&(o=u.getContext("2d"),d=a.getContext("2d"),d&&(d.fillStyle="rgba(0, 0, 0, 0)",d.fillRect(0,0,a.width,a.height)))});function N(J){var ze;const be=(ze=J.target.files)==null?void 0:ze[0];if(!be)return;if(!be.type.startsWith("image/")){_t({type:gt.VALIDATION,message:"è¯·é€‰æ‹©å›¾åƒæ–‡ä»¶",details:"åªæ”¯æŒå›¾åƒæ ¼å¼ï¼ˆPNG, JPG, WebPç­‰ï¼‰",recoverable:!0,suggestions:["é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆçš„å›¾åƒæ–‡ä»¶"]});return}const Se=new FileReader;Se.onload=et=>{var Oe;const Pe=(Oe=et.target)==null?void 0:Oe.result;t(0,r=Pe),V(Pe),nl()},Se.onerror=()=>{_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•è¯»å–é€‰æ‹©çš„æ–‡ä»¶",recoverable:!0,suggestions:["å°è¯•é€‰æ‹©å…¶ä»–å›¾åƒæ–‡ä»¶"]})},Se.readAsDataURL(be)}function V(J){const Ie=new Image;Ie.onload=()=>{let ze=Ie.width,et=Ie.height;if(ze>512||et>512){const Pe=Math.min(512/ze,512/et);ze=ze*Pe,et=et*Pe}t(1,u.width=ze,u),t(1,u.height=et,u),t(2,a.width=ze,a),t(2,a.height=et,a),o&&o.drawImage(Ie,0,0,ze,et),U()},Ie.onerror=()=>{_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•åŠ è½½å›¾åƒåˆ°ç”»å¸ƒ",recoverable:!0})},Ie.src=J}function w(J){m=!0,B(J)}function P(){m=!1}function B(J){if(!m||!d)return;const Ie=a.getBoundingClientRect(),be=J.clientX-Ie.left,Se=J.clientY-Ie.top;if(d.beginPath(),d.arc(be,Se,p/2,0,Math.PI*2),b==="brush"){const ze=d.createRadialGradient(be,Se,0,be,Se,p/2);ze.addColorStop(0,`rgba(255, 255, 255, ${h})`),ze.addColorStop(1,"rgba(255, 255, 255, 0)"),d.fillStyle=ze}else d.globalCompositeOperation="destination-out",d.fillStyle="rgba(255, 255, 255, 1)";d.fill(),b==="eraser"&&(d.globalCompositeOperation="source-over")}function U(){d&&(d.clearRect(0,0,a.width,a.height),d.fillStyle="rgba(0, 0, 0, 0)",d.fillRect(0,0,a.width,a.height))}function H(){return a.toDataURL("image/png")}async function A(){if(!r){_t({type:gt.VALIDATION,message:"è¯·å…ˆä¸Šä¼ å›¾åƒ",recoverable:!0,suggestions:['ç‚¹å‡»"é€‰æ‹©å›¾åƒ"æŒ‰é’®ä¸Šä¼ å›¾åƒ']});return}if(!v.trim()){_t({type:gt.VALIDATION,message:"è¯·è¾“å…¥Prompt",recoverable:!0,suggestions:["åœ¨Promptè¾“å…¥æ¡†ä¸­æè¿°ä½ æƒ³è¦ç”Ÿæˆçš„å†…å®¹"]});return}t(11,T=!0),nl();try{const J=H(),Ie=await fetch("/api/inpaint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:r,mask:J,prompt:v,negative_prompt:g,strength:C,guidance_scale:y,num_inference_steps:D})});if(!Ie.ok)throw new Error(`HTTPé”™è¯¯: ${Ie.status}`);const be=await Ie.json();be.success?(t(12,F=be.image),t(13,k=!0)):_t({type:gt.GENERATION,message:"Inpaintingå¤±è´¥",details:be.message||"æœªçŸ¥é”™è¯¯",recoverable:!0,suggestions:["æ£€æŸ¥Promptæ˜¯å¦åˆé€‚","å°è¯•è°ƒæ•´å‚æ•°","ç¡®ä¿è’™ç‰ˆåŒºåŸŸæ­£ç¡®"]})}catch(J){_t({type:gt.API,message:"Inpaintingè¯·æ±‚å¤±è´¥",details:J instanceof Error?J.message:String(J),recoverable:!0,suggestions:["æ£€æŸ¥ç½‘ç»œè¿æ¥","ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ","æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°è·å–æ›´å¤šä¿¡æ¯"]}),console.error("Inpaintingå¤±è´¥:",J)}finally{t(11,T=!1)}}function M(){if(!F)return;const J=document.createElement("a");J.href=F,J.download=`inpaint_result_${Date.now()}.png`,J.click()}function R(){t(0,r=""),t(12,F=""),t(13,k=!1),t(6,v=""),t(7,g=""),U(),nl()}function q(J){ul[J?"unshift":"push"](()=>{I=J,t(14,I)})}const W=()=>I.click();function Z(J){ul[J?"unshift":"push"](()=>{u=J,t(1,u)})}function K(J){ul[J?"unshift":"push"](()=>{a=J,t(2,a)})}const G=()=>t(5,b="brush"),X=()=>t(5,b="eraser");function pe(){p=Ht(this.value),t(3,p)}function Y(){h=Ht(this.value),t(4,h)}function Q(){v=this.value,t(6,v)}function le(){g=this.value,t(7,g)}function re(){C=Ht(this.value),t(8,C)}function ae(){y=Ht(this.value),t(9,y)}function we(){D=Ht(this.value),t(10,D)}return[r,u,a,p,h,b,v,g,C,y,D,T,F,k,I,N,w,P,B,U,A,M,R,q,W,Z,K,G,X,pe,Y,Q,le,re,ae,we]}class ou extends Al{constructor(e){super(),Tl(this,e,uu,au,Il,{},null,[-1,-1])}}function Ir(s){let e,t,r,u,a,o="ğŸ’¡ è“è‰²è™šçº¿åŒºåŸŸè¡¨ç¤ºå°†è¦æ‰©å±•çš„éƒ¨åˆ†",d,p,h,m="æ‰©å±•æ–¹å‘",b,v,g,C,y,D,T,F,k,I,N,V,w,P,B,U,H,A,M,R,q,W,Z,K,G,X="æ‰©å±•å°ºå¯¸",pe,Y,Q,le,re,ae,we,J,Ie="å»ºè®®ä½¿ç”¨64çš„å€æ•°ä»¥è·å¾—æ›´å¥½çš„æ•ˆæœ",be,Se,ze,et="Prompt",Pe,Oe,We,Ae,Re,Xe="Negative Prompt",at,me,ke,qe,de,Qe="å‚æ•°é…ç½®",Me,Ee,Ke,ce,Ue="å¼•å¯¼å¼ºåº¦",Fe,oe,_e=s[6].toFixed(1)+"",ie,$,fe,he,Be,Ge,lt,it="ç”Ÿæˆæ­¥æ•°",He,je,Ze,ve,ye,Ne,mt,st,rt,vt,yt;function ut(ge,xe){return ge[8]?cu:iu}let ct=ut(s),ft=ct(s);return{c(){e=i("div"),t=i("div"),r=i("canvas"),u=x(),a=i("p"),a.textContent=o,d=x(),p=i("div"),h=i("label"),h.textContent=m,b=x(),v=i("div"),g=i("button"),C=L("â† å·¦"),D=x(),T=i("button"),F=L("å³ â†’"),I=x(),N=i("button"),V=L("â†‘ ä¸Š"),P=x(),B=i("button"),U=L("ä¸‹ â†“"),A=x(),M=i("button"),R=L("âŠ• å…¨éƒ¨"),W=x(),Z=i("div"),K=i("div"),G=i("label"),G.textContent=X,pe=x(),Y=i("span"),Q=L(s[1]),le=L("px"),re=x(),ae=i("input"),we=x(),J=i("p"),J.textContent=Ie,be=x(),Se=i("div"),ze=i("label"),ze.textContent=et,Pe=x(),Oe=i("textarea"),We=x(),Ae=i("div"),Re=i("label"),Re.textContent=Xe,at=x(),me=i("textarea"),ke=x(),qe=i("div"),de=i("h4"),de.textContent=Qe,Me=x(),Ee=i("div"),Ke=i("div"),ce=i("label"),ce.textContent=Ue,Fe=x(),oe=i("span"),ie=L(_e),$=x(),fe=i("input"),he=x(),Be=i("div"),Ge=i("div"),lt=i("label"),lt.textContent=it,He=x(),je=i("span"),Ze=L(s[7]),ve=x(),ye=i("input"),Ne=x(),mt=i("div"),st=i("button"),ft.c(),this.h()},l(ge){e=c(ge,"DIV",{class:!0});var xe=_(e);t=c(xe,"DIV",{class:!0});var Te=_(t);r=c(Te,"CANVAS",{class:!0,style:!0}),_(r).forEach(f),Te.forEach(f),u=E(xe),a=c(xe,"P",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-11uyed4"&&(a.textContent=o),xe.forEach(f),d=E(ge),p=c(ge,"DIV",{class:!0});var ue=_(p);h=c(ue,"LABEL",{class:!0,"data-svelte-h":!0}),O(h)!=="svelte-1208wtv"&&(h.textContent=m),b=E(ue),v=c(ue,"DIV",{class:!0});var se=_(v);g=c(se,"BUTTON",{class:!0,title:!0});var Le=_(g);C=S(Le,"â† å·¦"),Le.forEach(f),D=E(se),T=c(se,"BUTTON",{class:!0,title:!0});var ee=_(T);F=S(ee,"å³ â†’"),ee.forEach(f),I=E(se),N=c(se,"BUTTON",{class:!0,title:!0});var te=_(N);V=S(te,"â†‘ ä¸Š"),te.forEach(f),P=E(se),B=c(se,"BUTTON",{class:!0,title:!0});var De=_(B);U=S(De,"ä¸‹ â†“"),De.forEach(f),A=E(se),M=c(se,"BUTTON",{class:!0,title:!0});var dt=_(M);R=S(dt,"âŠ• å…¨éƒ¨"),dt.forEach(f),se.forEach(f),ue.forEach(f),W=E(ge),Z=c(ge,"DIV",{class:!0});var xt=_(Z);K=c(xt,"DIV",{class:!0});var bt=_(K);G=c(bt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(G)!=="svelte-1o4lkdp"&&(G.textContent=X),pe=E(bt),Y=c(bt,"SPAN",{class:!0});var kt=_(Y);Q=S(kt,s[1]),le=S(kt,"px"),kt.forEach(f),bt.forEach(f),re=E(xt),ae=c(xt,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),we=E(xt),J=c(xt,"P",{class:!0,"data-svelte-h":!0}),O(J)!=="svelte-12f4qnu"&&(J.textContent=Ie),xt.forEach(f),be=E(ge),Se=c(ge,"DIV",{class:!0});var Tt=_(Se);ze=c(Tt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(ze)!=="svelte-1roz7kr"&&(ze.textContent=et),Pe=E(Tt),Oe=c(Tt,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),_(Oe).forEach(f),Tt.forEach(f),We=E(ge),Ae=c(ge,"DIV",{class:!0});var Xt=_(Ae);Re=c(Xt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(Re)!=="svelte-1myakxo"&&(Re.textContent=Xe),at=E(Xt),me=c(Xt,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),_(me).forEach(f),Xt.forEach(f),ke=E(ge),qe=c(ge,"DIV",{class:!0});var Nt=_(qe);de=c(Nt,"H4",{class:!0,"data-svelte-h":!0}),O(de)!=="svelte-t1m86p"&&(de.textContent=Qe),Me=E(Nt),Ee=c(Nt,"DIV",{class:!0});var Ft=_(Ee);Ke=c(Ft,"DIV",{class:!0});var qt=_(Ke);ce=c(qt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(ce)!=="svelte-skliwe"&&(ce.textContent=Ue),Fe=E(qt),oe=c(qt,"SPAN",{class:!0});var Zt=_(oe);ie=S(Zt,_e),Zt.forEach(f),qt.forEach(f),$=E(Ft),fe=c(Ft,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Ft.forEach(f),he=E(Nt),Be=c(Nt,"DIV",{class:!0});var It=_(Be);Ge=c(It,"DIV",{class:!0});var Et=_(Ge);lt=c(Et,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(lt)!=="svelte-12gepmc"&&(lt.textContent=it),He=E(Et),je=c(Et,"SPAN",{class:!0});var Yt=_(je);Ze=S(Yt,s[7]),Yt.forEach(f),Et.forEach(f),ve=E(It),ye=c(It,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),It.forEach(f),Nt.forEach(f),Ne=E(ge),mt=c(ge,"DIV",{class:!0});var Ut=_(mt);st=c(Ut,"BUTTON",{class:!0});var Qt=_(st);ft.l(Qt),Qt.forEach(f),Ut.forEach(f),this.h()},h(){n(r,"class","w-full h-auto mx-auto svelte-iyeoxk"),zt(r,"max-width","100%"),zt(r,"image-rendering","pixelated"),n(t,"class","border border-border rounded-lg overflow-hidden bg-surface-elevated p-4"),n(a,"class","text-xs text-text-secondary"),n(e,"class","space-y-3"),n(h,"class","block text-sm font-medium text-text-primary"),n(g,"class",y="px-3 py-2 rounded-lg font-medium transition-colors "+(s[0]==="left"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary")),n(g,"title","å‘å·¦æ‰©å±•"),n(T,"class",k="px-3 py-2 rounded-lg font-medium transition-colors "+(s[0]==="right"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary")),n(T,"title","å‘å³æ‰©å±•"),n(N,"class",w="px-3 py-2 rounded-lg font-medium transition-colors "+(s[0]==="top"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary")),n(N,"title","å‘ä¸Šæ‰©å±•"),n(B,"class",H="px-3 py-2 rounded-lg font-medium transition-colors "+(s[0]==="bottom"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary")),n(B,"title","å‘ä¸‹æ‰©å±•"),n(M,"class",q="px-3 py-2 rounded-lg font-medium transition-colors "+(s[0]==="all"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary")),n(M,"title","å…¨æ–¹å‘æ‰©å±•"),n(v,"class","grid grid-cols-5 gap-2"),n(p,"class","space-y-3 p-4 bg-surface-elevated border border-border rounded-lg"),n(G,"for","pixels-slider"),n(G,"class","text-sm font-medium text-text-primary"),n(Y,"class","text-sm text-text-secondary"),n(K,"class","flex justify-between items-center"),n(ae,"id","pixels-slider"),n(ae,"type","range"),n(ae,"min","64"),n(ae,"max","512"),n(ae,"step","64"),n(ae,"class","w-full"),n(J,"class","text-xs text-text-secondary"),n(Z,"class","space-y-2"),n(ze,"for","outpaint-prompt-input"),n(ze,"class","block text-sm font-medium text-text-primary"),n(Oe,"id","outpaint-prompt-input"),n(Oe,"rows","3"),n(Oe,"class","w-full px-3 py-2 bg-surface-elevated border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary resize-none"),n(Oe,"placeholder","æè¿°ä½ æƒ³è¦åœ¨æ‰©å±•åŒºåŸŸç”Ÿæˆçš„å†…å®¹..."),n(Se,"class","space-y-2"),n(Re,"for","outpaint-negative-prompt-input"),n(Re,"class","block text-sm font-medium text-text-primary"),n(me,"id","outpaint-negative-prompt-input"),n(me,"rows","2"),n(me,"class","w-full px-3 py-2 bg-surface-elevated border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary resize-none"),n(me,"placeholder","æè¿°ä½ ä¸æƒ³è¦çš„å†…å®¹..."),n(Ae,"class","space-y-2"),n(de,"class","text-sm font-semibold text-text-primary"),n(ce,"for","outpaint-guidance-slider"),n(ce,"class","text-sm font-medium text-text-primary"),n(oe,"class","text-sm text-text-secondary"),n(Ke,"class","flex justify-between items-center"),n(fe,"id","outpaint-guidance-slider"),n(fe,"type","range"),n(fe,"min","1.0"),n(fe,"max","20.0"),n(fe,"step","0.5"),n(fe,"class","w-full"),n(Ee,"class","space-y-2"),n(lt,"for","outpaint-steps-slider"),n(lt,"class","text-sm font-medium text-text-primary"),n(je,"class","text-sm text-text-secondary"),n(Ge,"class","flex justify-between items-center"),n(ye,"id","outpaint-steps-slider"),n(ye,"type","range"),n(ye,"min","10"),n(ye,"max","50"),n(ye,"step","5"),n(ye,"class","w-full"),n(Be,"class","space-y-2"),n(qe,"class","space-y-3 p-4 bg-surface-elevated border border-border rounded-lg"),st.disabled=rt=s[8]||!s[4].trim(),n(st,"class","flex-1 px-4 py-3 bg-success hover:bg-success/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(mt,"class","flex gap-3")},m(ge,xe){j(ge,e,xe),l(e,t),l(t,r),s[19](r),l(e,u),l(e,a),j(ge,d,xe),j(ge,p,xe),l(p,h),l(p,b),l(p,v),l(v,g),l(g,C),l(v,D),l(v,T),l(T,F),l(v,I),l(v,N),l(N,V),l(v,P),l(v,B),l(B,U),l(v,A),l(v,M),l(M,R),j(ge,W,xe),j(ge,Z,xe),l(Z,K),l(K,G),l(K,pe),l(K,Y),l(Y,Q),l(Y,le),l(Z,re),l(Z,ae),Ve(ae,s[1]),l(Z,we),l(Z,J),j(ge,be,xe),j(ge,Se,xe),l(Se,ze),l(Se,Pe),l(Se,Oe),Ve(Oe,s[4]),j(ge,We,xe),j(ge,Ae,xe),l(Ae,Re),l(Ae,at),l(Ae,me),Ve(me,s[5]),j(ge,ke,xe),j(ge,qe,xe),l(qe,de),l(qe,Me),l(qe,Ee),l(Ee,Ke),l(Ke,ce),l(Ke,Fe),l(Ke,oe),l(oe,ie),l(Ee,$),l(Ee,fe),Ve(fe,s[6]),l(qe,he),l(qe,Be),l(Be,Ge),l(Ge,lt),l(Ge,He),l(Ge,je),l(je,Ze),l(Be,ve),l(Be,ye),Ve(ye,s[7]),j(ge,Ne,xe),j(ge,mt,xe),l(mt,st),ft.m(st,null),vt||(yt=[z(g,"click",s[20]),z(T,"click",s[21]),z(N,"click",s[22]),z(B,"click",s[23]),z(M,"click",s[24]),z(ae,"change",s[25]),z(ae,"input",s[25]),z(Oe,"input",s[26]),z(me,"input",s[27]),z(fe,"change",s[28]),z(fe,"input",s[28]),z(ye,"change",s[29]),z(ye,"input",s[29]),z(st,"click",s[13])],vt=!0)},p(ge,xe){xe[0]&1&&y!==(y="px-3 py-2 rounded-lg font-medium transition-colors "+(ge[0]==="left"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary"))&&n(g,"class",y),xe[0]&1&&k!==(k="px-3 py-2 rounded-lg font-medium transition-colors "+(ge[0]==="right"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary"))&&n(T,"class",k),xe[0]&1&&w!==(w="px-3 py-2 rounded-lg font-medium transition-colors "+(ge[0]==="top"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary"))&&n(N,"class",w),xe[0]&1&&H!==(H="px-3 py-2 rounded-lg font-medium transition-colors "+(ge[0]==="bottom"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary"))&&n(B,"class",H),xe[0]&1&&q!==(q="px-3 py-2 rounded-lg font-medium transition-colors "+(ge[0]==="all"?"bg-primary text-white":"bg-surface hover:bg-surface/80 text-text-secondary"))&&n(M,"class",q),xe[0]&2&&ne(Q,ge[1]),xe[0]&2&&Ve(ae,ge[1]),xe[0]&16&&Ve(Oe,ge[4]),xe[0]&32&&Ve(me,ge[5]),xe[0]&64&&_e!==(_e=ge[6].toFixed(1)+"")&&ne(ie,_e),xe[0]&64&&Ve(fe,ge[6]),xe[0]&128&&ne(Ze,ge[7]),xe[0]&128&&Ve(ye,ge[7]),ct!==(ct=ut(ge))&&(ft.d(1),ft=ct(ge),ft&&(ft.c(),ft.m(st,null))),xe[0]&272&&rt!==(rt=ge[8]||!ge[4].trim())&&(st.disabled=rt)},d(ge){ge&&(f(e),f(d),f(p),f(W),f(Z),f(be),f(Se),f(We),f(Ae),f(ke),f(qe),f(Ne),f(mt)),s[19](null),ft.d(),vt=!1,Rt(yt)}}}function iu(s){let e;return{c(){e=L("å¼€å§‹æ‰©å±•")},l(t){e=S(t,"å¼€å§‹æ‰©å±•")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function cu(s){let e,t=`<div class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></div>
            æ‰©å±•ä¸­...`;return{c(){e=i("span"),e.innerHTML=t,this.h()},l(r){e=c(r,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-136ewfx"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center justify-center gap-2")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Ar(s){let e,t,r,u="âœ¨ ç”Ÿæˆç»“æœ",a,o,d="ä¸‹è½½",p,h,m,b,v;return{c(){e=i("div"),t=i("div"),r=i("h4"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),h=i("img"),this.h()},l(g){e=c(g,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var y=_(t);r=c(y,"H4",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-12xd89o"&&(r.textContent=u),a=E(y),o=c(y,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-zfo8qh"&&(o.textContent=d),y.forEach(f),p=E(C),h=c(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(f),this.h()},h(){n(r,"class","text-sm font-semibold text-text-primary"),n(o,"class","px-3 py-1 text-sm bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors"),n(t,"class","flex items-center justify-between"),Jt(h.src,m=s[9])||n(h,"src",m),n(h,"alt","Outpaintingç»“æœ"),n(h,"class","w-full h-auto rounded-lg border border-border"),n(e,"class","space-y-3 p-4 bg-surface-elevated border border-success/30 rounded-lg")},m(g,C){j(g,e,C),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),l(e,h),b||(v=z(o,"click",s[14]),b=!0)},p(g,C){C[0]&512&&!Jt(h.src,m=g[9])&&n(h,"src",m)},d(g){g&&f(e),b=!1,v()}}}function fu(s){let e,t,r,u="ğŸ–¼ï¸ ç”»å¸ƒæ‰©å±• (Outpainting)",a,o,d="é‡ç½®",p,h,m,b="æºå›¾åƒ",v,g,C,y,D=s[2]?"æ›´æ¢å›¾åƒ":"é€‰æ‹©å›¾åƒ",T,F,k,I,N,V=s[2]&&Ir(s),w=s[10]&&s[9]&&Ar(s);return{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),h=i("div"),m=i("label"),m.textContent=b,v=x(),g=i("input"),C=x(),y=i("button"),T=L(D),F=x(),V&&V.c(),k=x(),w&&w.c(),this.h()},l(P){e=c(P,"DIV",{class:!0});var B=_(e);t=c(B,"DIV",{class:!0});var U=_(t);r=c(U,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-tabotq"&&(r.textContent=u),a=E(U),o=c(U,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-1qqk7vf"&&(o.textContent=d),U.forEach(f),p=E(B),h=c(B,"DIV",{class:!0});var H=_(h);m=c(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(m)!=="svelte-144o1yq"&&(m.textContent=b),v=E(H),g=c(H,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),C=E(H),y=c(H,"BUTTON",{class:!0});var A=_(y);T=S(A,D),A.forEach(f),H.forEach(f),F=E(B),V&&V.l(B),k=E(B),w&&w.l(B),B.forEach(f),this.h()},h(){n(r,"class","text-lg font-semibold text-text-primary"),n(o,"class","px-3 py-1 text-sm bg-surface-elevated hover:bg-surface-elevated/80 border border-border rounded-lg text-text-secondary transition-colors"),n(t,"class","flex items-center justify-between mb-4"),n(m,"for","outpaint-image-upload"),n(m,"class","block text-sm font-medium text-text-primary"),n(g,"id","outpaint-image-upload"),n(g,"type","file"),n(g,"accept","image/*"),n(g,"class","hidden"),n(y,"class","w-full px-4 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors font-medium"),n(h,"class","space-y-2"),n(e,"class","space-y-4")},m(P,B){j(P,e,B),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),l(e,h),l(h,m),l(h,v),l(h,g),s[17](g),l(h,C),l(h,y),l(y,T),l(e,F),V&&V.m(e,null),l(e,k),w&&w.m(e,null),I||(N=[z(o,"click",s[15]),z(g,"change",s[12]),z(y,"click",s[18])],I=!0)},p(P,B){B[0]&4&&D!==(D=P[2]?"æ›´æ¢å›¾åƒ":"é€‰æ‹©å›¾åƒ")&&ne(T,D),P[2]?V?V.p(P,B):(V=Ir(P),V.c(),V.m(e,k)):V&&(V.d(1),V=null),P[10]&&P[9]?w?w.p(P,B):(w=Ar(P),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i:pt,o:pt,d(P){P&&f(e),s[17](null),V&&V.d(),w&&w.d(),I=!1,Rt(N)}}}function du(s,e,t){let r="",u=null,a,o=null,d="all",p=128,h="",m="",b=7.5,v=20,g=!1,C="",y=!1,D;is(()=>{a&&(o=a.getContext("2d"))});function T(X){var le;const Y=(le=X.target.files)==null?void 0:le[0];if(!Y)return;if(!Y.type.startsWith("image/")){_t({type:gt.VALIDATION,message:"è¯·é€‰æ‹©å›¾åƒæ–‡ä»¶",details:"åªæ”¯æŒå›¾åƒæ ¼å¼ï¼ˆPNG, JPG, WebPç­‰ï¼‰",recoverable:!0,suggestions:["é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆçš„å›¾åƒæ–‡ä»¶"]});return}const Q=new FileReader;Q.onload=re=>{var we;const ae=(we=re.target)==null?void 0:we.result;t(2,r=ae),F(ae),nl()},Q.onerror=()=>{_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•è¯»å–é€‰æ‹©çš„æ–‡ä»¶",recoverable:!0,suggestions:["å°è¯•é€‰æ‹©å…¶ä»–å›¾åƒæ–‡ä»¶"]})},Q.readAsDataURL(Y)}function F(X){const pe=new Image;pe.onload=()=>{t(16,u=pe),k()},pe.onerror=()=>{_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•åŠ è½½å›¾åƒåˆ°ç”»å¸ƒ",recoverable:!0})},pe.src=X}function k(){if(!u||!o)return;const X=u,pe=512;let Y=X.width,Q=X.height;if(Y>pe||Q>pe){const Ie=Math.min(pe/Y,pe/Q);Y=Y*Ie,Q=Q*Ie}let le=Y,re=Q,ae=0,we=0;const J=p*(Y/X.width);(d==="left"||d==="all")&&(le+=J,ae=J),(d==="right"||d==="all")&&(le+=J),(d==="top"||d==="all")&&(re+=J,we=J),(d==="bottom"||d==="all")&&(re+=J),t(3,a.width=le,a),t(3,a.height=re,a),o.fillStyle="#e5e7eb",o.fillRect(0,0,le,re),o.drawImage(X,ae,we,Y,Q),o.strokeStyle="#3b82f6",o.lineWidth=2,o.setLineDash([5,5]),(d==="left"||d==="all")&&o.strokeRect(0,we,J,Q),(d==="right"||d==="all")&&o.strokeRect(ae+Y,we,J,Q),(d==="top"||d==="all")&&o.strokeRect(ae,0,Y,J),(d==="bottom"||d==="all")&&o.strokeRect(ae,we+Q,Y,J),o.setLineDash([])}async function I(){if(!r){_t({type:gt.VALIDATION,message:"è¯·å…ˆä¸Šä¼ å›¾åƒ",recoverable:!0,suggestions:['ç‚¹å‡»"é€‰æ‹©å›¾åƒ"æŒ‰é’®ä¸Šä¼ å›¾åƒ']});return}if(!h.trim()){_t({type:gt.VALIDATION,message:"è¯·è¾“å…¥Prompt",recoverable:!0,suggestions:["åœ¨Promptè¾“å…¥æ¡†ä¸­æè¿°ä½ æƒ³è¦åœ¨æ‰©å±•åŒºåŸŸç”Ÿæˆçš„å†…å®¹"]});return}t(8,g=!0),nl();try{const X=await fetch("/api/outpaint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:r,direction:d,extend_pixels:p,prompt:h,negative_prompt:m,guidance_scale:b,num_inference_steps:v})});if(!X.ok)throw new Error(`HTTPé”™è¯¯: ${X.status}`);const pe=await X.json();pe.success?(t(9,C=pe.image),t(10,y=!0)):_t({type:gt.GENERATION,message:"Outpaintingå¤±è´¥",details:pe.message||"æœªçŸ¥é”™è¯¯",recoverable:!0,suggestions:["æ£€æŸ¥Promptæ˜¯å¦åˆé€‚","å°è¯•è°ƒæ•´æ‰©å±•å°ºå¯¸","å°è¯•ä¸åŒçš„æ‰©å±•æ–¹å‘"]})}catch(X){_t({type:gt.API,message:"Outpaintingè¯·æ±‚å¤±è´¥",details:X instanceof Error?X.message:String(X),recoverable:!0,suggestions:["æ£€æŸ¥ç½‘ç»œè¿æ¥","ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ","æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°è·å–æ›´å¤šä¿¡æ¯"]}),console.error("Outpaintingå¤±è´¥:",X)}finally{t(8,g=!1)}}function N(){if(!C)return;const X=document.createElement("a");X.href=C,X.download=`outpaint_result_${Date.now()}.png`,X.click()}function V(){t(2,r=""),t(9,C=""),t(10,y=!1),t(4,h=""),t(5,m=""),t(0,d="all"),t(1,p=128),nl()}function w(X){ul[X?"unshift":"push"](()=>{D=X,t(11,D)})}const P=()=>D.click();function B(X){ul[X?"unshift":"push"](()=>{a=X,t(3,a)})}const U=()=>t(0,d="left"),H=()=>t(0,d="right"),A=()=>t(0,d="top"),M=()=>t(0,d="bottom"),R=()=>t(0,d="all");function q(){p=Ht(this.value),t(1,p)}function W(){h=this.value,t(4,h)}function Z(){m=this.value,t(5,m)}function K(){b=Ht(this.value),t(6,b)}function G(){v=Ht(this.value),t(7,v)}return s.$$.update=()=>{s.$$.dirty[0]&65539&&u&&(d||p)&&k()},[d,p,r,a,h,m,b,v,g,C,y,D,T,I,N,V,u,w,P,B,U,H,A,M,R,q,W,Z,K,G]}class hu extends Al{constructor(e){super(),Tl(this,e,du,fu,Il,{},null,[-1,-1])}}function Tr(s,e,t){const r=s.slice();return r[36]=e[t],r}function Br(s){let e,t,r,u,a,o,d,p;return{c(){e=i("div"),t=i("div"),r=i("canvas"),u=x(),a=i("p"),o=L("åŸå§‹å›¾åƒå°†è¢«æ”¾å¤§ "),d=L(s[6]),p=L("x å¹¶è¿›è¡Œé«˜åˆ†è¾¨ç‡ä¿®å¤"),this.h()},l(h){e=c(h,"DIV",{class:!0});var m=_(e);t=c(m,"DIV",{class:!0});var b=_(t);r=c(b,"CANVAS",{class:!0,style:!0}),_(r).forEach(f),b.forEach(f),u=E(m),a=c(m,"P",{class:!0});var v=_(a);o=S(v,"åŸå§‹å›¾åƒå°†è¢«æ”¾å¤§ "),d=S(v,s[6]),p=S(v,"x å¹¶è¿›è¡Œé«˜åˆ†è¾¨ç‡ä¿®å¤"),v.forEach(f),m.forEach(f),this.h()},h(){n(r,"class","w-full h-auto mx-auto svelte-1ap7e0w"),zt(r,"max-width","100%"),zt(r,"image-rendering","pixelated"),n(t,"class","border border-border rounded-lg overflow-hidden bg-surface-elevated p-4"),n(a,"class","text-xs text-text-secondary"),n(e,"class","space-y-2")},m(h,m){j(h,e,m),l(e,t),l(t,r),s[24](r),l(e,u),l(e,a),l(a,o),l(a,d),l(a,p)},p(h,m){m[0]&64&&ne(d,h[6])},d(h){h&&f(e),s[24](null)}}}function Pr(s){let e,t=s[36].label+"",r;return{c(){e=i("option"),r=L(t),this.h()},l(u){e=c(u,"OPTION",{});var a=_(e);r=S(a,t),a.forEach(f),this.h()},h(){e.__value=s[36].value,Ve(e,e.__value)},m(u,a){j(u,e,a),l(e,r)},p:pt,d(u){u&&f(e)}}}function Vr(s){let e,t,r,u,a,o,d,p,h,m,b,v=s[3]+s[4]+"",g,C,y,D,T,F,k,I=(s[1]?Math.round(s[1].width*s[6]):"?")+"",N,V,w=(s[1]?Math.round(s[1].height*s[6]):"?")+"",P,B,U=s[15]>0&&Nr(s);return{c(){e=i("div"),t=i("div"),r=i("div"),u=x(),a=i("span"),o=L(s[14]),d=x(),U&&U.c(),p=x(),h=i("div"),m=i("p"),b=L("â±ï¸ é¢„è®¡æ—¶é—´ï¼š"),g=L(v),C=L(" æ­¥ Ã— "),y=L(s[6]),D=L("x æ”¾å¤§"),T=x(),F=i("p"),k=L("ğŸ“ ç›®æ ‡å°ºå¯¸ï¼š"),N=L(I),V=L(" Ã— "),P=L(w),B=L(" px"),this.h()},l(H){e=c(H,"DIV",{class:!0});var A=_(e);t=c(A,"DIV",{class:!0});var M=_(t);r=c(M,"DIV",{class:!0}),_(r).forEach(f),u=E(M),a=c(M,"SPAN",{class:!0});var R=_(a);o=S(R,s[14]),R.forEach(f),M.forEach(f),d=E(A),U&&U.l(A),p=E(A),h=c(A,"DIV",{class:!0});var q=_(h);m=c(q,"P",{});var W=_(m);b=S(W,"â±ï¸ é¢„è®¡æ—¶é—´ï¼š"),g=S(W,v),C=S(W," æ­¥ Ã— "),y=S(W,s[6]),D=S(W,"x æ”¾å¤§"),W.forEach(f),T=E(q),F=c(q,"P",{});var Z=_(F);k=S(Z,"ğŸ“ ç›®æ ‡å°ºå¯¸ï¼š"),N=S(Z,I),V=S(Z," Ã— "),P=S(Z,w),B=S(Z," px"),Z.forEach(f),q.forEach(f),A.forEach(f),this.h()},h(){n(r,"class","animate-spin h-5 w-5 border-2 border-primary border-t-transparent rounded-full"),n(a,"class","text-sm font-medium text-text-primary"),n(t,"class","flex items-center gap-3"),n(h,"class","text-xs text-text-secondary"),n(e,"class","p-4 bg-primary/10 border border-primary/30 rounded-lg space-y-3")},m(H,A){j(H,e,A),l(e,t),l(t,r),l(t,u),l(t,a),l(a,o),l(e,d),U&&U.m(e,null),l(e,p),l(e,h),l(h,m),l(m,b),l(m,g),l(m,C),l(m,y),l(m,D),l(h,T),l(h,F),l(F,k),l(F,N),l(F,V),l(F,P),l(F,B)},p(H,A){A[0]&16384&&ne(o,H[14]),H[15]>0?U?U.p(H,A):(U=Nr(H),U.c(),U.m(e,p)):U&&(U.d(1),U=null),A[0]&24&&v!==(v=H[3]+H[4]+"")&&ne(g,v),A[0]&64&&ne(y,H[6]),A[0]&66&&I!==(I=(H[1]?Math.round(H[1].width*H[6]):"?")+"")&&ne(N,I),A[0]&66&&w!==(w=(H[1]?Math.round(H[1].height*H[6]):"?")+"")&&ne(P,w)},d(H){H&&f(e),U&&U.d()}}}function Nr(s){let e,t,r,u,a,o,d,p,h,m;function b(C,y){return C[15]<50?vu:C[15]<95?mu:pu}let v=b(s),g=v(s);return{c(){e=i("div"),t=i("div"),r=i("div"),u=x(),a=i("div"),o=i("span"),d=L(s[15]),p=L("%"),h=x(),m=i("span"),g.c(),this.h()},l(C){e=c(C,"DIV",{class:!0});var y=_(e);t=c(y,"DIV",{class:!0});var D=_(t);r=c(D,"DIV",{class:!0,style:!0}),_(r).forEach(f),D.forEach(f),u=E(y),a=c(y,"DIV",{class:!0});var T=_(a);o=c(T,"SPAN",{});var F=_(o);d=S(F,s[15]),p=S(F,"%"),F.forEach(f),h=E(T),m=c(T,"SPAN",{});var k=_(m);g.l(k),k.forEach(f),T.forEach(f),y.forEach(f),this.h()},h(){n(r,"class","bg-gradient-to-r from-primary to-success h-2.5 rounded-full transition-all duration-500 ease-out"),zt(r,"width",s[15]+"%"),n(t,"class","w-full bg-surface-elevated rounded-full h-2.5 overflow-hidden"),n(a,"class","flex justify-between text-xs text-text-secondary"),n(e,"class","space-y-1")},m(C,y){j(C,e,y),l(e,t),l(t,r),l(e,u),l(e,a),l(a,o),l(o,d),l(o,p),l(a,h),l(a,m),g.m(m,null)},p(C,y){y[0]&32768&&zt(r,"width",C[15]+"%"),y[0]&32768&&ne(d,C[15]),v!==(v=b(C))&&(g.d(1),g=v(C),g&&(g.c(),g.m(m,null)))},d(C){C&&f(e),g.d()}}}function pu(s){let e;return{c(){e=L("å³å°†å®Œæˆ...")},l(t){e=S(t,"å³å°†å®Œæˆ...")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function mu(s){let e;return{c(){e=L("ç¬¬äºŒé˜¶æ®µä¿®å¤ä¸­...")},l(t){e=S(t,"ç¬¬äºŒé˜¶æ®µä¿®å¤ä¸­...")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function vu(s){let e;return{c(){e=L("ç¬¬ä¸€é˜¶æ®µç”Ÿæˆä¸­...")},l(t){e=S(t,"ç¬¬ä¸€é˜¶æ®µç”Ÿæˆä¸­...")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function bu(s){let e;return{c(){e=L("å¼€å§‹ç”Ÿæˆ")},l(t){e=S(t,"å¼€å§‹ç”Ÿæˆ")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function _u(s){let e,t=`<div class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></div>
          ç”Ÿæˆä¸­...`;return{c(){e=i("span"),e.innerHTML=t,this.h()},l(r){e=c(r,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-v3y3ju"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center justify-center gap-2")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Lr(s){let e,t,r,u="âœ¨ ç”Ÿæˆç»“æœ",a,o,d="ä¸‹è½½",p,h,m,b,v,g,C,y,D,T;return{c(){e=i("div"),t=i("div"),r=i("h4"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),h=i("img"),b=x(),v=i("p"),g=L("é«˜åˆ†è¾¨ç‡å›¾åƒå·²ç”Ÿæˆï¼ˆ"),C=L(s[6]),y=L("x æ”¾å¤§ï¼‰"),this.h()},l(F){e=c(F,"DIV",{class:!0});var k=_(e);t=c(k,"DIV",{class:!0});var I=_(t);r=c(I,"H4",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-12xd89o"&&(r.textContent=u),a=E(I),o=c(I,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-zfo8qh"&&(o.textContent=d),I.forEach(f),p=E(k),h=c(k,"IMG",{src:!0,alt:!0,class:!0}),b=E(k),v=c(k,"P",{class:!0});var N=_(v);g=S(N,"é«˜åˆ†è¾¨ç‡å›¾åƒå·²ç”Ÿæˆï¼ˆ"),C=S(N,s[6]),y=S(N,"x æ”¾å¤§ï¼‰"),N.forEach(f),k.forEach(f),this.h()},h(){n(r,"class","text-sm font-semibold text-text-primary"),n(o,"class","px-3 py-1 text-sm bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors"),n(t,"class","flex items-center justify-between"),Jt(h.src,m=s[12])||n(h,"src",m),n(h,"alt","Hires.fixç»“æœ"),n(h,"class","w-full h-auto rounded-lg border border-border"),n(v,"class","text-xs text-text-secondary"),n(e,"class","space-y-3 p-4 bg-surface-elevated border border-success/30 rounded-lg")},m(F,k){j(F,e,k),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),l(e,h),l(e,b),l(e,v),l(v,g),l(v,C),l(v,y),D||(T=z(o,"click",s[20]),D=!0)},p(F,k){k[0]&4096&&!Jt(h.src,m=F[12])&&n(h,"src",m),k[0]&64&&ne(C,F[6])},d(F){F&&f(e),D=!1,T()}}}function gu(s){let e,t,r,u="ğŸ” é«˜åˆ†è¾¨ç‡ä¿®å¤ (Hires.fix)",a,o,d="é‡ç½®",p,h,m='<p class="text-sm text-text-primary">ğŸ’¡ <strong>Hires.fix</strong> é€šè¿‡ä¸¤é˜¶æ®µç”Ÿæˆæå‡å›¾åƒè´¨é‡ï¼šå…ˆç”Ÿæˆä½åˆ†è¾¨ç‡å›¾åƒï¼Œå†æ”¾å¤§å¹¶ç»†åŒ–ç»†èŠ‚ã€‚</p>',b,v,g,C='æºå›¾åƒ <span class="text-text-secondary text-xs">(å¯é€‰ï¼Œç•™ç©ºåˆ™ä»å¤´ç”Ÿæˆ)</span>',y,D,T,F,k=s[0]?"æ›´æ¢å›¾åƒ":"é€‰æ‹©å›¾åƒï¼ˆå¯é€‰ï¼‰",I,N,V,w,P,B="Prompt",U,H,A,M,R,q="Negative Prompt",W,Z,K,G,X,pe="å‚æ•°é…ç½®",Y,Q,le,re,ae="ç¬¬ä¸€é˜¶æ®µæ­¥æ•°",we,J,Ie,be,Se="ä½åˆ†è¾¨ç‡ç”Ÿæˆçš„æ­¥æ•°ï¼ˆæ¨è 15-25ï¼‰",ze,et,Pe,Oe,We="é«˜åˆ†è¾¨ç‡æ­¥æ•°",Ae,Re,Xe,at,me="é«˜åˆ†è¾¨ç‡ç»†åŒ–çš„æ­¥æ•°ï¼ˆæ¨è 10-20ï¼‰",ke,qe,de,Qe="æ”¾å¤§ç®—æ³•",Me,Ee,Ke,ce,Ue="<p>ğŸ’¡ <strong>Latent</strong>: é€Ÿåº¦å¿«ï¼Œé€‚åˆå¿«é€Ÿé¢„è§ˆ</p> <p>ğŸ’¡ <strong>ESRGAN</strong>: è´¨é‡é«˜ï¼Œé€‚åˆç…§ç‰‡å’ŒçœŸå®åœºæ™¯</p> <p>ğŸ’¡ <strong>LDSR</strong>: æœ€é«˜è´¨é‡ï¼Œä½†é€Ÿåº¦è¾ƒæ…¢</p>",Fe,oe,_e,ie,$="æ”¾å¤§å€æ•°",fe,he,Be=s[6].toFixed(1)+"",Ge,lt,it,He,je,Ze,ve,ye,Ne,mt,st,rt,vt,yt="é™å™ªå¼ºåº¦",ut,ct,ft=s[7].toFixed(2)+"",ge,xe,Te,ue,se,Le="å€¼è¶Šé«˜ï¼Œé«˜åˆ†è¾¨ç‡é˜¶æ®µå˜åŒ–è¶Šå¤§ï¼ˆæ¨è 0.6-0.8ï¼‰",ee,te,De,dt,xt="å¼•å¯¼å¼ºåº¦",bt,kt,Tt=s[10].toFixed(1)+"",Xt,Nt,Ft,qt,Zt,It,Et,Yt,Ut,Qt,ml,Dt=s[0]&&Br(s),dl=Gt(s[17]),At=[];for(let Ye=0;Ye<dl.length;Ye+=1)At[Ye]=Pr(Tr(s,dl,Ye));let Bt=s[11]&&Vr(s);function Lt(Ye,Je){return Ye[11]?_u:bu}let Bl=Lt(s),el=Bl(s),Pt=s[13]&&s[12]&&Lr(s);return{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),h=i("div"),h.innerHTML=m,b=x(),v=i("div"),g=i("label"),g.innerHTML=C,y=x(),D=i("input"),T=x(),F=i("button"),I=L(k),N=x(),Dt&&Dt.c(),V=x(),w=i("div"),P=i("label"),P.textContent=B,U=x(),H=i("textarea"),A=x(),M=i("div"),R=i("label"),R.textContent=q,W=x(),Z=i("textarea"),K=x(),G=i("div"),X=i("h4"),X.textContent=pe,Y=x(),Q=i("div"),le=i("div"),re=i("label"),re.textContent=ae,we=x(),J=i("input"),Ie=x(),be=i("p"),be.textContent=Se,ze=x(),et=i("div"),Pe=i("div"),Oe=i("label"),Oe.textContent=We,Ae=x(),Re=i("input"),Xe=x(),at=i("p"),at.textContent=me,ke=x(),qe=i("div"),de=i("label"),de.textContent=Qe,Me=x(),Ee=i("select");for(let Ye=0;Ye<At.length;Ye+=1)At[Ye].c();Ke=x(),ce=i("div"),ce.innerHTML=Ue,Fe=x(),oe=i("div"),_e=i("div"),ie=i("label"),ie.textContent=$,fe=x(),he=i("span"),Ge=L(Be),lt=L("x"),it=x(),He=i("input"),je=x(),Ze=i("p"),ve=L("å›¾åƒå°†è¢«æ”¾å¤§åˆ°åŸå§‹å°ºå¯¸çš„ "),ye=L(s[6]),Ne=L("x"),mt=x(),st=i("div"),rt=i("div"),vt=i("label"),vt.textContent=yt,ut=x(),ct=i("span"),ge=L(ft),xe=x(),Te=i("input"),ue=x(),se=i("p"),se.textContent=Le,ee=x(),te=i("div"),De=i("div"),dt=i("label"),dt.textContent=xt,bt=x(),kt=i("span"),Xt=L(Tt),Nt=x(),Ft=i("input"),qt=x(),Bt&&Bt.c(),Zt=x(),It=i("div"),Et=i("button"),el.c(),Ut=x(),Pt&&Pt.c(),this.h()},l(Ye){e=c(Ye,"DIV",{class:!0});var Je=_(e);t=c(Je,"DIV",{class:!0});var Mt=_(t);r=c(Mt,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-e7x2aq"&&(r.textContent=u),a=E(Mt),o=c(Mt,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-1qqk7vf"&&(o.textContent=d),Mt.forEach(f),p=E(Je),h=c(Je,"DIV",{class:!0,"data-svelte-h":!0}),O(h)!=="svelte-1vqg35z"&&(h.innerHTML=m),b=E(Je),v=c(Je,"DIV",{class:!0});var hl=_(v);g=c(hl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(g)!=="svelte-z71whw"&&(g.innerHTML=C),y=E(hl),D=c(hl,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),T=E(hl),F=c(hl,"BUTTON",{class:!0});var Wt=_(F);I=S(Wt,k),Wt.forEach(f),hl.forEach(f),N=E(Je),Dt&&Dt.l(Je),V=E(Je),w=c(Je,"DIV",{class:!0});var St=_(w);P=c(St,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(P)!=="svelte-g97pr8"&&(P.textContent=B),U=E(St),H=c(St,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),_(H).forEach(f),St.forEach(f),A=E(Je),M=c(Je,"DIV",{class:!0});var Ot=_(M);R=c(Ot,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(R)!=="svelte-ns83n5"&&(R.textContent=q),W=E(Ot),Z=c(Ot,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),_(Z).forEach(f),Ot.forEach(f),K=E(Je),G=c(Je,"DIV",{class:!0});var wt=_(G);X=c(wt,"H4",{class:!0,"data-svelte-h":!0}),O(X)!=="svelte-t1m86p"&&(X.textContent=pe),Y=E(wt),Q=c(wt,"DIV",{class:!0});var Rl=_(Q);le=c(Rl,"DIV",{class:!0});var Pl=_(le);re=c(Pl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(re)!=="svelte-1mrc8hw"&&(re.textContent=ae),we=E(Pl),J=c(Pl,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),Pl.forEach(f),Ie=E(Rl),be=c(Rl,"P",{class:!0,"data-svelte-h":!0}),O(be)!=="svelte-1egm59i"&&(be.textContent=Se),Rl.forEach(f),ze=E(wt),et=c(wt,"DIV",{class:!0});var Kt=_(et);Pe=c(Kt,"DIV",{class:!0});var jt=_(Pe);Oe=c(jt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(Oe)!=="svelte-1byk583"&&(Oe.textContent=We),Ae=E(jt),Re=c(jt,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),jt.forEach(f),Xe=E(Kt),at=c(Kt,"P",{class:!0,"data-svelte-h":!0}),O(at)!=="svelte-141v8wp"&&(at.textContent=me),Kt.forEach(f),ke=E(wt),qe=c(wt,"DIV",{class:!0});var Vt=_(qe);de=c(Vt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(de)!=="svelte-1rt3xs2"&&(de.textContent=Qe),Me=E(Vt),Ee=c(Vt,"SELECT",{id:!0,class:!0});var Ce=_(Ee);for(let Gl=0;Gl<At.length;Gl+=1)At[Gl].l(Ce);Ce.forEach(f),Ke=E(Vt),ce=c(Vt,"DIV",{class:!0,"data-svelte-h":!0}),O(ce)!=="svelte-1tv1cbz"&&(ce.innerHTML=Ue),Vt.forEach(f),Fe=E(wt),oe=c(wt,"DIV",{class:!0});var nt=_(oe);_e=c(nt,"DIV",{class:!0});var ot=_(_e);ie=c(ot,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(ie)!=="svelte-1thpq9n"&&(ie.textContent=$),fe=E(ot),he=c(ot,"SPAN",{class:!0});var sl=_(he);Ge=S(sl,Be),lt=S(sl,"x"),sl.forEach(f),ot.forEach(f),it=E(nt),He=c(nt,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),je=E(nt),Ze=c(nt,"P",{class:!0});var pl=_(Ze);ve=S(pl,"å›¾åƒå°†è¢«æ”¾å¤§åˆ°åŸå§‹å°ºå¯¸çš„ "),ye=S(pl,s[6]),Ne=S(pl,"x"),pl.forEach(f),nt.forEach(f),mt=E(wt),st=c(wt,"DIV",{class:!0});var rl=_(st);rt=c(rl,"DIV",{class:!0});var al=_(rt);vt=c(al,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(vt)!=="svelte-1quw3jj"&&(vt.textContent=yt),ut=E(al),ct=c(al,"SPAN",{class:!0});var ql=_(ct);ge=S(ql,ft),ql.forEach(f),al.forEach(f),xe=E(rl),Te=c(rl,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),ue=E(rl),se=c(rl,"P",{class:!0,"data-svelte-h":!0}),O(se)!=="svelte-btu0np"&&(se.textContent=Le),rl.forEach(f),ee=E(wt),te=c(wt,"DIV",{class:!0});var Hl=_(te);De=c(Hl,"DIV",{class:!0});var tl=_(De);dt=c(tl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(dt)!=="svelte-zp8ybr"&&(dt.textContent=xt),bt=E(tl),kt=c(tl,"SPAN",{class:!0});var Vl=_(kt);Xt=S(Vl,Tt),Vl.forEach(f),tl.forEach(f),Nt=E(Hl),Ft=c(Hl,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Hl.forEach(f),wt.forEach(f),qt=E(Je),Bt&&Bt.l(Je),Zt=E(Je),It=c(Je,"DIV",{class:!0});var Dl=_(It);Et=c(Dl,"BUTTON",{class:!0});var Ol=_(Et);el.l(Ol),Ol.forEach(f),Dl.forEach(f),Ut=E(Je),Pt&&Pt.l(Je),Je.forEach(f),this.h()},h(){n(r,"class","text-lg font-semibold text-text-primary"),n(o,"class","px-3 py-1 text-sm bg-surface-elevated hover:bg-surface-elevated/80 border border-border rounded-lg text-text-secondary transition-colors"),n(t,"class","flex items-center justify-between mb-4"),n(h,"class","p-3 bg-info/10 border border-info/30 rounded-lg"),n(g,"for","hires-image-upload"),n(g,"class","block text-sm font-medium text-text-primary"),n(D,"id","hires-image-upload"),n(D,"type","file"),n(D,"accept","image/*"),n(D,"class","hidden"),n(F,"class","w-full px-4 py-3 bg-surface-elevated hover:bg-surface border border-border text-text-primary rounded-lg transition-colors font-medium"),n(v,"class","space-y-2"),n(P,"for","hires-prompt-input"),n(P,"class","block text-sm font-medium text-text-primary"),n(H,"id","hires-prompt-input"),n(H,"rows","3"),n(H,"class","w-full px-3 py-2 bg-surface-elevated border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary resize-none"),n(H,"placeholder","æè¿°ä½ æƒ³è¦ç”Ÿæˆçš„é«˜è´¨é‡å›¾åƒ..."),n(w,"class","space-y-2"),n(R,"for","hires-negative-prompt-input"),n(R,"class","block text-sm font-medium text-text-primary"),n(Z,"id","hires-negative-prompt-input"),n(Z,"rows","2"),n(Z,"class","w-full px-3 py-2 bg-surface-elevated border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary resize-none"),n(Z,"placeholder","æè¿°ä½ ä¸æƒ³è¦çš„å†…å®¹..."),n(M,"class","space-y-2"),n(X,"class","text-sm font-semibold text-text-primary"),n(re,"for","first-pass-steps"),n(re,"class","text-sm font-medium text-text-primary"),n(J,"id","first-pass-steps"),n(J,"type","number"),n(J,"min","10"),n(J,"max","50"),n(J,"class","w-20 px-2 py-1 bg-surface border border-border rounded text-text-primary text-sm text-center"),n(le,"class","flex justify-between items-center"),n(be,"class","text-xs text-text-secondary"),n(Q,"class","space-y-2"),n(Oe,"for","hires-steps"),n(Oe,"class","text-sm font-medium text-text-primary"),n(Re,"id","hires-steps"),n(Re,"type","number"),n(Re,"min","5"),n(Re,"max","50"),n(Re,"class","w-20 px-2 py-1 bg-surface border border-border rounded text-text-primary text-sm text-center"),n(Pe,"class","flex justify-between items-center"),n(at,"class","text-xs text-text-secondary"),n(et,"class","space-y-2"),n(de,"for","upscaler-select"),n(de,"class","block text-sm font-medium text-text-primary"),n(Ee,"id","upscaler-select"),n(Ee,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary"),s[5]===void 0&&rs(()=>s[29].call(Ee)),n(ce,"class","text-xs text-text-secondary space-y-1"),n(qe,"class","space-y-2"),n(ie,"for","upscale-by-slider"),n(ie,"class","text-sm font-medium text-text-primary"),n(he,"class","text-sm text-text-secondary"),n(_e,"class","flex justify-between items-center"),n(He,"id","upscale-by-slider"),n(He,"type","range"),n(He,"min","1.0"),n(He,"max","4.0"),n(He,"step","0.1"),n(He,"class","w-full svelte-1ap7e0w"),n(Ze,"class","text-xs text-text-secondary"),n(oe,"class","space-y-2"),n(vt,"for","denoising-slider"),n(vt,"class","text-sm font-medium text-text-primary"),n(ct,"class","text-sm text-text-secondary"),n(rt,"class","flex justify-between items-center"),n(Te,"id","denoising-slider"),n(Te,"type","range"),n(Te,"min","0.0"),n(Te,"max","1.0"),n(Te,"step","0.05"),n(Te,"class","w-full svelte-1ap7e0w"),n(se,"class","text-xs text-text-secondary"),n(st,"class","space-y-2"),n(dt,"for","hires-guidance-slider"),n(dt,"class","text-sm font-medium text-text-primary"),n(kt,"class","text-sm text-text-secondary"),n(De,"class","flex justify-between items-center"),n(Ft,"id","hires-guidance-slider"),n(Ft,"type","range"),n(Ft,"min","1.0"),n(Ft,"max","20.0"),n(Ft,"step","0.5"),n(Ft,"class","w-full svelte-1ap7e0w"),n(te,"class","space-y-2"),n(G,"class","space-y-4 p-4 bg-surface-elevated border border-border rounded-lg"),Et.disabled=Yt=s[11]||!s[8].trim(),n(Et,"class","flex-1 px-4 py-3 bg-success hover:bg-success/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(It,"class","flex gap-3"),n(e,"class","space-y-4")},m(Ye,Je){j(Ye,e,Je),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),l(e,h),l(e,b),l(e,v),l(v,g),l(v,y),l(v,D),s[22](D),l(v,T),l(v,F),l(F,I),l(e,N),Dt&&Dt.m(e,null),l(e,V),l(e,w),l(w,P),l(w,U),l(w,H),Ve(H,s[8]),l(e,A),l(e,M),l(M,R),l(M,W),l(M,Z),Ve(Z,s[9]),l(e,K),l(e,G),l(G,X),l(G,Y),l(G,Q),l(Q,le),l(le,re),l(le,we),l(le,J),Ve(J,s[3]),l(Q,Ie),l(Q,be),l(G,ze),l(G,et),l(et,Pe),l(Pe,Oe),l(Pe,Ae),l(Pe,Re),Ve(Re,s[4]),l(et,Xe),l(et,at),l(G,ke),l(G,qe),l(qe,de),l(qe,Me),l(qe,Ee);for(let Mt=0;Mt<At.length;Mt+=1)At[Mt]&&At[Mt].m(Ee,null);yl(Ee,s[5],!0),l(qe,Ke),l(qe,ce),l(G,Fe),l(G,oe),l(oe,_e),l(_e,ie),l(_e,fe),l(_e,he),l(he,Ge),l(he,lt),l(oe,it),l(oe,He),Ve(He,s[6]),l(oe,je),l(oe,Ze),l(Ze,ve),l(Ze,ye),l(Ze,Ne),l(G,mt),l(G,st),l(st,rt),l(rt,vt),l(rt,ut),l(rt,ct),l(ct,ge),l(st,xe),l(st,Te),Ve(Te,s[7]),l(st,ue),l(st,se),l(G,ee),l(G,te),l(te,De),l(De,dt),l(De,bt),l(De,kt),l(kt,Xt),l(te,Nt),l(te,Ft),Ve(Ft,s[10]),l(e,qt),Bt&&Bt.m(e,null),l(e,Zt),l(e,It),l(It,Et),el.m(Et,null),l(e,Ut),Pt&&Pt.m(e,null),Qt||(ml=[z(o,"click",s[21]),z(D,"change",s[18]),z(F,"click",s[23]),z(H,"input",s[25]),z(Z,"input",s[26]),z(J,"input",s[27]),z(Re,"input",s[28]),z(Ee,"change",s[29]),z(He,"change",s[30]),z(He,"input",s[30]),z(Te,"change",s[31]),z(Te,"input",s[31]),z(Ft,"change",s[32]),z(Ft,"input",s[32]),z(Et,"click",s[19])],Qt=!0)},p(Ye,Je){if(Je[0]&1&&k!==(k=Ye[0]?"æ›´æ¢å›¾åƒ":"é€‰æ‹©å›¾åƒï¼ˆå¯é€‰ï¼‰")&&ne(I,k),Ye[0]?Dt?Dt.p(Ye,Je):(Dt=Br(Ye),Dt.c(),Dt.m(e,V)):Dt&&(Dt.d(1),Dt=null),Je[0]&256&&Ve(H,Ye[8]),Je[0]&512&&Ve(Z,Ye[9]),Je[0]&8&&Ht(J.value)!==Ye[3]&&Ve(J,Ye[3]),Je[0]&16&&Ht(Re.value)!==Ye[4]&&Ve(Re,Ye[4]),Je[0]&131072){dl=Gt(Ye[17]);let Mt;for(Mt=0;Mt<dl.length;Mt+=1){const hl=Tr(Ye,dl,Mt);At[Mt]?At[Mt].p(hl,Je):(At[Mt]=Pr(hl),At[Mt].c(),At[Mt].m(Ee,null))}for(;Mt<At.length;Mt+=1)At[Mt].d(1);At.length=dl.length}Je[0]&131104&&yl(Ee,Ye[5]),Je[0]&64&&Be!==(Be=Ye[6].toFixed(1)+"")&&ne(Ge,Be),Je[0]&64&&Ve(He,Ye[6]),Je[0]&64&&ne(ye,Ye[6]),Je[0]&128&&ft!==(ft=Ye[7].toFixed(2)+"")&&ne(ge,ft),Je[0]&128&&Ve(Te,Ye[7]),Je[0]&1024&&Tt!==(Tt=Ye[10].toFixed(1)+"")&&ne(Xt,Tt),Je[0]&1024&&Ve(Ft,Ye[10]),Ye[11]?Bt?Bt.p(Ye,Je):(Bt=Vr(Ye),Bt.c(),Bt.m(e,Zt)):Bt&&(Bt.d(1),Bt=null),Bl!==(Bl=Lt(Ye))&&(el.d(1),el=Bl(Ye),el&&(el.c(),el.m(Et,null))),Je[0]&2304&&Yt!==(Yt=Ye[11]||!Ye[8].trim())&&(Et.disabled=Yt),Ye[13]&&Ye[12]?Pt?Pt.p(Ye,Je):(Pt=Lr(Ye),Pt.c(),Pt.m(e,null)):Pt&&(Pt.d(1),Pt=null)},i:pt,o:pt,d(Ye){Ye&&f(e),s[22](null),Dt&&Dt.d(),Sl(At,Ye),Bt&&Bt.d(),el.d(),Pt&&Pt.d(),Qt=!1,Rt(ml)}}}function xu(s,e,t){let r="",u=null,a,o=null,d=20,p=15,h="Latent",m=2,b=.7,v="",g="",C=7.5,y=!1,D="",T=!1,F="",k=0,I;const N=[{value:"Latent",label:"Latent (å¿«é€Ÿ)"},{value:"Latent (nearest)",label:"Latent (æœ€è¿‘é‚»)"},{value:"Latent (bicubic)",label:"Latent (åŒä¸‰æ¬¡)"},{value:"ESRGAN_4x",label:"ESRGAN 4x"},{value:"R-ESRGAN 4x+",label:"R-ESRGAN 4x+"},{value:"LDSR",label:"LDSR (é«˜è´¨é‡)"}];is(()=>{a&&(o=a.getContext("2d"))});function V(Q){var we;const re=(we=Q.target.files)==null?void 0:we[0];if(!re)return;if(!re.type.startsWith("image/")){_t({type:gt.VALIDATION,message:"è¯·é€‰æ‹©å›¾åƒæ–‡ä»¶",details:"åªæ”¯æŒå›¾åƒæ ¼å¼ï¼ˆPNG, JPG, WebPç­‰ï¼‰",recoverable:!0,suggestions:["é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆçš„å›¾åƒæ–‡ä»¶"]});return}const ae=new FileReader;ae.onload=J=>{var be;const Ie=(be=J.target)==null?void 0:be.result;t(0,r=Ie),w(Ie),nl()},ae.onerror=()=>{_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•è¯»å–é€‰æ‹©çš„æ–‡ä»¶",recoverable:!0,suggestions:["å°è¯•é€‰æ‹©å…¶ä»–å›¾åƒæ–‡ä»¶"]})},ae.readAsDataURL(re)}function w(Q){const le=new Image;le.onload=()=>{t(1,u=le),P()},le.onerror=()=>{_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•åŠ è½½å›¾åƒåˆ°ç”»å¸ƒ",recoverable:!0})},le.src=Q}function P(){if(!u||!o)return;const Q=u,le=512;let re=Q.width,ae=Q.height;if(re>le||ae>le){const we=Math.min(le/re,le/ae);re=re*we,ae=ae*we}t(2,a.width=re,a),t(2,a.height=ae,a),o.drawImage(Q,0,0,re,ae)}async function B(){if(!v.trim()){_t({type:gt.VALIDATION,message:"è¯·è¾“å…¥Prompt",recoverable:!0,suggestions:["åœ¨Promptè¾“å…¥æ¡†ä¸­æè¿°ä½ æƒ³è¦ç”Ÿæˆçš„å†…å®¹"]});return}if(!r){_t({type:gt.VALIDATION,message:"è¯·é€‰æ‹©æºå›¾åƒ",recoverable:!0,suggestions:["ä¸Šä¼ ä¸€å¼ å›¾åƒä½œä¸º Hires.fix çš„èµ·ç‚¹"]});return}t(11,y=!0),t(14,F="å‡†å¤‡ä¸­..."),t(15,k=0),nl();try{const Q=u?u.width:512,le=u?u.height:512,re=Math.round(Q*m),ae=Math.round(le*m),we={image:r,prompt:v,negative_prompt:g,first_stage_width:Q,first_stage_height:le,second_stage_width:re,second_stage_height:ae,first_stage_steps:d,second_stage_steps:p,first_stage_guidance_scale:C,second_stage_guidance_scale:C,second_stage_denoising_strength:b,upscaler:h!=="Latent"?h:null};t(14,F="ç¬¬ä¸€é˜¶æ®µï¼šä½åˆ†è¾¨ç‡ç”Ÿæˆ"),t(15,k=10);const J=setInterval(()=>{k<45?t(15,k+=5):k<90&&t(15,k+=2)},500),Ie=await fetch("/api/hires-fix",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(we)});if(clearInterval(J),!Ie.ok){const Se=await Ie.json().catch(()=>({}));throw new Error(Se.message||`HTTPé”™è¯¯: ${Ie.status}`)}t(14,F="ç¬¬äºŒé˜¶æ®µï¼šé«˜åˆ†è¾¨ç‡ä¿®å¤"),t(15,k=95);const be=await Ie.json();if(be.success)t(12,D=be.image),t(13,T=!0),t(14,F="å®Œæˆ"),t(15,k=100),setTimeout(()=>{t(14,F=""),t(15,k=0)},2e3);else throw new Error(be.message||"ç”Ÿæˆå¤±è´¥")}catch(Q){const le=Q instanceof Error?Q.message:String(Q);let re=["æ£€æŸ¥Promptæ˜¯å¦åˆé€‚","å°è¯•è°ƒæ•´å‚æ•°","å°è¯•ä¸åŒçš„Upscaler"];le.includes("HTTPé”™è¯¯: 400")?re=["æ£€æŸ¥è¾“å…¥å‚æ•°æ˜¯å¦æœ‰æ•ˆ","ç¡®ä¿å›¾åƒæ ¼å¼æ­£ç¡®","å°è¯•ä½¿ç”¨ä¸åŒçš„å›¾åƒ"]:le.includes("HTTPé”™è¯¯: 500")?re=["åç«¯æœåŠ¡å¯èƒ½é‡åˆ°é—®é¢˜","æ£€æŸ¥åç«¯æ—¥å¿—","å°è¯•é‡å¯åç«¯æœåŠ¡"]:le.includes("Failed to fetch")||le.includes("NetworkError")?re=["æ£€æŸ¥ç½‘ç»œè¿æ¥","ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ","æ£€æŸ¥é˜²ç«å¢™è®¾ç½®"]:le.includes("Pipeline")&&(re=["Hires.fix Pipeline å¯èƒ½æœªåˆå§‹åŒ–","æ£€æŸ¥åç«¯é…ç½®","æŸ¥çœ‹åç«¯å¯åŠ¨æ—¥å¿—"]),_t({type:gt.API,message:"Hires.fix ç”Ÿæˆå¤±è´¥",details:le,recoverable:!0,suggestions:re}),console.error("Hires.fixå¤±è´¥:",Q)}finally{t(11,y=!1),T||(t(14,F=""),t(15,k=0))}}function U(){if(!D)return;const Q=document.createElement("a");Q.href=D,Q.download=`hires_fix_result_${Date.now()}.png`,Q.click()}function H(){t(0,r=""),t(12,D=""),t(13,T=!1),t(8,v=""),t(9,g=""),t(3,d=20),t(4,p=15),t(5,h="Latent"),t(6,m=2),t(7,b=.7),t(10,C=7.5),t(14,F=""),t(15,k=0),nl()}function A(Q){ul[Q?"unshift":"push"](()=>{I=Q,t(16,I)})}const M=()=>I.click();function R(Q){ul[Q?"unshift":"push"](()=>{a=Q,t(2,a)})}function q(){v=this.value,t(8,v)}function W(){g=this.value,t(9,g)}function Z(){d=Ht(this.value),t(3,d)}function K(){p=Ht(this.value),t(4,p)}function G(){h=ss(this),t(5,h),t(17,N)}function X(){m=Ht(this.value),t(6,m)}function pe(){b=Ht(this.value),t(7,b)}function Y(){C=Ht(this.value),t(10,C)}return[r,u,a,d,p,h,m,b,v,g,C,y,D,T,F,k,I,N,V,B,U,H,A,M,R,q,W,Z,K,G,X,pe,Y]}class Eu extends Al{constructor(e){super(),Tl(this,e,xu,gu,Il,{},null,[-1,-1])}}function Sr(s,e,t){const r=s.slice();return r[25]=e[t],r}function Or(s){var k,I;let e,t,r,u,a,o,d=(((k=s[1])==null?void 0:k.width)||0)+"",p,h,m=(((I=s[1])==null?void 0:I.height)||0)+"",b,v,g=(s[1]?Math.round(s[1].width*s[4]):0)+"",C,y,D=(s[1]?Math.round(s[1].height*s[4]):0)+"",T,F;return{c(){e=i("div"),t=i("div"),r=i("canvas"),u=x(),a=i("p"),o=L("åŸå§‹å°ºå¯¸: "),p=L(d),h=L(" Ã— "),b=L(m),v=L(` px
        â†’ ç›®æ ‡å°ºå¯¸: `),C=L(g),y=L(" Ã— "),T=L(D),F=L(" px"),this.h()},l(N){e=c(N,"DIV",{class:!0});var V=_(e);t=c(V,"DIV",{class:!0});var w=_(t);r=c(w,"CANVAS",{class:!0,style:!0}),_(r).forEach(f),w.forEach(f),u=E(V),a=c(V,"P",{class:!0});var P=_(a);o=S(P,"åŸå§‹å°ºå¯¸: "),p=S(P,d),h=S(P," Ã— "),b=S(P,m),v=S(P,` px
        â†’ ç›®æ ‡å°ºå¯¸: `),C=S(P,g),y=S(P," Ã— "),T=S(P,D),F=S(P," px"),P.forEach(f),V.forEach(f),this.h()},h(){n(r,"class","w-full h-auto mx-auto svelte-1ap7e0w"),zt(r,"max-width","100%"),zt(r,"image-rendering","pixelated"),n(t,"class","border border-border rounded-lg overflow-hidden bg-surface-elevated p-4"),n(a,"class","text-xs text-text-secondary"),n(e,"class","space-y-2")},m(N,V){j(N,e,V),l(e,t),l(t,r),s[17](r),l(e,u),l(e,a),l(a,o),l(a,p),l(a,h),l(a,b),l(a,v),l(a,C),l(a,y),l(a,T),l(a,F)},p(N,V){var w,P;V&2&&d!==(d=(((w=N[1])==null?void 0:w.width)||0)+"")&&ne(p,d),V&2&&m!==(m=(((P=N[1])==null?void 0:P.height)||0)+"")&&ne(b,m),V&18&&g!==(g=(N[1]?Math.round(N[1].width*N[4]):0)+"")&&ne(C,g),V&18&&D!==(D=(N[1]?Math.round(N[1].height*N[4]):0)+"")&&ne(T,D)},d(N){N&&f(e),s[17](null)}}}function Mr(s){let e,t=s[25].label+"",r;return{c(){e=i("option"),r=L(t),this.h()},l(u){e=c(u,"OPTION",{});var a=_(e);r=S(a,t),a.forEach(f),this.h()},h(){e.__value=s[25].value,Ve(e,e.__value)},m(u,a){j(u,e,a),l(e,r)},p:pt,d(u){u&&f(e)}}}function Ur(s){var T;let e,t,r='<div class="animate-spin h-5 w-5 border-2 border-primary border-t-transparent rounded-full"></div> <span class="text-sm font-medium text-text-primary">æ­£åœ¨æ”¾å¤§å›¾åƒ...</span>',u,a,o,d,p,h=(((T=s[10].find(s[20]))==null?void 0:T.label)||s[3])+"",m,b,v,g,C,y,D=s[8]>0&&jr(s);return{c(){e=i("div"),t=i("div"),t.innerHTML=r,u=x(),D&&D.c(),a=x(),o=i("div"),d=i("p"),p=L("ğŸ” ä½¿ç”¨ "),m=L(h),b=x(),v=i("p"),g=L("ğŸ“ æ”¾å¤§å€æ•°: "),C=L(s[4]),y=L("x"),this.h()},l(F){e=c(F,"DIV",{class:!0});var k=_(e);t=c(k,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-x97x28"&&(t.innerHTML=r),u=E(k),D&&D.l(k),a=E(k),o=c(k,"DIV",{class:!0});var I=_(o);d=c(I,"P",{});var N=_(d);p=S(N,"ğŸ” ä½¿ç”¨ "),m=S(N,h),N.forEach(f),b=E(I),v=c(I,"P",{});var V=_(v);g=S(V,"ğŸ“ æ”¾å¤§å€æ•°: "),C=S(V,s[4]),y=S(V,"x"),V.forEach(f),I.forEach(f),k.forEach(f),this.h()},h(){n(t,"class","flex items-center gap-3"),n(o,"class","text-xs text-text-secondary"),n(e,"class","p-4 bg-primary/10 border border-primary/30 rounded-lg space-y-3")},m(F,k){j(F,e,k),l(e,t),l(e,u),D&&D.m(e,null),l(e,a),l(e,o),l(o,d),l(d,p),l(d,m),l(o,b),l(o,v),l(v,g),l(v,C),l(v,y)},p(F,k){var I;F[8]>0?D?D.p(F,k):(D=jr(F),D.c(),D.m(e,a)):D&&(D.d(1),D=null),k&8&&h!==(h=(((I=F[10].find(F[20]))==null?void 0:I.label)||F[3])+"")&&ne(m,h),k&16&&ne(C,F[4])},d(F){F&&f(e),D&&D.d()}}}function jr(s){let e,t,r,u,a,o,d,p,h,m;function b(C,y){return C[8]<50?wu:C[8]<95?yu:Cu}let v=b(s),g=v(s);return{c(){e=i("div"),t=i("div"),r=i("div"),u=x(),a=i("div"),o=i("span"),d=L(s[8]),p=L("%"),h=x(),m=i("span"),g.c(),this.h()},l(C){e=c(C,"DIV",{class:!0});var y=_(e);t=c(y,"DIV",{class:!0});var D=_(t);r=c(D,"DIV",{class:!0,style:!0}),_(r).forEach(f),D.forEach(f),u=E(y),a=c(y,"DIV",{class:!0});var T=_(a);o=c(T,"SPAN",{});var F=_(o);d=S(F,s[8]),p=S(F,"%"),F.forEach(f),h=E(T),m=c(T,"SPAN",{});var k=_(m);g.l(k),k.forEach(f),T.forEach(f),y.forEach(f),this.h()},h(){n(r,"class","bg-gradient-to-r from-primary to-success h-2.5 rounded-full transition-all duration-500 ease-out"),zt(r,"width",s[8]+"%"),n(t,"class","w-full bg-surface-elevated rounded-full h-2.5 overflow-hidden"),n(a,"class","flex justify-between text-xs text-text-secondary"),n(e,"class","space-y-1")},m(C,y){j(C,e,y),l(e,t),l(t,r),l(e,u),l(e,a),l(a,o),l(o,d),l(o,p),l(a,h),l(a,m),g.m(m,null)},p(C,y){y&256&&zt(r,"width",C[8]+"%"),y&256&&ne(d,C[8]),v!==(v=b(C))&&(g.d(1),g=v(C),g&&(g.c(),g.m(m,null)))},d(C){C&&f(e),g.d()}}}function Cu(s){let e;return{c(){e=L("å®Œæˆï¼")},l(t){e=S(t,"å®Œæˆï¼")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function yu(s){let e;return{c(){e=L("å³å°†å®Œæˆ...")},l(t){e=S(t,"å³å°†å®Œæˆ...")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function wu(s){let e;return{c(){e=L("å¤„ç†ä¸­...")},l(t){e=S(t,"å¤„ç†ä¸­...")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Du(s){let e;return{c(){e=L("å¼€å§‹æ”¾å¤§")},l(t){e=S(t,"å¼€å§‹æ”¾å¤§")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function ku(s){let e,t=`<div class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></div>
          æ”¾å¤§ä¸­...`;return{c(){e=i("span"),e.innerHTML=t,this.h()},l(r){e=c(r,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-g8fiui"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center justify-center gap-2")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Hr(s){var N;let e,t,r,u="âœ¨ æ”¾å¤§ç»“æœ",a,o,d="ä¸‹è½½",p,h,m,b,v,g,C,y,D=(((N=s[10].find(s[21]))==null?void 0:N.label)||s[3])+"",T,F,k,I;return{c(){e=i("div"),t=i("div"),r=i("h4"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),h=i("img"),b=x(),v=i("p"),g=L("å›¾åƒå·²æ”¾å¤§ "),C=L(s[4]),y=L("xï¼ˆä½¿ç”¨ "),T=L(D),F=L("ï¼‰"),this.h()},l(V){e=c(V,"DIV",{class:!0});var w=_(e);t=c(w,"DIV",{class:!0});var P=_(t);r=c(P,"H4",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-o1kjz4"&&(r.textContent=u),a=E(P),o=c(P,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-zfo8qh"&&(o.textContent=d),P.forEach(f),p=E(w),h=c(w,"IMG",{src:!0,alt:!0,class:!0}),b=E(w),v=c(w,"P",{class:!0});var B=_(v);g=S(B,"å›¾åƒå·²æ”¾å¤§ "),C=S(B,s[4]),y=S(B,"xï¼ˆä½¿ç”¨ "),T=S(B,D),F=S(B,"ï¼‰"),B.forEach(f),w.forEach(f),this.h()},h(){n(r,"class","text-sm font-semibold text-text-primary"),n(o,"class","px-3 py-1 text-sm bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors"),n(t,"class","flex items-center justify-between"),Jt(h.src,m=s[6])||n(h,"src",m),n(h,"alt","æ”¾å¤§ç»“æœ"),n(h,"class","w-full h-auto rounded-lg border border-border"),n(v,"class","text-xs text-text-secondary"),n(e,"class","space-y-3 p-4 bg-surface-elevated border border-success/30 rounded-lg")},m(V,w){j(V,e,w),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),l(e,h),l(e,b),l(e,v),l(v,g),l(v,C),l(v,y),l(v,T),l(v,F),k||(I=z(o,"click",s[13]),k=!0)},p(V,w){var P;w&64&&!Jt(h.src,m=V[6])&&n(h,"src",m),w&16&&ne(C,V[4]),w&8&&D!==(D=(((P=V[10].find(V[21]))==null?void 0:P.label)||V[3])+"")&&ne(T,D)},d(V){V&&f(e),k=!1,I()}}}function Fu(s){let e,t,r,u="ğŸ” å›¾åƒæ”¾å¤§ (Upscale)",a,o,d="é‡ç½®",p,h,m='<p class="text-sm text-text-primary">ğŸ’¡ <strong>å›¾åƒæ”¾å¤§</strong> ä½¿ç”¨ AI ç®—æ³•æå‡å›¾åƒåˆ†è¾¨ç‡ï¼Œä¿æŒç»†èŠ‚æ¸…æ™°ã€‚</p>',b,v,g,C="é€‰æ‹©å›¾åƒ",y,D,T,F,k=s[0]?"æ›´æ¢å›¾åƒ":"é€‰æ‹©å›¾åƒ",I,N,V,w,P,B="å‚æ•°é…ç½®",U,H,A,M="æ”¾å¤§ç®—æ³•",R,q,W,Z,K="<p>ğŸ’¡ <strong>Real-ESRGAN</strong>: AI å¢å¼ºï¼Œæœ€é«˜è´¨é‡ï¼Œé€‚åˆç…§ç‰‡å’Œè‰ºæœ¯ä½œå“</p> <p>ğŸ’¡ <strong>Lanczos</strong>: ä¼ ç»Ÿç®—æ³•ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆå¿«é€Ÿé¢„è§ˆ</p> <p>ğŸ’¡ <strong>Bicubic</strong>: æ ‡å‡†æ’å€¼ï¼Œå¹³è¡¡è´¨é‡å’Œé€Ÿåº¦</p>",G,X,pe,Y,Q="æ”¾å¤§å€æ•°",le,re,ae=s[4].toFixed(1)+"",we,J,Ie,be,Se,ze,et,Pe,Oe,We,Ae,Re,Xe,at,me,ke,qe,de=s[0]&&Or(s),Qe=Gt(s[10]),Me=[];for(let oe=0;oe<Qe.length;oe+=1)Me[oe]=Mr(Sr(s,Qe,oe));let Ee=s[5]&&Ur(s);function Ke(oe,_e){return oe[5]?ku:Du}let ce=Ke(s),Ue=ce(s),Fe=s[7]&&s[6]&&Hr(s);return{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),h=i("div"),h.innerHTML=m,b=x(),v=i("div"),g=i("label"),g.textContent=C,y=x(),D=i("input"),T=x(),F=i("button"),I=L(k),N=x(),de&&de.c(),V=x(),w=i("div"),P=i("h4"),P.textContent=B,U=x(),H=i("div"),A=i("label"),A.textContent=M,R=x(),q=i("select");for(let oe=0;oe<Me.length;oe+=1)Me[oe].c();W=x(),Z=i("div"),Z.innerHTML=K,G=x(),X=i("div"),pe=i("div"),Y=i("label"),Y.textContent=Q,le=x(),re=i("span"),we=L(ae),J=L("x"),Ie=x(),be=i("input"),Se=x(),ze=i("p"),et=L("å›¾åƒå°†è¢«æ”¾å¤§åˆ°åŸå§‹å°ºå¯¸çš„ "),Pe=L(s[4]),Oe=L("x"),We=x(),Ee&&Ee.c(),Ae=x(),Re=i("div"),Xe=i("button"),Ue.c(),me=x(),Fe&&Fe.c(),this.h()},l(oe){e=c(oe,"DIV",{class:!0});var _e=_(e);t=c(_e,"DIV",{class:!0});var ie=_(t);r=c(ie,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1u0ykvj"&&(r.textContent=u),a=E(ie),o=c(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-1qqk7vf"&&(o.textContent=d),ie.forEach(f),p=E(_e),h=c(_e,"DIV",{class:!0,"data-svelte-h":!0}),O(h)!=="svelte-1y5pg7t"&&(h.innerHTML=m),b=E(_e),v=c(_e,"DIV",{class:!0});var $=_(v);g=c($,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(g)!=="svelte-18ekc8t"&&(g.textContent=C),y=E($),D=c($,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),T=E($),F=c($,"BUTTON",{class:!0});var fe=_(F);I=S(fe,k),fe.forEach(f),$.forEach(f),N=E(_e),de&&de.l(_e),V=E(_e),w=c(_e,"DIV",{class:!0});var he=_(w);P=c(he,"H4",{class:!0,"data-svelte-h":!0}),O(P)!=="svelte-t1m86p"&&(P.textContent=B),U=E(he),H=c(he,"DIV",{class:!0});var Be=_(H);A=c(Be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(A)!=="svelte-1rt3xs2"&&(A.textContent=M),R=E(Be),q=c(Be,"SELECT",{id:!0,class:!0});var Ge=_(q);for(let ye=0;ye<Me.length;ye+=1)Me[ye].l(Ge);Ge.forEach(f),W=E(Be),Z=c(Be,"DIV",{class:!0,"data-svelte-h":!0}),O(Z)!=="svelte-196f8jf"&&(Z.innerHTML=K),Be.forEach(f),G=E(he),X=c(he,"DIV",{class:!0});var lt=_(X);pe=c(lt,"DIV",{class:!0});var it=_(pe);Y=c(it,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(Y)!=="svelte-13xq13k"&&(Y.textContent=Q),le=E(it),re=c(it,"SPAN",{class:!0});var He=_(re);we=S(He,ae),J=S(He,"x"),He.forEach(f),it.forEach(f),Ie=E(lt),be=c(lt,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Se=E(lt),ze=c(lt,"P",{class:!0});var je=_(ze);et=S(je,"å›¾åƒå°†è¢«æ”¾å¤§åˆ°åŸå§‹å°ºå¯¸çš„ "),Pe=S(je,s[4]),Oe=S(je,"x"),je.forEach(f),lt.forEach(f),he.forEach(f),We=E(_e),Ee&&Ee.l(_e),Ae=E(_e),Re=c(_e,"DIV",{class:!0});var Ze=_(Re);Xe=c(Ze,"BUTTON",{class:!0});var ve=_(Xe);Ue.l(ve),ve.forEach(f),Ze.forEach(f),me=E(_e),Fe&&Fe.l(_e),_e.forEach(f),this.h()},h(){n(r,"class","text-lg font-semibold text-text-primary"),n(o,"class","px-3 py-1 text-sm bg-surface-elevated hover:bg-surface-elevated/80 border border-border rounded-lg text-text-secondary transition-colors"),n(t,"class","flex items-center justify-between mb-4"),n(h,"class","p-3 bg-info/10 border border-info/30 rounded-lg"),n(g,"for","upscale-image-upload"),n(g,"class","block text-sm font-medium text-text-primary"),n(D,"id","upscale-image-upload"),n(D,"type","file"),n(D,"accept","image/*"),n(D,"class","hidden"),n(F,"class","w-full px-4 py-3 bg-surface-elevated hover:bg-surface border border-border text-text-primary rounded-lg transition-colors font-medium"),n(v,"class","space-y-2"),n(P,"class","text-sm font-semibold text-text-primary"),n(A,"for","upscaler-select"),n(A,"class","block text-sm font-medium text-text-primary"),n(q,"id","upscaler-select"),n(q,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary"),s[3]===void 0&&rs(()=>s[18].call(q)),n(Z,"class","text-xs text-text-secondary space-y-1"),n(H,"class","space-y-2"),n(Y,"for","scale-slider"),n(Y,"class","text-sm font-medium text-text-primary"),n(re,"class","text-sm text-text-secondary"),n(pe,"class","flex justify-between items-center"),n(be,"id","scale-slider"),n(be,"type","range"),n(be,"min","1.0"),n(be,"max","4.0"),n(be,"step","0.1"),n(be,"class","w-full svelte-1ap7e0w"),n(ze,"class","text-xs text-text-secondary"),n(X,"class","space-y-2"),n(w,"class","space-y-4 p-4 bg-surface-elevated border border-border rounded-lg"),Xe.disabled=at=s[5]||!s[0],n(Xe,"class","flex-1 px-4 py-3 bg-success hover:bg-success/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(Re,"class","flex gap-3"),n(e,"class","space-y-4")},m(oe,_e){j(oe,e,_e),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),l(e,h),l(e,b),l(e,v),l(v,g),l(v,y),l(v,D),s[15](D),l(v,T),l(v,F),l(F,I),l(e,N),de&&de.m(e,null),l(e,V),l(e,w),l(w,P),l(w,U),l(w,H),l(H,A),l(H,R),l(H,q);for(let ie=0;ie<Me.length;ie+=1)Me[ie]&&Me[ie].m(q,null);yl(q,s[3],!0),l(H,W),l(H,Z),l(w,G),l(w,X),l(X,pe),l(pe,Y),l(pe,le),l(pe,re),l(re,we),l(re,J),l(X,Ie),l(X,be),Ve(be,s[4]),l(X,Se),l(X,ze),l(ze,et),l(ze,Pe),l(ze,Oe),l(e,We),Ee&&Ee.m(e,null),l(e,Ae),l(e,Re),l(Re,Xe),Ue.m(Xe,null),l(e,me),Fe&&Fe.m(e,null),ke||(qe=[z(o,"click",s[14]),z(D,"change",s[11]),z(F,"click",s[16]),z(q,"change",s[18]),z(be,"change",s[19]),z(be,"input",s[19]),z(Xe,"click",s[12])],ke=!0)},p(oe,[_e]){if(_e&1&&k!==(k=oe[0]?"æ›´æ¢å›¾åƒ":"é€‰æ‹©å›¾åƒ")&&ne(I,k),oe[0]?de?de.p(oe,_e):(de=Or(oe),de.c(),de.m(e,V)):de&&(de.d(1),de=null),_e&1024){Qe=Gt(oe[10]);let ie;for(ie=0;ie<Qe.length;ie+=1){const $=Sr(oe,Qe,ie);Me[ie]?Me[ie].p($,_e):(Me[ie]=Mr($),Me[ie].c(),Me[ie].m(q,null))}for(;ie<Me.length;ie+=1)Me[ie].d(1);Me.length=Qe.length}_e&1032&&yl(q,oe[3]),_e&16&&ae!==(ae=oe[4].toFixed(1)+"")&&ne(we,ae),_e&16&&Ve(be,oe[4]),_e&16&&ne(Pe,oe[4]),oe[5]?Ee?Ee.p(oe,_e):(Ee=Ur(oe),Ee.c(),Ee.m(e,Ae)):Ee&&(Ee.d(1),Ee=null),ce!==(ce=Ke(oe))&&(Ue.d(1),Ue=ce(oe),Ue&&(Ue.c(),Ue.m(Xe,null))),_e&33&&at!==(at=oe[5]||!oe[0])&&(Xe.disabled=at),oe[7]&&oe[6]?Fe?Fe.p(oe,_e):(Fe=Hr(oe),Fe.c(),Fe.m(e,null)):Fe&&(Fe.d(1),Fe=null)},i:pt,o:pt,d(oe){oe&&f(e),s[15](null),de&&de.d(),Sl(Me,oe),Ee&&Ee.d(),Ue.d(),Fe&&Fe.d(),ke=!1,Rt(qe)}}}function Iu(s,e,t){let r="",u=null,a,o=null,d="real-esrgan",p=2,h=!1,m="",b=!1,v=0,g;const C=[{value:"real-esrgan",label:"Real-ESRGAN (é«˜è´¨é‡)"},{value:"lanczos",label:"Lanczos (å¿«é€Ÿ)"},{value:"bicubic",label:"Bicubic (æ ‡å‡†)"}];is(()=>{a&&(o=a.getContext("2d"))});function y(A){var W;const R=(W=A.target.files)==null?void 0:W[0];if(!R)return;if(!R.type.startsWith("image/")){_t({type:gt.VALIDATION,message:"è¯·é€‰æ‹©å›¾åƒæ–‡ä»¶",details:"åªæ”¯æŒå›¾åƒæ ¼å¼ï¼ˆPNG, JPG, WebPç­‰ï¼‰",recoverable:!0,suggestions:["é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆçš„å›¾åƒæ–‡ä»¶"]});return}const q=new FileReader;q.onload=Z=>{var G;const K=(G=Z.target)==null?void 0:G.result;t(0,r=K),D(K),nl()},q.onerror=()=>{_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•è¯»å–é€‰æ‹©çš„æ–‡ä»¶",recoverable:!0,suggestions:["å°è¯•é€‰æ‹©å…¶ä»–å›¾åƒæ–‡ä»¶"]})},q.readAsDataURL(R)}function D(A){const M=new Image;M.onload=()=>{t(1,u=M),T()},M.onerror=()=>{_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•åŠ è½½å›¾åƒåˆ°ç”»å¸ƒ",recoverable:!0})},M.src=A}function T(){if(!u||!o)return;const A=u,M=512;let R=A.width,q=A.height;if(R>M||q>M){const W=Math.min(M/R,M/q);R=R*W,q=q*W}t(2,a.width=R,a),t(2,a.height=q,a),o.drawImage(A,0,0,R,q)}async function F(){if(!r){_t({type:gt.VALIDATION,message:"è¯·é€‰æ‹©æºå›¾åƒ",recoverable:!0,suggestions:["ä¸Šä¼ ä¸€å¼ å›¾åƒè¿›è¡Œæ”¾å¤§"]});return}t(5,h=!0),t(8,v=10),nl();try{const A=setInterval(()=>{v<90&&t(8,v+=10)},200),R=await fetch("/api/upscale",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:r,scale:p,upscaler:d})});if(clearInterval(A),!R.ok){const W=await R.json().catch(()=>({}));throw new Error(W.message||`HTTPé”™è¯¯: ${R.status}`)}t(8,v=95);const q=await R.json();if(q.success)t(6,m=q.image),t(7,b=!0),t(8,v=100),setTimeout(()=>{t(8,v=0)},2e3);else throw new Error(q.message||"æ”¾å¤§å¤±è´¥")}catch(A){const M=A instanceof Error?A.message:String(A);let R=["æ£€æŸ¥å›¾åƒæ˜¯å¦æœ‰æ•ˆ","å°è¯•ä½¿ç”¨ä¸åŒçš„Upscaler","å°è¯•è¾ƒå°çš„æ”¾å¤§å€æ•°"];M.includes("HTTPé”™è¯¯: 400")?R=["æ£€æŸ¥è¾“å…¥å‚æ•°æ˜¯å¦æœ‰æ•ˆ","ç¡®ä¿å›¾åƒæ ¼å¼æ­£ç¡®","å°è¯•ä½¿ç”¨ä¸åŒçš„å›¾åƒ"]:M.includes("HTTPé”™è¯¯: 500")?R=["åç«¯æœåŠ¡å¯èƒ½é‡åˆ°é—®é¢˜","æ£€æŸ¥åç«¯æ—¥å¿—","å°è¯•é‡å¯åç«¯æœåŠ¡"]:M.includes("Failed to fetch")||M.includes("NetworkError")?R=["æ£€æŸ¥ç½‘ç»œè¿æ¥","ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ","æ£€æŸ¥é˜²ç«å¢™è®¾ç½®"]:M.includes("Pipeline")&&(R=["Upscale Pipeline å¯èƒ½æœªåˆå§‹åŒ–","æ£€æŸ¥åç«¯é…ç½®","æŸ¥çœ‹åç«¯å¯åŠ¨æ—¥å¿—"]),_t({type:gt.API,message:"å›¾åƒæ”¾å¤§å¤±è´¥",details:M,recoverable:!0,suggestions:R}),console.error("Upscaleå¤±è´¥:",A)}finally{t(5,h=!1),b||t(8,v=0)}}function k(){if(!m)return;const A=document.createElement("a");A.href=m,A.download=`upscaled_${p}x_${Date.now()}.png`,A.click()}function I(){t(0,r=""),t(6,m=""),t(7,b=!1),t(3,d="real-esrgan"),t(4,p=2),t(8,v=0),nl()}function N(A){ul[A?"unshift":"push"](()=>{g=A,t(9,g)})}const V=()=>g.click();function w(A){ul[A?"unshift":"push"](()=>{a=A,t(2,a)})}function P(){d=ss(this),t(3,d),t(10,C)}function B(){p=Ht(this.value),t(4,p)}return[r,u,a,d,p,h,m,b,v,g,C,y,F,k,I,N,V,w,P,B,A=>A.value===d,A=>A.value===d]}class Au extends Al{constructor(e){super(),Tl(this,e,Iu,Fu,Il,{})}}function zr(s,e,t){const r=s.slice();return r[29]=e[t],r}function Rr(s,e,t){const r=s.slice();return r[29]=e[t],r}function qr(s){var g,C;let e,t,r,u,a,o,d=(((g=s[1])==null?void 0:g.width)||0)+"",p,h,m=(((C=s[1])==null?void 0:C.height)||0)+"",b,v;return{c(){e=i("div"),t=i("div"),r=i("canvas"),u=x(),a=i("p"),o=L("åŸå§‹å°ºå¯¸: "),p=L(d),h=L(" Ã— "),b=L(m),v=L(" px"),this.h()},l(y){e=c(y,"DIV",{class:!0});var D=_(e);t=c(D,"DIV",{class:!0});var T=_(t);r=c(T,"CANVAS",{class:!0,style:!0}),_(r).forEach(f),T.forEach(f),u=E(D),a=c(D,"P",{class:!0});var F=_(a);o=S(F,"åŸå§‹å°ºå¯¸: "),p=S(F,d),h=S(F," Ã— "),b=S(F,m),v=S(F," px"),F.forEach(f),D.forEach(f),this.h()},h(){n(r,"class","w-full h-auto mx-auto"),zt(r,"max-width","100%"),n(t,"class","border border-border rounded-lg overflow-hidden bg-surface-elevated p-4"),n(a,"class","text-xs text-text-secondary"),n(e,"class","space-y-2")},m(y,D){j(y,e,D),l(e,t),l(t,r),s[20](r),l(e,u),l(e,a),l(a,o),l(a,p),l(a,h),l(a,b),l(a,v)},p(y,D){var T,F;D[0]&2&&d!==(d=(((T=y[1])==null?void 0:T.width)||0)+"")&&ne(p,d),D[0]&2&&m!==(m=(((F=y[1])==null?void 0:F.height)||0)+"")&&ne(b,m)},d(y){y&&f(e),s[20](null)}}}function Gr(s){let e,t=s[29].label+"",r;return{c(){e=i("option"),r=L(t),this.h()},l(u){e=c(u,"OPTION",{});var a=_(e);r=S(a,t),a.forEach(f),this.h()},h(){e.__value=s[29].value,Ve(e,e.__value)},m(u,a){j(u,e,a),l(e,r)},p:pt,d(u){u&&f(e)}}}function Wr(s){let e,t,r,u=s[29].label+"",a,o,d=s[29].description+"",p;return{c(){e=i("p"),t=L("ğŸ’¡ "),r=i("strong"),a=L(u),o=L(": "),p=L(d)},l(h){e=c(h,"P",{});var m=_(e);t=S(m,"ğŸ’¡ "),r=c(m,"STRONG",{});var b=_(r);a=S(b,u),b.forEach(f),o=S(m,": "),p=S(m,d),m.forEach(f)},m(h,m){j(h,e,m),l(e,t),l(e,r),l(r,a),l(e,o),l(e,p)},p:pt,d(h){h&&f(e)}}}function Xr(s){let e,t=s[29].value===s[3]&&Wr(s);return{c(){t&&t.c(),e=Wl()},l(r){t&&t.l(r),e=Wl()},m(r,u){t&&t.m(r,u),j(r,e,u)},p(r,u){r[29].value===r[3]?t?t.p(r,u):(t=Wr(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(r){r&&f(e),t&&t.d(r)}}}function Tu(s){let e;return{c(){e=L("å¼ºåŠ›ä¿®å¤ï¼Œå¯èƒ½æ”¹å˜é¢éƒ¨ç‰¹å¾")},l(t){e=S(t,"å¼ºåŠ›ä¿®å¤ï¼Œå¯èƒ½æ”¹å˜é¢éƒ¨ç‰¹å¾")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Bu(s){let e;return{c(){e=L("å¹³è¡¡ä¿®å¤ï¼Œæ¨èè®¾ç½®")},l(t){e=S(t,"å¹³è¡¡ä¿®å¤ï¼Œæ¨èè®¾ç½®")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Pu(s){let e;return{c(){e=L("è½»å¾®ä¿®å¤ï¼Œä¿ç•™æ›´å¤šåŸå§‹ç‰¹å¾")},l(t){e=S(t,"è½»å¾®ä¿®å¤ï¼Œä¿ç•™æ›´å¤šåŸå§‹ç‰¹å¾")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Zr(s){var F;let e,t,r='<div class="animate-spin h-5 w-5 border-2 border-primary border-t-transparent rounded-full"></div> <span class="text-sm font-medium text-text-primary">æ­£åœ¨ä¿®å¤é¢éƒ¨...</span>',u,a,o,d,p,h=(((F=s[12].find(s[23]))==null?void 0:F.label)||s[3])+"",m,b,v,g,C=(s[4]*100).toFixed(0)+"",y,D,T=s[8]>0&&Yr(s);return{c(){e=i("div"),t=i("div"),t.innerHTML=r,u=x(),T&&T.c(),a=x(),o=i("div"),d=i("p"),p=L("ğŸ¤– ä½¿ç”¨ "),m=L(h),b=x(),v=i("p"),g=L("ğŸ’ª ä¿®å¤å¼ºåº¦: "),y=L(C),D=L("%"),this.h()},l(k){e=c(k,"DIV",{class:!0});var I=_(e);t=c(I,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1ciqurd"&&(t.innerHTML=r),u=E(I),T&&T.l(I),a=E(I),o=c(I,"DIV",{class:!0});var N=_(o);d=c(N,"P",{});var V=_(d);p=S(V,"ğŸ¤– ä½¿ç”¨ "),m=S(V,h),V.forEach(f),b=E(N),v=c(N,"P",{});var w=_(v);g=S(w,"ğŸ’ª ä¿®å¤å¼ºåº¦: "),y=S(w,C),D=S(w,"%"),w.forEach(f),N.forEach(f),I.forEach(f),this.h()},h(){n(t,"class","flex items-center gap-3"),n(o,"class","text-xs text-text-secondary"),n(e,"class","p-4 bg-primary/10 border border-primary/30 rounded-lg space-y-3")},m(k,I){j(k,e,I),l(e,t),l(e,u),T&&T.m(e,null),l(e,a),l(e,o),l(o,d),l(d,p),l(d,m),l(o,b),l(o,v),l(v,g),l(v,y),l(v,D)},p(k,I){var N;k[8]>0?T?T.p(k,I):(T=Yr(k),T.c(),T.m(e,a)):T&&(T.d(1),T=null),I[0]&8&&h!==(h=(((N=k[12].find(k[23]))==null?void 0:N.label)||k[3])+"")&&ne(m,h),I[0]&16&&C!==(C=(k[4]*100).toFixed(0)+"")&&ne(y,C)},d(k){k&&f(e),T&&T.d()}}}function Yr(s){let e,t,r,u,a,o,d,p,h,m;function b(C,y){return C[8]<50?Lu:C[8]<95?Nu:Vu}let v=b(s),g=v(s);return{c(){e=i("div"),t=i("div"),r=i("div"),u=x(),a=i("div"),o=i("span"),d=L(s[8]),p=L("%"),h=x(),m=i("span"),g.c(),this.h()},l(C){e=c(C,"DIV",{class:!0});var y=_(e);t=c(y,"DIV",{class:!0});var D=_(t);r=c(D,"DIV",{class:!0,style:!0}),_(r).forEach(f),D.forEach(f),u=E(y),a=c(y,"DIV",{class:!0});var T=_(a);o=c(T,"SPAN",{});var F=_(o);d=S(F,s[8]),p=S(F,"%"),F.forEach(f),h=E(T),m=c(T,"SPAN",{});var k=_(m);g.l(k),k.forEach(f),T.forEach(f),y.forEach(f),this.h()},h(){n(r,"class","bg-gradient-to-r from-primary to-success h-2.5 rounded-full transition-all duration-500 ease-out"),zt(r,"width",s[8]+"%"),n(t,"class","w-full bg-surface-elevated rounded-full h-2.5 overflow-hidden"),n(a,"class","flex justify-between text-xs text-text-secondary"),n(e,"class","space-y-1")},m(C,y){j(C,e,y),l(e,t),l(t,r),l(e,u),l(e,a),l(a,o),l(o,d),l(o,p),l(a,h),l(a,m),g.m(m,null)},p(C,y){y[0]&256&&zt(r,"width",C[8]+"%"),y[0]&256&&ne(d,C[8]),v!==(v=b(C))&&(g.d(1),g=v(C),g&&(g.c(),g.m(m,null)))},d(C){C&&f(e),g.d()}}}function Vu(s){let e;return{c(){e=L("å®Œæˆï¼")},l(t){e=S(t,"å®Œæˆï¼")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Nu(s){let e;return{c(){e=L("ä¿®å¤ä¸­...")},l(t){e=S(t,"ä¿®å¤ä¸­...")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Lu(s){let e;return{c(){e=L("æ£€æµ‹é¢éƒ¨...")},l(t){e=S(t,"æ£€æµ‹é¢éƒ¨...")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Su(s){let e;return{c(){e=L("å¼€å§‹ä¿®å¤")},l(t){e=S(t,"å¼€å§‹ä¿®å¤")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Ou(s){let e,t=`<div class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></div>
          ä¿®å¤ä¸­...`;return{c(){e=i("span"),e.innerHTML=t,this.h()},l(r){e=c(r,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1p8cd34"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center justify-center gap-2")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Jr(s){var A;let e,t,r,u="âœ¨ ä¿®å¤ç»“æœ",a,o,d,p=s[9]?"éšè—å¯¹æ¯”":"æ˜¾ç¤ºå¯¹æ¯”",h,m,b,v="ä¸‹è½½",g,C,y,D,T=(((A=s[12].find(s[25]))==null?void 0:A.label)||s[3])+"",F,k,I=(s[4]*100).toFixed(0)+"",N,V,w,P;function B(M,R){return M[9]?Uu:Mu}let U=B(s),H=U(s);return{c(){e=i("div"),t=i("div"),r=i("h4"),r.textContent=u,a=x(),o=i("div"),d=i("button"),h=L(p),m=x(),b=i("button"),b.textContent=v,g=x(),H.c(),C=x(),y=i("p"),D=L("ä½¿ç”¨ "),F=L(T),k=L(" ä¿®å¤ï¼ˆå¼ºåº¦: "),N=L(I),V=L("%ï¼‰"),this.h()},l(M){e=c(M,"DIV",{class:!0});var R=_(e);t=c(R,"DIV",{class:!0});var q=_(t);r=c(q,"H4",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-139qdm2"&&(r.textContent=u),a=E(q),o=c(q,"DIV",{class:!0});var W=_(o);d=c(W,"BUTTON",{class:!0});var Z=_(d);h=S(Z,p),Z.forEach(f),m=E(W),b=c(W,"BUTTON",{class:!0,"data-svelte-h":!0}),O(b)!=="svelte-dbtoop"&&(b.textContent=v),W.forEach(f),q.forEach(f),g=E(R),H.l(R),C=E(R),y=c(R,"P",{class:!0});var K=_(y);D=S(K,"ä½¿ç”¨ "),F=S(K,T),k=S(K," ä¿®å¤ï¼ˆå¼ºåº¦: "),N=S(K,I),V=S(K,"%ï¼‰"),K.forEach(f),R.forEach(f),this.h()},h(){n(r,"class","text-sm font-semibold text-text-primary"),n(d,"class","px-3 py-1 text-sm bg-surface hover:bg-surface/80 border border-border text-text-primary rounded-lg transition-colors"),n(b,"class","px-3 py-1 text-sm bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors"),n(o,"class","flex gap-2"),n(t,"class","flex items-center justify-between"),n(y,"class","text-xs text-text-secondary"),n(e,"class","space-y-3 p-4 bg-surface-elevated border border-success/30 rounded-lg")},m(M,R){j(M,e,R),l(e,t),l(t,r),l(t,a),l(t,o),l(o,d),l(d,h),l(o,m),l(o,b),l(e,g),H.m(e,null),l(e,C),l(e,y),l(y,D),l(y,F),l(y,k),l(y,N),l(y,V),w||(P=[z(d,"click",s[17]),z(b,"click",s[15])],w=!0)},p(M,R){var q;R[0]&512&&p!==(p=M[9]?"éšè—å¯¹æ¯”":"æ˜¾ç¤ºå¯¹æ¯”")&&ne(h,p),U===(U=B(M))&&H?H.p(M,R):(H.d(1),H=U(M),H&&(H.c(),H.m(e,C))),R[0]&8&&T!==(T=(((q=M[12].find(M[25]))==null?void 0:q.label)||M[3])+"")&&ne(F,T),R[0]&16&&I!==(I=(M[4]*100).toFixed(0)+"")&&ne(N,I)},d(M){M&&f(e),H.d(),w=!1,Rt(P)}}}function Mu(s){let e,t;return{c(){e=i("img"),this.h()},l(r){e=c(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Jt(e.src,t=s[6])||n(e,"src",t),n(e,"alt","ä¿®å¤ç»“æœ"),n(e,"class","w-full h-auto rounded-lg border border-border")},m(r,u){j(r,e,u)},p(r,u){u[0]&64&&!Jt(e.src,t=r[6])&&n(e,"src",t)},d(r){r&&f(e)}}}function Uu(s){let e,t,r,u,a,o,d,p,h="åŸå§‹",m,b,v,g,C,y,D="ä¿®å¤å",T,F,k,I='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-acnh46"><path d="M15 18l-6-6 6-6"></path><path d="M9 18l6-6-6-6"></path></svg>',N,V,w,P,B,U="<span>â† åŸå§‹</span> <span>ä¿®å¤å â†’</span>",H,A;return{c(){e=i("div"),t=i("div"),r=i("div"),u=i("div"),a=i("img"),d=x(),p=i("div"),p.textContent=h,m=x(),b=i("div"),v=i("img"),C=x(),y=i("div"),y.textContent=D,T=x(),F=i("div"),k=i("div"),k.innerHTML=I,N=x(),V=i("div"),w=i("input"),P=x(),B=i("div"),B.innerHTML=U,this.h()},l(M){e=c(M,"DIV",{class:!0});var R=_(e);t=c(R,"DIV",{class:!0});var q=_(t);r=c(q,"DIV",{class:!0});var W=_(r);u=c(W,"DIV",{class:!0});var Z=_(u);a=c(Z,"IMG",{src:!0,alt:!0,class:!0}),d=E(Z),p=c(Z,"DIV",{class:!0,"data-svelte-h":!0}),O(p)!=="svelte-1cvgke2"&&(p.textContent=h),Z.forEach(f),m=E(W),b=c(W,"DIV",{class:!0,style:!0});var K=_(b);v=c(K,"IMG",{src:!0,alt:!0,class:!0}),C=E(K),y=c(K,"DIV",{class:!0,"data-svelte-h":!0}),O(y)!=="svelte-1ox40li"&&(y.textContent=D),K.forEach(f),T=E(W),F=c(W,"DIV",{class:!0,style:!0});var G=_(F);k=c(G,"DIV",{class:!0,"data-svelte-h":!0}),O(k)!=="svelte-ugxjbq"&&(k.innerHTML=I),G.forEach(f),W.forEach(f),q.forEach(f),N=E(R),V=c(R,"DIV",{class:!0});var X=_(V);w=c(X,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),P=E(X),B=c(X,"DIV",{class:!0,"data-svelte-h":!0}),O(B)!=="svelte-3tgjdt"&&(B.innerHTML=U),X.forEach(f),R.forEach(f),this.h()},h(){Jt(a.src,o=s[0])||n(a,"src",o),n(a,"alt","åŸå§‹å›¾åƒ"),n(a,"class","w-full h-auto svelte-acnh46"),n(p,"class","comparison-label left svelte-acnh46"),n(u,"class","comparison-image original svelte-acnh46"),Jt(v.src,g=s[6])||n(v,"src",g),n(v,"alt","ä¿®å¤å"),n(v,"class","w-full h-auto svelte-acnh46"),n(y,"class","comparison-label right svelte-acnh46"),n(b,"class","comparison-image restored svelte-acnh46"),zt(b,"clip-path","inset(0 "+(100-s[10])+"% 0 0)"),n(k,"class","comparison-handle svelte-acnh46"),n(F,"class","comparison-divider svelte-acnh46"),zt(F,"left",s[10]+"%"),n(r,"class","comparison-container svelte-acnh46"),n(t,"class","relative border border-border rounded-lg overflow-hidden bg-surface"),n(w,"type","range"),n(w,"min","0"),n(w,"max","100"),n(w,"step","1"),n(w,"class","w-full svelte-acnh46"),n(B,"class","flex justify-between text-xs text-text-secondary"),n(V,"class","space-y-2"),n(e,"class","space-y-3")},m(M,R){j(M,e,R),l(e,t),l(t,r),l(r,u),l(u,a),l(u,d),l(u,p),l(r,m),l(r,b),l(b,v),l(b,C),l(b,y),l(r,T),l(r,F),l(F,k),l(e,N),l(e,V),l(V,w),Ve(w,s[10]),l(V,P),l(V,B),H||(A=[z(w,"change",s[24]),z(w,"input",s[24])],H=!0)},p(M,R){R[0]&1&&!Jt(a.src,o=M[0])&&n(a,"src",o),R[0]&64&&!Jt(v.src,g=M[6])&&n(v,"src",g),R[0]&1024&&zt(b,"clip-path","inset(0 "+(100-M[10])+"% 0 0)"),R[0]&1024&&zt(F,"left",M[10]+"%"),R[0]&1024&&Ve(w,M[10])},d(M){M&&f(e),H=!1,Rt(A)}}}function ju(s){let e,t,r,u="ğŸ‘¤ é¢éƒ¨ä¿®å¤ (Face Restore)",a,o,d="é‡ç½®",p,h,m='<p class="text-sm text-text-primary">ğŸ’¡ <strong>é¢éƒ¨ä¿®å¤</strong> ä½¿ç”¨ AI æŠ€æœ¯ä¿®å¤å’Œå¢å¼ºäººè„¸ç»†èŠ‚ï¼Œæ”¹å–„æ¨¡ç³Šæˆ–ä½è´¨é‡çš„é¢éƒ¨å›¾åƒã€‚</p>',b,v,g,C="é€‰æ‹©å›¾åƒ",y,D,T,F,k=s[0]?"æ›´æ¢å›¾åƒ":"é€‰æ‹©å›¾åƒ",I,N,V,w,P,B="å‚æ•°é…ç½®",U,H,A,M="ä¿®å¤æ¨¡å‹",R,q,W,Z,K,G,X,pe,Y="ä¿®å¤å¼ºåº¦",Q,le,re=s[4].toFixed(2)+"",ae,we,J,Ie,be,Se="<span>ä¿ç•™åŸè²Œ</span> <span>å®Œå…¨ä¿®å¤</span>",ze,et,Pe,Oe,We,Ae,Re,Xe,at,me,ke=s[0]&&qr(s),qe=Gt(s[12]),de=[];for(let $=0;$<qe.length;$+=1)de[$]=Gr(Rr(s,qe,$));let Qe=Gt(s[12]),Me=[];for(let $=0;$<Qe.length;$+=1)Me[$]=Xr(zr(s,Qe,$));function Ee($,fe){return $[4]<.3?Pu:$[4]<.7?Bu:Tu}let Ke=Ee(s),ce=Ke(s),Ue=s[5]&&Zr(s);function Fe($,fe){return $[5]?Ou:Su}let oe=Fe(s),_e=oe(s),ie=s[7]&&s[6]&&Jr(s);return{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),h=i("div"),h.innerHTML=m,b=x(),v=i("div"),g=i("label"),g.textContent=C,y=x(),D=i("input"),T=x(),F=i("button"),I=L(k),N=x(),ke&&ke.c(),V=x(),w=i("div"),P=i("h4"),P.textContent=B,U=x(),H=i("div"),A=i("label"),A.textContent=M,R=x(),q=i("select");for(let $=0;$<de.length;$+=1)de[$].c();W=x(),Z=i("div");for(let $=0;$<Me.length;$+=1)Me[$].c();K=x(),G=i("div"),X=i("div"),pe=i("label"),pe.textContent=Y,Q=x(),le=i("span"),ae=L(re),we=x(),J=i("input"),Ie=x(),be=i("div"),be.innerHTML=Se,ze=x(),et=i("p"),ce.c(),Pe=x(),Ue&&Ue.c(),Oe=x(),We=i("div"),Ae=i("button"),_e.c(),Xe=x(),ie&&ie.c(),this.h()},l($){e=c($,"DIV",{class:!0});var fe=_(e);t=c(fe,"DIV",{class:!0});var he=_(t);r=c(he,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-i99arp"&&(r.textContent=u),a=E(he),o=c(he,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-1qqk7vf"&&(o.textContent=d),he.forEach(f),p=E(fe),h=c(fe,"DIV",{class:!0,"data-svelte-h":!0}),O(h)!=="svelte-1e3thy6"&&(h.innerHTML=m),b=E(fe),v=c(fe,"DIV",{class:!0});var Be=_(v);g=c(Be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(g)!=="svelte-s63r60"&&(g.textContent=C),y=E(Be),D=c(Be,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),T=E(Be),F=c(Be,"BUTTON",{class:!0});var Ge=_(F);I=S(Ge,k),Ge.forEach(f),Be.forEach(f),N=E(fe),ke&&ke.l(fe),V=E(fe),w=c(fe,"DIV",{class:!0});var lt=_(w);P=c(lt,"H4",{class:!0,"data-svelte-h":!0}),O(P)!=="svelte-t1m86p"&&(P.textContent=B),U=E(lt),H=c(lt,"DIV",{class:!0});var it=_(H);A=c(it,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(A)!=="svelte-l9s7uc"&&(A.textContent=M),R=E(it),q=c(it,"SELECT",{id:!0,class:!0});var He=_(q);for(let rt=0;rt<de.length;rt+=1)de[rt].l(He);He.forEach(f),W=E(it),Z=c(it,"DIV",{class:!0});var je=_(Z);for(let rt=0;rt<Me.length;rt+=1)Me[rt].l(je);je.forEach(f),it.forEach(f),K=E(lt),G=c(lt,"DIV",{class:!0});var Ze=_(G);X=c(Ze,"DIV",{class:!0});var ve=_(X);pe=c(ve,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(pe)!=="svelte-bwaa7e"&&(pe.textContent=Y),Q=E(ve),le=c(ve,"SPAN",{class:!0});var ye=_(le);ae=S(ye,re),ye.forEach(f),ve.forEach(f),we=E(Ze),J=c(Ze,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Ie=E(Ze),be=c(Ze,"DIV",{class:!0,"data-svelte-h":!0}),O(be)!=="svelte-p5o1u0"&&(be.innerHTML=Se),ze=E(Ze),et=c(Ze,"P",{class:!0});var Ne=_(et);ce.l(Ne),Ne.forEach(f),Ze.forEach(f),lt.forEach(f),Pe=E(fe),Ue&&Ue.l(fe),Oe=E(fe),We=c(fe,"DIV",{class:!0});var mt=_(We);Ae=c(mt,"BUTTON",{class:!0});var st=_(Ae);_e.l(st),st.forEach(f),mt.forEach(f),Xe=E(fe),ie&&ie.l(fe),fe.forEach(f),this.h()},h(){n(r,"class","text-lg font-semibold text-text-primary"),n(o,"class","px-3 py-1 text-sm bg-surface-elevated hover:bg-surface-elevated/80 border border-border rounded-lg text-text-secondary transition-colors"),n(t,"class","flex items-center justify-between mb-4"),n(h,"class","p-3 bg-info/10 border border-info/30 rounded-lg"),n(g,"for","face-restore-image-upload"),n(g,"class","block text-sm font-medium text-text-primary"),n(D,"id","face-restore-image-upload"),n(D,"type","file"),n(D,"accept","image/*"),n(D,"class","hidden"),n(F,"class","w-full px-4 py-3 bg-surface-elevated hover:bg-surface border border-border text-text-primary rounded-lg transition-colors font-medium"),n(v,"class","space-y-2"),n(P,"class","text-sm font-semibold text-text-primary"),n(A,"for","model-select"),n(A,"class","block text-sm font-medium text-text-primary"),n(q,"id","model-select"),n(q,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary"),s[3]===void 0&&rs(()=>s[21].call(q)),n(Z,"class","text-xs text-text-secondary space-y-1"),n(H,"class","space-y-2"),n(pe,"for","strength-slider"),n(pe,"class","text-sm font-medium text-text-primary"),n(le,"class","text-sm text-text-secondary"),n(X,"class","flex justify-between items-center"),n(J,"id","strength-slider"),n(J,"type","range"),n(J,"min","0.0"),n(J,"max","1.0"),n(J,"step","0.05"),n(J,"class","w-full svelte-acnh46"),n(be,"class","flex justify-between text-xs text-text-secondary"),n(et,"class","text-xs text-text-secondary"),n(G,"class","space-y-2"),n(w,"class","space-y-4 p-4 bg-surface-elevated border border-border rounded-lg"),Ae.disabled=Re=s[5]||!s[0],n(Ae,"class","flex-1 px-4 py-3 bg-success hover:bg-success/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(We,"class","flex gap-3"),n(e,"class","space-y-4")},m($,fe){j($,e,fe),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),l(e,h),l(e,b),l(e,v),l(v,g),l(v,y),l(v,D),s[18](D),l(v,T),l(v,F),l(F,I),l(e,N),ke&&ke.m(e,null),l(e,V),l(e,w),l(w,P),l(w,U),l(w,H),l(H,A),l(H,R),l(H,q);for(let he=0;he<de.length;he+=1)de[he]&&de[he].m(q,null);yl(q,s[3],!0),l(H,W),l(H,Z);for(let he=0;he<Me.length;he+=1)Me[he]&&Me[he].m(Z,null);l(w,K),l(w,G),l(G,X),l(X,pe),l(X,Q),l(X,le),l(le,ae),l(G,we),l(G,J),Ve(J,s[4]),l(G,Ie),l(G,be),l(G,ze),l(G,et),ce.m(et,null),l(e,Pe),Ue&&Ue.m(e,null),l(e,Oe),l(e,We),l(We,Ae),_e.m(Ae,null),l(e,Xe),ie&&ie.m(e,null),at||(me=[z(o,"click",s[16]),z(D,"change",s[13]),z(F,"click",s[19]),z(q,"change",s[21]),z(J,"change",s[22]),z(J,"input",s[22]),z(Ae,"click",s[14])],at=!0)},p($,fe){if(fe[0]&1&&k!==(k=$[0]?"æ›´æ¢å›¾åƒ":"é€‰æ‹©å›¾åƒ")&&ne(I,k),$[0]?ke?ke.p($,fe):(ke=qr($),ke.c(),ke.m(e,V)):ke&&(ke.d(1),ke=null),fe[0]&4096){qe=Gt($[12]);let he;for(he=0;he<qe.length;he+=1){const Be=Rr($,qe,he);de[he]?de[he].p(Be,fe):(de[he]=Gr(Be),de[he].c(),de[he].m(q,null))}for(;he<de.length;he+=1)de[he].d(1);de.length=qe.length}if(fe[0]&4104&&yl(q,$[3]),fe[0]&4104){Qe=Gt($[12]);let he;for(he=0;he<Qe.length;he+=1){const Be=zr($,Qe,he);Me[he]?Me[he].p(Be,fe):(Me[he]=Xr(Be),Me[he].c(),Me[he].m(Z,null))}for(;he<Me.length;he+=1)Me[he].d(1);Me.length=Qe.length}fe[0]&16&&re!==(re=$[4].toFixed(2)+"")&&ne(ae,re),fe[0]&16&&Ve(J,$[4]),Ke!==(Ke=Ee($))&&(ce.d(1),ce=Ke($),ce&&(ce.c(),ce.m(et,null))),$[5]?Ue?Ue.p($,fe):(Ue=Zr($),Ue.c(),Ue.m(e,Oe)):Ue&&(Ue.d(1),Ue=null),oe!==(oe=Fe($))&&(_e.d(1),_e=oe($),_e&&(_e.c(),_e.m(Ae,null))),fe[0]&33&&Re!==(Re=$[5]||!$[0])&&(Ae.disabled=Re),$[7]&&$[6]?ie?ie.p($,fe):(ie=Jr($),ie.c(),ie.m(e,null)):ie&&(ie.d(1),ie=null)},i:pt,o:pt,d($){$&&f(e),s[18](null),ke&&ke.d(),Sl(de,$),Sl(Me,$),ce.d(),Ue&&Ue.d(),_e.d(),ie&&ie.d(),at=!1,Rt(me)}}}function Hu(s,e,t){let r="",u=null,a,o=null,d="codeformer",p=.8,h=!1,m="",b=!1,v=0,g=!1,C=50,y;const D=[{value:"codeformer",label:"CodeFormer (æ¨è)",description:"æœ€æ–°æŠ€æœ¯ï¼Œæ•ˆæœæœ€ä½³"},{value:"gfpgan",label:"GFPGAN",description:"ç»å…¸æ¨¡å‹ï¼Œé€Ÿåº¦å¿«"}];is(()=>{a&&(o=a.getContext("2d"))});function T(W){var X;const K=(X=W.target.files)==null?void 0:X[0];if(!K)return;if(!K.type.startsWith("image/")){_t({type:gt.VALIDATION,message:"è¯·é€‰æ‹©å›¾åƒæ–‡ä»¶",details:"åªæ”¯æŒå›¾åƒæ ¼å¼ï¼ˆPNG, JPG, WebPç­‰ï¼‰",recoverable:!0,suggestions:["é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆçš„å›¾åƒæ–‡ä»¶"]});return}const G=new FileReader;G.onload=pe=>{var Q;const Y=(Q=pe.target)==null?void 0:Q.result;t(0,r=Y),F(Y),nl()},G.onerror=()=>{_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•è¯»å–é€‰æ‹©çš„æ–‡ä»¶",recoverable:!0,suggestions:["å°è¯•é€‰æ‹©å…¶ä»–å›¾åƒæ–‡ä»¶"]})},G.readAsDataURL(K)}function F(W){const Z=new Image;Z.onload=()=>{t(1,u=Z),k()},Z.onerror=()=>{_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•åŠ è½½å›¾åƒåˆ°ç”»å¸ƒ",recoverable:!0})},Z.src=W}function k(){if(!u||!o)return;const W=u,Z=512;let K=W.width,G=W.height;if(K>Z||G>Z){const X=Math.min(Z/K,Z/G);K=K*X,G=G*X}t(2,a.width=K,a),t(2,a.height=G,a),o.drawImage(W,0,0,K,G)}async function I(){if(!r){_t({type:gt.VALIDATION,message:"è¯·é€‰æ‹©æºå›¾åƒ",recoverable:!0,suggestions:["ä¸Šä¼ ä¸€å¼ åŒ…å«äººè„¸çš„å›¾åƒ"]});return}t(5,h=!0),t(8,v=10),nl();try{const W=setInterval(()=>{v<90&&t(8,v+=10)},300),K=await fetch("/api/face-restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:r,model:d,strength:p})});if(clearInterval(W),!K.ok){const X=await K.json().catch(()=>({}));throw new Error(X.message||`HTTPé”™è¯¯: ${K.status}`)}t(8,v=95);const G=await K.json();if(G.success)t(6,m=G.image),t(7,b=!0),t(9,g=!0),t(8,v=100),setTimeout(()=>{t(8,v=0)},2e3);else throw new Error(G.message||"é¢éƒ¨ä¿®å¤å¤±è´¥")}catch(W){const Z=W instanceof Error?W.message:String(W);let K=["ç¡®ä¿å›¾åƒä¸­åŒ…å«æ¸…æ™°çš„äººè„¸","å°è¯•ä½¿ç”¨ä¸åŒçš„æ¨¡å‹","è°ƒæ•´ä¿®å¤å¼ºåº¦å‚æ•°"];Z.includes("HTTPé”™è¯¯: 400")?K=["æ£€æŸ¥è¾“å…¥å‚æ•°æ˜¯å¦æœ‰æ•ˆ","ç¡®ä¿å›¾åƒæ ¼å¼æ­£ç¡®","ç¡®è®¤å›¾åƒä¸­åŒ…å«äººè„¸"]:Z.includes("HTTPé”™è¯¯: 500")?K=["åç«¯æœåŠ¡å¯èƒ½é‡åˆ°é—®é¢˜","æ£€æŸ¥åç«¯æ—¥å¿—","å°è¯•é‡å¯åç«¯æœåŠ¡"]:Z.includes("Failed to fetch")||Z.includes("NetworkError")?K=["æ£€æŸ¥ç½‘ç»œè¿æ¥","ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ","æ£€æŸ¥é˜²ç«å¢™è®¾ç½®"]:(Z.includes("Pipeline")||Z.includes("model"))&&(K=["é¢éƒ¨ä¿®å¤æ¨¡å‹å¯èƒ½æœªåŠ è½½","æ£€æŸ¥åç«¯é…ç½®","æŸ¥çœ‹åç«¯å¯åŠ¨æ—¥å¿—","ç¡®è®¤æ¨¡å‹æ–‡ä»¶å·²ä¸‹è½½"]),_t({type:gt.API,message:"é¢éƒ¨ä¿®å¤å¤±è´¥",details:Z,recoverable:!0,suggestions:K}),console.error("é¢éƒ¨ä¿®å¤å¤±è´¥:",W)}finally{t(5,h=!1),b||t(8,v=0)}}function N(){if(!m)return;const W=document.createElement("a");W.href=m,W.download=`face_restored_${d}_${Date.now()}.png`,W.click()}function V(){t(0,r=""),t(6,m=""),t(7,b=!1),t(9,g=!1),t(3,d="codeformer"),t(4,p=.8),t(8,v=0),t(10,C=50),nl()}function w(){t(9,g=!g)}function P(W){ul[W?"unshift":"push"](()=>{y=W,t(11,y)})}const B=()=>y.click();function U(W){ul[W?"unshift":"push"](()=>{a=W,t(2,a)})}function H(){d=ss(this),t(3,d),t(12,D)}function A(){p=Ht(this.value),t(4,p)}const M=W=>W.value===d;function R(){C=Ht(this.value),t(10,C)}return[r,u,a,d,p,h,m,b,v,g,C,y,D,T,I,N,V,w,P,B,U,H,A,M,R,W=>W.value===d]}class zu extends Al{constructor(e){super(),Tl(this,e,Hu,ju,Il,{},null,[-1,-1])}}function Qr(s){let e,t="ğŸ’¾ ä¸‹è½½",r,u;return{c(){e=i("button"),e.textContent=t,this.h()},l(a){e=c(a,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(e)!=="svelte-fb2ubq"&&(e.textContent=t),this.h()},h(){n(e,"class","px-3 py-1 text-sm bg-success hover:bg-success/90 text-white border border-success rounded-lg transition-colors"),n(e,"title","ä¸‹è½½å›¾åƒ")},m(a,o){j(a,e,o),r||(u=z(e,"click",s[59]),r=!0)},p:pt,d(a){a&&f(e),r=!1,u()}}}function Ru(s){let e=s[4]?"æ›´æ¢å›¾åƒ":"ğŸ“ é€‰æ‹©å›¾åƒ",t;return{c(){t=L(e)},l(r){t=S(r,e)},m(r,u){j(r,t,u)},p(r,u){u[0]&16&&e!==(e=r[4]?"æ›´æ¢å›¾åƒ":"ğŸ“ é€‰æ‹©å›¾åƒ")&&ne(t,e)},d(r){r&&f(t)}}}function qu(s){let e,t=`<div class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></div>
          åŠ è½½ä¸­...`;return{c(){e=i("span"),e.innerHTML=t,this.h()},l(r){e=c(r,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1spx6i2"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center justify-center gap-2")},m(r,u){j(r,e,u)},p:pt,d(r){r&&f(e)}}}function Kr(s){let e,t,r,u,a,o,d,p,h="ğŸ”„ é‡ç½®",m,b,v,g="ğŸ› ï¸ ç¼–è¾‘å·¥å…·",C,y,D,T="âœ‚ï¸ è£å‰ª",F,k,I,N,V="ğŸ”„ æ—‹è½¬",w,P,B,U="â†» 90Â°",H,A,M="â†» 180Â°",R,q,W="â†» 270Â°",Z,K,G,X="è‡ªå®šä¹‰è§’åº¦",pe,Y,Q,le,re,ae,we,J,Ie,be,Se,ze,et,Pe,Oe,We="ğŸ” ç¼©æ”¾",Ae,Re,Xe,at,me,ke="ä¿æŒå®½é«˜æ¯”",qe,de,Qe,Me,Ee,Ke="å®½åº¦ç¼©æ”¾",ce,Ue,Fe=s[12].toFixed(2)+"",oe,_e,ie,$,fe,he,Be,Ge,lt="é«˜åº¦ç¼©æ”¾",it,He,je=s[13].toFixed(2)+"",Ze,ve,ye,Ne,mt,st,rt,vt,yt,ut,ct,ft="âœ¨ æ»¤é•œæ•ˆæœ",ge,xe,Te,ue,se="é€‰æ‹©æ»¤é•œ",Le,ee,te,De="æ— æ»¤é•œ",dt,xt="æ¨¡ç³Š",bt,kt="é”åŒ–",Tt,Xt="ç°åº¦",Nt,Ft,qt,Zt,It,Et='ğŸ’¡ å®æ—¶é¢„è§ˆï¼šé€‰æ‹©æ»¤é•œå³å¯çœ‹åˆ°æ•ˆæœï¼Œç‚¹å‡»"åº”ç”¨æ»¤é•œ"ä¿å­˜æ›´æ”¹',Yt,Ut,Qt,ml="ğŸ” å‰åå¯¹æ¯”",Dt,dl,At,Bt,Lt,Bl="æç¤º:",el,Pt,Ye,Je,Mt="ğŸ¨ é¢œè‰²è°ƒæ•´",hl,Wt,St,Ot,wt,Rl="â˜€ï¸ äº®åº¦",Pl,Kt,jt=s[15]>0?"+":"",Vt,Ce,nt,ot,sl,pl,rl,al,ql="â— å¯¹æ¯”åº¦",Hl,tl,Vl=s[16]>0?"+":"",Dl,Ol,Gl,$t,Ql,Nl,Ll,Ml,ns="ğŸŒˆ é¥±å’Œåº¦",Kl,Ul,wl=s[17]>0?"+":"",as,us,cs,ll,Zs,$l,Xl,Ys,Ds,Js,Zl,Qs,ks,Ks,os,ir='ğŸ’¡ å®æ—¶é¢„è§ˆï¼šæ‹–åŠ¨æ»‘å—å³å¯çœ‹åˆ°æ•ˆæœï¼Œç‚¹å‡»"åº”ç”¨"ä¿å­˜æ›´æ”¹',$s,cr;function fr(tt,Ct){return tt[8]==="crop"?Wu:Gu}let Fs=fr(s),zl=Fs(s),vl=(s[19]==="blur"||s[19]==="sharpen")&&$r(s),bl=s[19]!=="none"&&en(s),_l=s[19]!=="none"&&tn(s);function dr(tt,Ct){if(tt[21]==="none")return Ku;if(tt[21]==="split")return Qu;if(tt[21]==="toggle")return Ju}let fs=dr(s),gl=fs&&fs(s);function hr(tt,Ct){return tt[21]==="none"?to:tt[21]==="split"?eo:$u}let Is=hr(s),Yl=Is(s);return{c(){e=i("div"),t=i("button"),r=L("â†¶ æ’¤é”€"),u=x(),a=i("button"),o=L("â†· é‡åš"),d=x(),p=i("button"),p.textContent=h,m=x(),b=i("div"),v=i("h4"),v.textContent=g,C=x(),y=i("div"),D=i("label"),D.textContent=T,F=x(),zl.c(),k=x(),I=i("div"),N=i("label"),N.textContent=V,w=x(),P=i("div"),B=i("button"),B.textContent=U,H=x(),A=i("button"),A.textContent=M,R=x(),q=i("button"),q.textContent=W,Z=x(),K=i("div"),G=i("label"),G.textContent=X,pe=x(),Y=i("div"),Q=i("input"),le=x(),re=i("button"),ae=L("åº”ç”¨"),J=x(),Ie=i("p"),be=L("å½“å‰æ—‹è½¬: "),Se=L(s[10]),ze=L("Â°"),et=x(),Pe=i("div"),Oe=i("label"),Oe.textContent=We,Ae=x(),Re=i("div"),Xe=i("input"),at=x(),me=i("label"),me.textContent=ke,qe=x(),de=i("div"),Qe=i("div"),Me=i("div"),Ee=i("label"),Ee.textContent=Ke,ce=x(),Ue=i("span"),oe=L(Fe),_e=L("x"),ie=x(),$=i("input"),fe=x(),he=i("div"),Be=i("div"),Ge=i("label"),Ge.textContent=lt,it=x(),He=i("span"),Ze=L(je),ve=L("x"),ye=x(),Ne=i("input"),mt=x(),st=i("button"),rt=L("åº”ç”¨ç¼©æ”¾"),yt=x(),ut=i("div"),ct=i("label"),ct.textContent=ft,ge=x(),xe=i("div"),Te=i("div"),ue=i("label"),ue.textContent=se,Le=x(),ee=i("select"),te=i("option"),te.textContent=De,dt=i("option"),dt.textContent=xt,bt=i("option"),bt.textContent=kt,Tt=i("option"),Tt.textContent=Xt,Nt=x(),vl&&vl.c(),Ft=x(),bl&&bl.c(),qt=x(),_l&&_l.c(),Zt=x(),It=i("p"),It.textContent=Et,Yt=x(),Ut=i("div"),Qt=i("label"),Qt.textContent=ml,Dt=x(),gl&&gl.c(),dl=x(),At=i("div"),Bt=L("ğŸ’¡ "),Lt=i("strong"),Lt.textContent=Bl,el=x(),Yl.c(),Pt=x(),Ye=i("div"),Je=i("label"),Je.textContent=Mt,hl=x(),Wt=i("div"),St=i("div"),Ot=i("div"),wt=i("label"),wt.textContent=Rl,Pl=x(),Kt=i("span"),Vt=L(jt),Ce=L(s[15]),nt=x(),ot=i("input"),sl=x(),pl=i("div"),rl=i("div"),al=i("label"),al.textContent=ql,Hl=x(),tl=i("span"),Dl=L(Vl),Ol=L(s[16]),Gl=x(),$t=i("input"),Ql=x(),Nl=i("div"),Ll=i("div"),Ml=i("label"),Ml.textContent=ns,Kl=x(),Ul=i("span"),as=L(wl),us=L(s[17]),cs=x(),ll=i("input"),Zs=x(),$l=i("div"),Xl=i("button"),Ys=L("âœ“ åº”ç”¨"),Js=x(),Zl=i("button"),Qs=L("â†¶ é‡ç½®"),Ks=x(),os=i("p"),os.textContent=ir,this.h()},l(tt){e=c(tt,"DIV",{class:!0});var Ct=_(e);t=c(Ct,"BUTTON",{class:!0,title:!0});var pr=_(t);r=S(pr,"â†¶ æ’¤é”€"),pr.forEach(f),u=E(Ct),a=c(Ct,"BUTTON",{class:!0,title:!0});var mr=_(a);o=S(mr,"â†· é‡åš"),mr.forEach(f),d=E(Ct),p=c(Ct,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(p)!=="svelte-1c8vlnn"&&(p.textContent=h),Ct.forEach(f),m=E(tt),b=c(tt,"DIV",{class:!0});var kl=_(b);v=c(kl,"H4",{class:!0,"data-svelte-h":!0}),O(v)!=="svelte-q6ga2k"&&(v.textContent=g),C=E(kl),y=c(kl,"DIV",{class:!0});var As=_(y);D=c(As,"LABEL",{class:!0,"data-svelte-h":!0}),O(D)!=="svelte-19wvore"&&(D.textContent=T),F=E(As),zl.l(As),As.forEach(f),k=E(kl),I=c(kl,"DIV",{class:!0});var ds=_(I);N=c(ds,"LABEL",{class:!0,"data-svelte-h":!0}),O(N)!=="svelte-1sk0k2o"&&(N.textContent=V),w=E(ds),P=c(ds,"DIV",{class:!0});var hs=_(P);B=c(hs,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(B)!=="svelte-slc2cz"&&(B.textContent=U),H=E(hs),A=c(hs,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(A)!=="svelte-t3n5qr"&&(A.textContent=M),R=E(hs),q=c(hs,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(q)!=="svelte-14fkiol"&&(q.textContent=W),hs.forEach(f),Z=E(ds),K=c(ds,"DIV",{class:!0});var ps=_(K);G=c(ps,"LABEL",{class:!0,"data-svelte-h":!0}),O(G)!=="svelte-52hgxp"&&(G.textContent=X),pe=E(ps),Y=c(ps,"DIV",{class:!0});var Ts=_(Y);Q=c(Ts,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),le=E(Ts),re=c(Ts,"BUTTON",{class:!0});var vr=_(re);ae=S(vr,"åº”ç”¨"),vr.forEach(f),Ts.forEach(f),J=E(ps),Ie=c(ps,"P",{class:!0});var Bs=_(Ie);be=S(Bs,"å½“å‰æ—‹è½¬: "),Se=S(Bs,s[10]),ze=S(Bs,"Â°"),Bs.forEach(f),ps.forEach(f),ds.forEach(f),et=E(kl),Pe=c(kl,"DIV",{class:!0});var es=_(Pe);Oe=c(es,"LABEL",{class:!0,"data-svelte-h":!0}),O(Oe)!=="svelte-exaskh"&&(Oe.textContent=We),Ae=E(es),Re=c(es,"DIV",{class:!0});var Ps=_(Re);Xe=c(Ps,"INPUT",{type:!0,id:!0,class:!0}),at=E(Ps),me=c(Ps,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(me)!=="svelte-auh1bd"&&(me.textContent=ke),Ps.forEach(f),qe=E(es),de=c(es,"DIV",{class:!0});var Vs=_(de);Qe=c(Vs,"DIV",{class:!0});var Ns=_(Qe);Me=c(Ns,"DIV",{class:!0});var Ls=_(Me);Ee=c(Ls,"LABEL",{class:!0,"data-svelte-h":!0}),O(Ee)!=="svelte-ksyta6"&&(Ee.textContent=Ke),ce=E(Ls),Ue=c(Ls,"SPAN",{class:!0});var er=_(Ue);oe=S(er,Fe),_e=S(er,"x"),er.forEach(f),Ls.forEach(f),ie=E(Ns),$=c(Ns,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ns.forEach(f),fe=E(Vs),he=c(Vs,"DIV",{class:!0});var Ss=_(he);Be=c(Ss,"DIV",{class:!0});var Os=_(Be);Ge=c(Os,"LABEL",{class:!0,"data-svelte-h":!0}),O(Ge)!=="svelte-1ngamj5"&&(Ge.textContent=lt),it=E(Os),He=c(Os,"SPAN",{class:!0});var tr=_(He);Ze=S(tr,je),ve=S(tr,"x"),tr.forEach(f),Os.forEach(f),ye=E(Ss),Ne=c(Ss,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ss.forEach(f),Vs.forEach(f),mt=E(es),st=c(es,"BUTTON",{class:!0});var br=_(st);rt=S(br,"åº”ç”¨ç¼©æ”¾"),br.forEach(f),es.forEach(f),yt=E(kl),ut=c(kl,"DIV",{class:!0});var ts=_(ut);ct=c(ts,"LABEL",{class:!0,"data-svelte-h":!0}),O(ct)!=="svelte-slxwg4"&&(ct.textContent=ft),ge=E(ts),xe=c(ts,"DIV",{class:!0});var ms=_(xe);Te=c(ms,"DIV",{class:!0});var Ms=_(Te);ue=c(Ms,"LABEL",{class:!0,"data-svelte-h":!0}),O(ue)!=="svelte-ev75b8"&&(ue.textContent=se),Le=E(Ms),ee=c(Ms,"SELECT",{class:!0});var Es=_(ee);te=c(Es,"OPTION",{"data-svelte-h":!0}),O(te)!=="svelte-1dyehbq"&&(te.textContent=De),dt=c(Es,"OPTION",{"data-svelte-h":!0}),O(dt)!=="svelte-9k0ieo"&&(dt.textContent=xt),bt=c(Es,"OPTION",{"data-svelte-h":!0}),O(bt)!=="svelte-7z12bl"&&(bt.textContent=kt),Tt=c(Es,"OPTION",{"data-svelte-h":!0}),O(Tt)!=="svelte-1kn80vx"&&(Tt.textContent=Xt),Es.forEach(f),Ms.forEach(f),Nt=E(ms),vl&&vl.l(ms),Ft=E(ms),bl&&bl.l(ms),ms.forEach(f),qt=E(ts),_l&&_l.l(ts),Zt=E(ts),It=c(ts,"P",{class:!0,"data-svelte-h":!0}),O(It)!=="svelte-12udyc3"&&(It.textContent=Et),ts.forEach(f),Yt=E(kl),Ut=c(kl,"DIV",{class:!0});var vs=_(Ut);Qt=c(vs,"LABEL",{class:!0,"data-svelte-h":!0}),O(Qt)!=="svelte-dxwplc"&&(Qt.textContent=ml),Dt=E(vs),gl&&gl.l(vs),dl=E(vs),At=c(vs,"DIV",{class:!0});var Cs=_(At);Bt=S(Cs,"ğŸ’¡ "),Lt=c(Cs,"STRONG",{"data-svelte-h":!0}),O(Lt)!=="svelte-1porf7e"&&(Lt.textContent=Bl),el=E(Cs),Yl.l(Cs),Cs.forEach(f),vs.forEach(f),Pt=E(kl),Ye=c(kl,"DIV",{class:!0});var ls=_(Ye);Je=c(ls,"LABEL",{class:!0,"data-svelte-h":!0}),O(Je)!=="svelte-827yxx"&&(Je.textContent=Mt),hl=E(ls),Wt=c(ls,"DIV",{class:!0});var bs=_(Wt);St=c(bs,"DIV",{class:!0});var Us=_(St);Ot=c(Us,"DIV",{class:!0});var js=_(Ot);wt=c(js,"LABEL",{class:!0,"data-svelte-h":!0}),O(wt)!=="svelte-13lj90h"&&(wt.textContent=Rl),Pl=E(js),Kt=c(js,"SPAN",{class:!0});var lr=_(Kt);Vt=S(lr,jt),Ce=S(lr,s[15]),lr.forEach(f),js.forEach(f),nt=E(Us),ot=c(Us,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Us.forEach(f),sl=E(bs),pl=c(bs,"DIV",{class:!0});var Hs=_(pl);rl=c(Hs,"DIV",{class:!0});var zs=_(rl);al=c(zs,"LABEL",{class:!0,"data-svelte-h":!0}),O(al)!=="svelte-10v5xxr"&&(al.textContent=ql),Hl=E(zs),tl=c(zs,"SPAN",{class:!0});var sr=_(tl);Dl=S(sr,Vl),Ol=S(sr,s[16]),sr.forEach(f),zs.forEach(f),Gl=E(Hs),$t=c(Hs,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Hs.forEach(f),Ql=E(bs),Nl=c(bs,"DIV",{class:!0});var Rs=_(Nl);Ll=c(Rs,"DIV",{class:!0});var qs=_(Ll);Ml=c(qs,"LABEL",{class:!0,"data-svelte-h":!0}),O(Ml)!=="svelte-1f6b811"&&(Ml.textContent=ns),Kl=E(qs),Ul=c(qs,"SPAN",{class:!0});var rr=_(Ul);as=S(rr,wl),us=S(rr,s[17]),rr.forEach(f),qs.forEach(f),cs=E(Rs),ll=c(Rs,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Rs.forEach(f),bs.forEach(f),Zs=E(ls),$l=c(ls,"DIV",{class:!0});var Gs=_($l);Xl=c(Gs,"BUTTON",{class:!0});var _r=_(Xl);Ys=S(_r,"âœ“ åº”ç”¨"),_r.forEach(f),Js=E(Gs),Zl=c(Gs,"BUTTON",{class:!0});var gr=_(Zl);Qs=S(gr,"â†¶ é‡ç½®"),gr.forEach(f),Gs.forEach(f),Ks=E(ls),os=c(ls,"P",{class:!0,"data-svelte-h":!0}),O(os)!=="svelte-32zmdr"&&(os.textContent=ir),ls.forEach(f),kl.forEach(f),this.h()},h(){t.disabled=!s[27](),n(t,"class","flex-1 px-3 py-2 bg-surface hover:bg-surface/80 disabled:bg-surface-elevated disabled:text-text-secondary text-text-primary rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(t,"title","æ’¤é”€ (Ctrl+Z)"),a.disabled=!s[28](),n(a,"class","flex-1 px-3 py-2 bg-surface hover:bg-surface/80 disabled:bg-surface-elevated disabled:text-text-secondary text-text-primary rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(a,"title","é‡åš (Ctrl+Shift+Z)"),n(p,"class","flex-1 px-3 py-2 bg-warning/10 hover:bg-warning/20 text-warning rounded-lg transition-colors font-medium"),n(p,"title","é‡ç½®åˆ°åŸå§‹å›¾åƒ"),n(e,"class","flex gap-2 p-3 bg-surface-elevated border border-border rounded-lg"),n(v,"class","text-sm font-semibold text-text-primary mb-3"),n(D,"class","text-sm font-medium text-text-primary"),n(y,"class","space-y-2"),n(N,"class","text-sm font-medium text-text-primary"),n(B,"class","px-3 py-2 bg-surface hover:bg-surface/80 text-text-primary rounded-lg transition-colors font-medium text-sm"),n(B,"title","é¡ºæ—¶é’ˆæ—‹è½¬90åº¦"),n(A,"class","px-3 py-2 bg-surface hover:bg-surface/80 text-text-primary rounded-lg transition-colors font-medium text-sm"),n(A,"title","æ—‹è½¬180åº¦"),n(q,"class","px-3 py-2 bg-surface hover:bg-surface/80 text-text-primary rounded-lg transition-colors font-medium text-sm"),n(q,"title","é¡ºæ—¶é’ˆæ—‹è½¬270åº¦ï¼ˆé€†æ—¶é’ˆ90åº¦ï¼‰"),n(P,"class","grid grid-cols-3 gap-2"),n(G,"class","text-xs text-text-secondary"),n(Q,"type","number"),n(Q,"min","-360"),n(Q,"max","360"),n(Q,"step","1"),n(Q,"class","flex-1 px-3 py-2 bg-surface border border-border rounded-lg text-text-primary text-sm focus:outline-none focus:ring-2 focus:ring-primary"),n(Q,"placeholder","è§’åº¦ (-360 åˆ° 360)"),re.disabled=we=s[11]===0,n(re,"class","px-4 py-2 bg-primary hover:bg-primary/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium text-sm disabled:cursor-not-allowed"),n(Y,"class","flex gap-2"),n(Ie,"class","text-xs text-text-secondary"),n(K,"class","space-y-2 mt-3"),n(I,"class","space-y-2"),n(Oe,"class","text-sm font-medium text-text-primary"),n(Xe,"type","checkbox"),n(Xe,"id","maintain-aspect-ratio"),n(Xe,"class","w-4 h-4 text-primary bg-surface border-border rounded focus:ring-primary"),n(me,"for","maintain-aspect-ratio"),n(me,"class","text-xs text-text-secondary cursor-pointer"),n(Re,"class","flex items-center gap-2 mb-2"),n(Ee,"class","text-xs text-text-secondary"),n(Ue,"class","text-xs text-text-primary font-mono"),n(Me,"class","flex items-center justify-between"),n($,"type","range"),n($,"min","0.1"),n($,"max","3.0"),n($,"step","0.1"),n($,"class","w-full h-2 bg-surface rounded-lg appearance-none cursor-pointer accent-primary"),n(Qe,"class","space-y-1"),n(Ge,"class","text-xs text-text-secondary"),n(He,"class","text-xs text-text-primary font-mono"),n(Be,"class","flex items-center justify-between"),n(Ne,"type","range"),n(Ne,"min","0.1"),n(Ne,"max","3.0"),n(Ne,"step","0.1"),n(Ne,"class","w-full h-2 bg-surface rounded-lg appearance-none cursor-pointer accent-primary"),Ne.disabled=s[14],n(he,"class","space-y-1"),n(de,"class","space-y-3"),st.disabled=vt=s[12]===1&&s[13]===1,n(st,"class","w-full px-3 py-2 bg-primary hover:bg-primary/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(Pe,"class","space-y-2"),n(ct,"class","text-sm font-medium text-text-primary"),n(ue,"class","text-xs text-text-secondary"),te.__value="none",Ve(te,te.__value),dt.__value="blur",Ve(dt,dt.__value),bt.__value="sharpen",Ve(bt,bt.__value),Tt.__value="grayscale",Ve(Tt,Tt.__value),n(ee,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary text-sm focus:outline-none focus:ring-2 focus:ring-primary"),s[19]===void 0&&rs(()=>s[69].call(ee)),n(Te,"class","space-y-1"),n(xe,"class","space-y-3"),n(It,"class","text-xs text-text-secondary mt-2"),n(ut,"class","space-y-2"),n(Qt,"class","text-sm font-medium text-text-primary"),n(At,"class","p-2 bg-primary/10 border border-primary/30 rounded text-xs text-text-secondary"),n(Ut,"class","space-y-2"),n(Je,"class","text-sm font-medium text-text-primary"),n(wt,"class","text-xs text-text-secondary"),n(Kt,"class","text-xs text-text-primary font-mono"),n(Ot,"class","flex items-center justify-between"),n(ot,"type","range"),n(ot,"min","-100"),n(ot,"max","100"),n(ot,"step","1"),n(ot,"class","w-full h-2 bg-surface rounded-lg appearance-none cursor-pointer accent-primary"),n(St,"class","space-y-1"),n(al,"class","text-xs text-text-secondary"),n(tl,"class","text-xs text-text-primary font-mono"),n(rl,"class","flex items-center justify-between"),n($t,"type","range"),n($t,"min","-100"),n($t,"max","100"),n($t,"step","1"),n($t,"class","w-full h-2 bg-surface rounded-lg appearance-none cursor-pointer accent-primary"),n(pl,"class","space-y-1"),n(Ml,"class","text-xs text-text-secondary"),n(Ul,"class","text-xs text-text-primary font-mono"),n(Ll,"class","flex items-center justify-between"),n(ll,"type","range"),n(ll,"min","-100"),n(ll,"max","100"),n(ll,"step","1"),n(ll,"class","w-full h-2 bg-surface rounded-lg appearance-none cursor-pointer accent-primary"),n(Nl,"class","space-y-1"),n(Wt,"class","space-y-3"),Xl.disabled=Ds=s[15]===0&&s[16]===0&&s[17]===0,n(Xl,"class","flex-1 px-3 py-2 bg-success hover:bg-success/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium disabled:cursor-not-allowed text-sm"),Zl.disabled=ks=s[15]===0&&s[16]===0&&s[17]===0,n(Zl,"class","flex-1 px-3 py-2 bg-surface hover:bg-surface/80 disabled:bg-surface-elevated disabled:text-text-secondary text-text-primary rounded-lg transition-colors font-medium disabled:cursor-not-allowed text-sm"),n($l,"class","flex gap-2 mt-3"),n(os,"class","text-xs text-text-secondary mt-2"),n(Ye,"class","space-y-2"),n(b,"class","space-y-4 p-4 bg-surface-elevated border border-border rounded-lg")},m(tt,Ct){j(tt,e,Ct),l(e,t),l(t,r),l(e,u),l(e,a),l(a,o),l(e,d),l(e,p),j(tt,m,Ct),j(tt,b,Ct),l(b,v),l(b,C),l(b,y),l(y,D),l(y,F),zl.m(y,null),l(b,k),l(b,I),l(I,N),l(I,w),l(I,P),l(P,B),l(P,H),l(P,A),l(P,R),l(P,q),l(I,Z),l(I,K),l(K,G),l(K,pe),l(K,Y),l(Y,Q),Ve(Q,s[11]),l(Y,le),l(Y,re),l(re,ae),l(K,J),l(K,Ie),l(Ie,be),l(Ie,Se),l(Ie,ze),l(b,et),l(b,Pe),l(Pe,Oe),l(Pe,Ae),l(Pe,Re),l(Re,Xe),Xe.checked=s[14],l(Re,at),l(Re,me),l(Pe,qe),l(Pe,de),l(de,Qe),l(Qe,Me),l(Me,Ee),l(Me,ce),l(Me,Ue),l(Ue,oe),l(Ue,_e),l(Qe,ie),l(Qe,$),Ve($,s[12]),l(de,fe),l(de,he),l(he,Be),l(Be,Ge),l(Be,it),l(Be,He),l(He,Ze),l(He,ve),l(he,ye),l(he,Ne),Ve(Ne,s[13]),l(Pe,mt),l(Pe,st),l(st,rt),l(b,yt),l(b,ut),l(ut,ct),l(ut,ge),l(ut,xe),l(xe,Te),l(Te,ue),l(Te,Le),l(Te,ee),l(ee,te),l(ee,dt),l(ee,bt),l(ee,Tt),yl(ee,s[19],!0),l(xe,Nt),vl&&vl.m(xe,null),l(xe,Ft),bl&&bl.m(xe,null),l(ut,qt),_l&&_l.m(ut,null),l(ut,Zt),l(ut,It),l(b,Yt),l(b,Ut),l(Ut,Qt),l(Ut,Dt),gl&&gl.m(Ut,null),l(Ut,dl),l(Ut,At),l(At,Bt),l(At,Lt),l(At,el),Yl.m(At,null),l(b,Pt),l(b,Ye),l(Ye,Je),l(Ye,hl),l(Ye,Wt),l(Wt,St),l(St,Ot),l(Ot,wt),l(Ot,Pl),l(Ot,Kt),l(Kt,Vt),l(Kt,Ce),l(St,nt),l(St,ot),Ve(ot,s[15]),l(Wt,sl),l(Wt,pl),l(pl,rl),l(rl,al),l(rl,Hl),l(rl,tl),l(tl,Dl),l(tl,Ol),l(pl,Gl),l(pl,$t),Ve($t,s[16]),l(Wt,Ql),l(Wt,Nl),l(Nl,Ll),l(Ll,Ml),l(Ll,Kl),l(Ll,Ul),l(Ul,as),l(Ul,us),l(Nl,cs),l(Nl,ll),Ve(ll,s[17]),l(Ye,Zs),l(Ye,$l),l($l,Xl),l(Xl,Ys),l($l,Js),l($l,Zl),l(Zl,Qs),l(Ye,Ks),l(Ye,os),$s||(cr=[z(t,"click",s[25]),z(a,"click",s[26]),z(p,"click",s[29]),z(B,"click",s[36]),z(A,"click",s[37]),z(q,"click",s[38]),z(Q,"input",s[65]),z(re,"click",s[39]),z(Xe,"change",s[66]),z($,"change",s[67]),z($,"input",s[67]),z($,"input",s[41]),z(Ne,"change",s[68]),z(Ne,"input",s[68]),z(Ne,"input",s[42]),z(st,"click",s[40]),z(ee,"change",s[69]),z(ee,"change",s[48]),z(ot,"change",s[72]),z(ot,"input",s[72]),z(ot,"input",s[43]),z($t,"change",s[73]),z($t,"input",s[73]),z($t,"input",s[44]),z(ll,"change",s[74]),z(ll,"input",s[74]),z(ll,"input",s[45]),z(Xl,"click",s[47]),z(Zl,"click",s[46])],$s=!0)},p(tt,Ct){Fs===(Fs=fr(tt))&&zl?zl.p(tt,Ct):(zl.d(1),zl=Fs(tt),zl&&(zl.c(),zl.m(y,null))),Ct[0]&2048&&Ht(Q.value)!==tt[11]&&Ve(Q,tt[11]),Ct[0]&2048&&we!==(we=tt[11]===0)&&(re.disabled=we),Ct[0]&1024&&ne(Se,tt[10]),Ct[0]&16384&&(Xe.checked=tt[14]),Ct[0]&4096&&Fe!==(Fe=tt[12].toFixed(2)+"")&&ne(oe,Fe),Ct[0]&4096&&Ve($,tt[12]),Ct[0]&8192&&je!==(je=tt[13].toFixed(2)+"")&&ne(Ze,je),Ct[0]&16384&&(Ne.disabled=tt[14]),Ct[0]&8192&&Ve(Ne,tt[13]),Ct[0]&12288&&vt!==(vt=tt[12]===1&&tt[13]===1)&&(st.disabled=vt),Ct[0]&524288&&yl(ee,tt[19]),tt[19]==="blur"||tt[19]==="sharpen"?vl?vl.p(tt,Ct):(vl=$r(tt),vl.c(),vl.m(xe,Ft)):vl&&(vl.d(1),vl=null),tt[19]!=="none"?bl?bl.p(tt,Ct):(bl=en(tt),bl.c(),bl.m(xe,null)):bl&&(bl.d(1),bl=null),tt[19]!=="none"?_l?_l.p(tt,Ct):(_l=tn(tt),_l.c(),_l.m(ut,Zt)):_l&&(_l.d(1),_l=null),fs===(fs=dr(tt))&&gl?gl.p(tt,Ct):(gl&&gl.d(1),gl=fs&&fs(tt),gl&&(gl.c(),gl.m(Ut,dl))),Is!==(Is=hr(tt))&&(Yl.d(1),Yl=Is(tt),Yl&&(Yl.c(),Yl.m(At,null))),Ct[0]&32768&&jt!==(jt=tt[15]>0?"+":"")&&ne(Vt,jt),Ct[0]&32768&&ne(Ce,tt[15]),Ct[0]&32768&&Ve(ot,tt[15]),Ct[0]&65536&&Vl!==(Vl=tt[16]>0?"+":"")&&ne(Dl,Vl),Ct[0]&65536&&ne(Ol,tt[16]),Ct[0]&65536&&Ve($t,tt[16]),Ct[0]&131072&&wl!==(wl=tt[17]>0?"+":"")&&ne(as,wl),Ct[0]&131072&&ne(us,tt[17]),Ct[0]&131072&&Ve(ll,tt[17]),Ct[0]&229376&&Ds!==(Ds=tt[15]===0&&tt[16]===0&&tt[17]===0)&&(Xl.disabled=Ds),Ct[0]&229376&&ks!==(ks=tt[15]===0&&tt[16]===0&&tt[17]===0)&&(Zl.disabled=ks)},d(tt){tt&&(f(e),f(m),f(b)),zl.d(),vl&&vl.d(),bl&&bl.d(),_l&&_l.d(),gl&&gl.d(),Yl.d(),$s=!1,Rt(cr)}}}function Gu(s){let e,t="å¼€å§‹è£å‰ª",r,u;return{c(){e=i("button"),e.textContent=t,this.h()},l(a){e=c(a,"BUTTON",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-m7bsxn"&&(e.textContent=t),this.h()},h(){n(e,"class","w-full px-3 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors font-medium")},m(a,o){j(a,e,o),r||(u=z(e,"click",s[30]),r=!0)},p:pt,d(a){a&&f(e),r=!1,u()}}}function Wu(s){let e,t,r="åœ¨ç”»å¸ƒä¸Šæ‹–åŠ¨é¼ æ ‡é€‰æ‹©è£å‰ªåŒºåŸŸ",u,a,o,d,p,h,m,b="âœ• å–æ¶ˆ",v,g;return{c(){e=i("div"),t=i("p"),t.textContent=r,u=x(),a=i("div"),o=i("button"),d=L("âœ“ åº”ç”¨è£å‰ª"),h=x(),m=i("button"),m.textContent=b,this.h()},l(C){e=c(C,"DIV",{class:!0});var y=_(e);t=c(y,"P",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-v6cull"&&(t.textContent=r),u=E(y),a=c(y,"DIV",{class:!0});var D=_(a);o=c(D,"BUTTON",{class:!0});var T=_(o);d=S(T,"âœ“ åº”ç”¨è£å‰ª"),T.forEach(f),h=E(D),m=c(D,"BUTTON",{class:!0,"data-svelte-h":!0}),O(m)!=="svelte-2uewie"&&(m.textContent=b),D.forEach(f),y.forEach(f),this.h()},h(){n(t,"class","text-xs text-text-secondary"),o.disabled=p=!s[9],n(o,"class","flex-1 px-3 py-2 bg-success hover:bg-success/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(m,"class","flex-1 px-3 py-2 bg-surface hover:bg-surface/80 text-text-primary rounded-lg transition-colors font-medium"),n(a,"class","flex gap-2"),n(e,"class","space-y-2")},m(C,y){j(C,e,y),l(e,t),l(e,u),l(e,a),l(a,o),l(o,d),l(a,h),l(a,m),v||(g=[z(o,"click",s[34]),z(m,"click",s[35])],v=!0)},p(C,y){y[0]&512&&p!==(p=!C[9])&&(o.disabled=p)},d(C){C&&f(e),v=!1,Rt(g)}}}function $r(s){let e,t,r,u=s[19]==="blur"?"æ¨¡ç³Šå¼ºåº¦":"é”åŒ–å¼ºåº¦",a,o,d,p,h,m,b,v,g;return{c(){e=i("div"),t=i("div"),r=i("label"),a=L(u),o=x(),d=i("span"),p=L(s[20]),h=L("%"),m=x(),b=i("input"),this.h()},l(C){e=c(C,"DIV",{class:!0});var y=_(e);t=c(y,"DIV",{class:!0});var D=_(t);r=c(D,"LABEL",{class:!0});var T=_(r);a=S(T,u),T.forEach(f),o=E(D),d=c(D,"SPAN",{class:!0});var F=_(d);p=S(F,s[20]),h=S(F,"%"),F.forEach(f),D.forEach(f),m=E(y),b=c(y,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),y.forEach(f),this.h()},h(){n(r,"class","text-xs text-text-secondary"),n(d,"class","text-xs text-text-primary font-mono"),n(t,"class","flex items-center justify-between"),n(b,"type","range"),n(b,"min","0"),n(b,"max","100"),n(b,"step","5"),n(b,"class","w-full h-2 bg-surface rounded-lg appearance-none cursor-pointer accent-primary"),n(e,"class","space-y-1")},m(C,y){j(C,e,y),l(e,t),l(t,r),l(r,a),l(t,o),l(t,d),l(d,p),l(d,h),l(e,m),l(e,b),Ve(b,s[20]),v||(g=[z(b,"change",s[70]),z(b,"input",s[70]),z(b,"input",s[49])],v=!0)},p(C,y){y[0]&524288&&u!==(u=C[19]==="blur"?"æ¨¡ç³Šå¼ºåº¦":"é”åŒ–å¼ºåº¦")&&ne(a,u),y[0]&1048576&&ne(p,C[20]),y[0]&1048576&&Ve(b,C[20])},d(C){C&&f(e),v=!1,Rt(g)}}}function en(s){let e;function t(a,o){if(a[19]==="blur")return Yu;if(a[19]==="sharpen")return Zu;if(a[19]==="grayscale")return Xu}let r=t(s),u=r&&r(s);return{c(){e=i("div"),u&&u.c(),this.h()},l(a){e=c(a,"DIV",{class:!0});var o=_(e);u&&u.l(o),o.forEach(f),this.h()},h(){n(e,"class","p-2 bg-primary/10 border border-primary/30 rounded text-xs text-text-secondary")},m(a,o){j(a,e,o),u&&u.m(e,null)},p(a,o){r!==(r=t(a))&&(u&&u.d(1),u=r&&r(a),u&&(u.c(),u.m(e,null)))},d(a){a&&f(e),u&&u.d()}}}function Xu(s){let e;return{c(){e=L("âš« ç°åº¦æ»¤é•œï¼šå°†å›¾åƒè½¬æ¢ä¸ºé»‘ç™½")},l(t){e=S(t,"âš« ç°åº¦æ»¤é•œï¼šå°†å›¾åƒè½¬æ¢ä¸ºé»‘ç™½")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Zu(s){let e;return{c(){e=L("ğŸ”ª é”åŒ–æ»¤é•œï¼šå¢å¼ºå›¾åƒè¾¹ç¼˜ï¼Œä½¿ç»†èŠ‚æ›´æ¸…æ™°")},l(t){e=S(t,"ğŸ”ª é”åŒ–æ»¤é•œï¼šå¢å¼ºå›¾åƒè¾¹ç¼˜ï¼Œä½¿ç»†èŠ‚æ›´æ¸…æ™°")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Yu(s){let e;return{c(){e=L("ğŸŒ«ï¸ æ¨¡ç³Šæ»¤é•œï¼šä½¿å›¾åƒå˜å¾—æŸ”å’Œï¼Œå‡å°‘ç»†èŠ‚")},l(t){e=S(t,"ğŸŒ«ï¸ æ¨¡ç³Šæ»¤é•œï¼šä½¿å›¾åƒå˜å¾—æŸ”å’Œï¼Œå‡å°‘ç»†èŠ‚")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function tn(s){let e,t,r="âœ“ åº”ç”¨æ»¤é•œ",u,a,o="â†¶ å–æ¶ˆ",d,p;return{c(){e=i("div"),t=i("button"),t.textContent=r,u=x(),a=i("button"),a.textContent=o,this.h()},l(h){e=c(h,"DIV",{class:!0});var m=_(e);t=c(m,"BUTTON",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-18qsl8j"&&(t.textContent=r),u=E(m),a=c(m,"BUTTON",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-13pmo6q"&&(a.textContent=o),m.forEach(f),this.h()},h(){n(t,"class","flex-1 px-3 py-2 bg-success hover:bg-success/90 text-white rounded-lg transition-colors font-medium text-sm"),n(a,"class","flex-1 px-3 py-2 bg-surface hover:bg-surface/80 text-text-primary rounded-lg transition-colors font-medium text-sm"),n(e,"class","flex gap-2 mt-3")},m(h,m){j(h,e,m),l(e,t),l(e,u),l(e,a),d||(p=[z(t,"click",s[50]),z(a,"click",s[51])],d=!0)},p:pt,d(h){h&&f(e),d=!1,Rt(p)}}}function Ju(s){let e,t,r="ç‚¹å‡»æŒ‰é’®åœ¨åŸå§‹å›¾åƒå’Œç¼–è¾‘åå›¾åƒä¹‹é—´åˆ‡æ¢",u,a,o,d,p=s[23]?"åŸå§‹å›¾åƒ":"ç¼–è¾‘åå›¾åƒ",h,m,b,v="â‡„ åˆ‡æ¢å›¾åƒ",g,C,y,D="ğŸ’¾ å¯¼å‡ºå¯¹æ¯”å›¾",T,F,k="âœ• é€€å‡ºå¯¹æ¯”",I,N;return{c(){e=i("div"),t=i("p"),t.textContent=r,u=x(),a=i("div"),o=i("p"),d=L("å½“å‰æ˜¾ç¤º: "),h=L(p),m=x(),b=i("button"),b.textContent=v,g=x(),C=i("div"),y=i("button"),y.textContent=D,T=x(),F=i("button"),F.textContent=k,this.h()},l(V){e=c(V,"DIV",{class:!0});var w=_(e);t=c(w,"P",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1v959dy"&&(t.textContent=r),u=E(w),a=c(w,"DIV",{class:!0});var P=_(a);o=c(P,"P",{class:!0});var B=_(o);d=S(B,"å½“å‰æ˜¾ç¤º: "),h=S(B,p),B.forEach(f),P.forEach(f),m=E(w),b=c(w,"BUTTON",{class:!0,"data-svelte-h":!0}),O(b)!=="svelte-8asb6"&&(b.textContent=v),g=E(w),C=c(w,"DIV",{class:!0});var U=_(C);y=c(U,"BUTTON",{class:!0,"data-svelte-h":!0}),O(y)!=="svelte-1tf6lq4"&&(y.textContent=D),T=E(U),F=c(U,"BUTTON",{class:!0,"data-svelte-h":!0}),O(F)!=="svelte-yzjbbp"&&(F.textContent=k),U.forEach(f),w.forEach(f),this.h()},h(){n(t,"class","text-xs text-text-secondary"),n(o,"class","text-sm font-semibold text-text-primary"),n(a,"class","p-3 bg-primary/10 border border-primary/30 rounded text-center"),n(b,"class","w-full px-4 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors font-medium"),n(y,"class","flex-1 px-3 py-2 bg-success hover:bg-success/90 text-white rounded-lg transition-colors font-medium text-sm"),n(F,"class","flex-1 px-3 py-2 bg-surface hover:bg-surface/80 text-text-primary rounded-lg transition-colors font-medium text-sm"),n(C,"class","flex gap-2"),n(e,"class","space-y-3")},m(V,w){j(V,e,w),l(e,t),l(e,u),l(e,a),l(a,o),l(o,d),l(o,h),l(e,m),l(e,b),l(e,g),l(e,C),l(C,y),l(C,T),l(C,F),I||(N=[z(b,"click",s[56]),z(y,"click",s[58]),z(F,"click",s[57])],I=!0)},p(V,w){w[0]&8388608&&p!==(p=V[23]?"åŸå§‹å›¾åƒ":"ç¼–è¾‘åå›¾åƒ")&&ne(h,p)},d(V){V&&f(e),I=!1,Rt(N)}}}function Qu(s){let e,t,r="æ‹–åŠ¨ç”»å¸ƒä¸Šçš„ç»¿è‰²åˆ†å‰²çº¿è°ƒæ•´å¯¹æ¯”ä½ç½®",u,a,o,d,p="åˆ†å‰²ä½ç½®",h,m,b=Math.round(s[22])+"",v,g,C,y,D,T,F,k="ğŸ’¾ å¯¼å‡ºå¯¹æ¯”å›¾",I,N,V="âœ• é€€å‡ºå¯¹æ¯”",w,P;return{c(){e=i("div"),t=i("p"),t.textContent=r,u=x(),a=i("div"),o=i("div"),d=i("label"),d.textContent=p,h=x(),m=i("span"),v=L(b),g=L("%"),C=x(),y=i("input"),D=x(),T=i("div"),F=i("button"),F.textContent=k,I=x(),N=i("button"),N.textContent=V,this.h()},l(B){e=c(B,"DIV",{class:!0});var U=_(e);t=c(U,"P",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-ub6dz9"&&(t.textContent=r),u=E(U),a=c(U,"DIV",{class:!0});var H=_(a);o=c(H,"DIV",{class:!0});var A=_(o);d=c(A,"LABEL",{class:!0,"data-svelte-h":!0}),O(d)!=="svelte-1b8p5gf"&&(d.textContent=p),h=E(A),m=c(A,"SPAN",{class:!0});var M=_(m);v=S(M,b),g=S(M,"%"),M.forEach(f),A.forEach(f),C=E(H),y=c(H,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),H.forEach(f),D=E(U),T=c(U,"DIV",{class:!0});var R=_(T);F=c(R,"BUTTON",{class:!0,"data-svelte-h":!0}),O(F)!=="svelte-1tf6lq4"&&(F.textContent=k),I=E(R),N=c(R,"BUTTON",{class:!0,"data-svelte-h":!0}),O(N)!=="svelte-yzjbbp"&&(N.textContent=V),R.forEach(f),U.forEach(f),this.h()},h(){n(t,"class","text-xs text-text-secondary"),n(d,"class","text-xs text-text-secondary"),n(m,"class","text-xs text-text-primary font-mono"),n(o,"class","flex items-center justify-between"),n(y,"type","range"),n(y,"min","0"),n(y,"max","100"),n(y,"step","1"),n(y,"class","w-full h-2 bg-surface rounded-lg appearance-none cursor-pointer accent-primary"),n(a,"class","space-y-1"),n(F,"class","flex-1 px-3 py-2 bg-success hover:bg-success/90 text-white rounded-lg transition-colors font-medium text-sm"),n(N,"class","flex-1 px-3 py-2 bg-surface hover:bg-surface/80 text-text-primary rounded-lg transition-colors font-medium text-sm"),n(T,"class","flex gap-2"),n(e,"class","space-y-3")},m(B,U){j(B,e,U),l(e,t),l(e,u),l(e,a),l(a,o),l(o,d),l(o,h),l(o,m),l(m,v),l(m,g),l(a,C),l(a,y),Ve(y,s[22]),l(e,D),l(e,T),l(T,F),l(T,I),l(T,N),w||(P=[z(y,"change",s[71]),z(y,"input",s[71]),z(y,"input",s[53]),z(F,"click",s[58]),z(N,"click",s[57])],w=!0)},p(B,U){U[0]&4194304&&b!==(b=Math.round(B[22])+"")&&ne(v,b),U[0]&4194304&&Ve(y,B[22])},d(B){B&&f(e),w=!1,Rt(P)}}}function Ku(s){let e,t,r="å¯¹æ¯”åŸå§‹å›¾åƒå’Œç¼–è¾‘åçš„æ•ˆæœ",u,a,o,d,p,h,m,b,v,g,C,y,D=!s[18]&&ln();return{c(){e=i("div"),t=i("p"),t.textContent=r,u=x(),a=i("div"),o=i("button"),d=L("â¬Œ åˆ†å±å¯¹æ¯”"),h=x(),m=i("button"),b=L("â‡„ åˆ‡æ¢å¯¹æ¯”"),g=x(),D&&D.c(),this.h()},l(T){e=c(T,"DIV",{class:!0});var F=_(e);t=c(F,"P",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-7b9tpb"&&(t.textContent=r),u=E(F),a=c(F,"DIV",{class:!0});var k=_(a);o=c(k,"BUTTON",{class:!0,title:!0});var I=_(o);d=S(I,"â¬Œ åˆ†å±å¯¹æ¯”"),I.forEach(f),h=E(k),m=c(k,"BUTTON",{class:!0,title:!0});var N=_(m);b=S(N,"â‡„ åˆ‡æ¢å¯¹æ¯”"),N.forEach(f),k.forEach(f),g=E(F),D&&D.l(F),F.forEach(f),this.h()},h(){n(t,"class","text-xs text-text-secondary"),o.disabled=p=!s[18],n(o,"class","px-3 py-2 bg-primary hover:bg-primary/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium text-sm disabled:cursor-not-allowed"),n(o,"title","å·¦å³åˆ†å±å¯¹æ¯”"),m.disabled=v=!s[18],n(m,"class","px-3 py-2 bg-primary hover:bg-primary/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium text-sm disabled:cursor-not-allowed"),n(m,"title","ç‚¹å‡»åˆ‡æ¢åŸå§‹/ç¼–è¾‘å"),n(a,"class","grid grid-cols-2 gap-2"),n(e,"class","space-y-2")},m(T,F){j(T,e,F),l(e,t),l(e,u),l(e,a),l(a,o),l(o,d),l(a,h),l(a,m),l(m,b),l(e,g),D&&D.m(e,null),C||(y=[z(o,"click",s[52]),z(m,"click",s[55])],C=!0)},p(T,F){F[0]&262144&&p!==(p=!T[18])&&(o.disabled=p),F[0]&262144&&v!==(v=!T[18])&&(m.disabled=v),T[18]?D&&(D.d(1),D=null):D||(D=ln(),D.c(),D.m(e,null))},d(T){T&&f(e),D&&D.d(),C=!1,Rt(y)}}}function ln(s){let e,t="âš ï¸ è¯·å…ˆè¿›è¡Œç¼–è¾‘æ“ä½œæ‰èƒ½ä½¿ç”¨å¯¹æ¯”åŠŸèƒ½";return{c(){e=i("p"),e.textContent=t,this.h()},l(r){e=c(r,"P",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1ifpvfp"&&(e.textContent=t),this.h()},h(){n(e,"class","text-xs text-warning")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function $u(s){let e;return{c(){e=L("ä½¿ç”¨ç©ºæ ¼é”®å¿«é€Ÿåˆ‡æ¢å›¾åƒ")},l(t){e=S(t,"ä½¿ç”¨ç©ºæ ¼é”®å¿«é€Ÿåˆ‡æ¢å›¾åƒ")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function eo(s){let e;return{c(){e=L("æ‹–åŠ¨åˆ†å‰²çº¿æˆ–ä½¿ç”¨æ»‘å—è°ƒæ•´å¯¹æ¯”ä½ç½®")},l(t){e=S(t,"æ‹–åŠ¨åˆ†å‰²çº¿æˆ–ä½¿ç”¨æ»‘å—è°ƒæ•´å¯¹æ¯”ä½ç½®")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function to(s){let e;return{c(){e=L("å¯¹æ¯”åŠŸèƒ½å¯ä»¥å¸®åŠ©ä½ æŸ¥çœ‹ç¼–è¾‘å‰åçš„å·®å¼‚")},l(t){e=S(t,"å¯¹æ¯”åŠŸèƒ½å¯ä»¥å¸®åŠ©ä½ æŸ¥çœ‹ç¼–è¾‘å‰åçš„å·®å¼‚")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function sn(s){let e,t='<div class="text-center text-text-secondary"><div class="text-4xl mb-2">ğŸ–¼ï¸</div> <p class="text-sm">è¯·é€‰æ‹©ä¸€å¼ å›¾åƒå¼€å§‹ç¼–è¾‘</p></div>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-pcf18"&&(e.innerHTML=t),this.h()},h(){n(e,"class","absolute inset-0 flex items-center justify-center pointer-events-none")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function rn(s){let e,t,r,u="å›¾åƒå°ºå¯¸:",a,o,d,p,h,m,b,v,g,C="å†å²è®°å½•:",y,D,T=s[2]+1+"",F,k,I=s[1].length+"",N,V,w,P='<p class="text-xs text-text-secondary">ğŸ’¡ <strong>æç¤º:</strong> ä½¿ç”¨è£å‰ªå·¥å…·æ—¶ï¼Œåœ¨ç”»å¸ƒä¸Šæ‹–åŠ¨é¼ æ ‡é€‰æ‹©åŒºåŸŸã€‚æ—‹è½¬å’Œç¼©æ”¾å·¥å…·ä¼šç«‹å³åº”ç”¨åˆ°æ•´ä¸ªå›¾åƒã€‚æ‰€æœ‰æ“ä½œéƒ½æ”¯æŒæ’¤é”€/é‡åšã€‚</p>';return{c(){e=i("div"),t=i("div"),r=i("span"),r.textContent=u,a=x(),o=i("span"),d=L(s[6]),p=L(" Ã— "),h=L(s[7]),m=L("px"),b=x(),v=i("div"),g=i("span"),g.textContent=C,y=x(),D=i("span"),F=L(T),k=L(" / "),N=L(I),V=x(),w=i("div"),w.innerHTML=P,this.h()},l(B){e=c(B,"DIV",{class:!0});var U=_(e);t=c(U,"DIV",{class:!0});var H=_(t);r=c(H,"SPAN",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-gbg2g0"&&(r.textContent=u),a=E(H),o=c(H,"SPAN",{class:!0});var A=_(o);d=S(A,s[6]),p=S(A," Ã— "),h=S(A,s[7]),m=S(A,"px"),A.forEach(f),H.forEach(f),b=E(U),v=c(U,"DIV",{class:!0});var M=_(v);g=c(M,"SPAN",{class:!0,"data-svelte-h":!0}),O(g)!=="svelte-qr537i"&&(g.textContent=C),y=E(M),D=c(M,"SPAN",{class:!0});var R=_(D);F=S(R,T),k=S(R," / "),N=S(R,I),R.forEach(f),M.forEach(f),U.forEach(f),V=E(B),w=c(B,"DIV",{class:!0,"data-svelte-h":!0}),O(w)!=="svelte-190ec17"&&(w.innerHTML=P),this.h()},h(){n(r,"class","text-text-secondary"),n(o,"class","text-text-primary font-mono"),n(t,"class","flex items-center justify-between text-sm"),n(g,"class","text-text-secondary"),n(D,"class","text-text-primary"),n(v,"class","flex items-center justify-between text-sm mt-2"),n(e,"class","p-3 bg-surface-elevated border border-border rounded-lg"),n(w,"class","p-3 bg-primary/10 border border-primary/30 rounded-lg")},m(B,U){j(B,e,U),l(e,t),l(t,r),l(t,a),l(t,o),l(o,d),l(o,p),l(o,h),l(o,m),l(e,b),l(e,v),l(v,g),l(v,y),l(v,D),l(D,F),l(D,k),l(D,N),j(B,V,U),j(B,w,U)},p(B,U){U[0]&64&&ne(d,B[6]),U[0]&128&&ne(h,B[7]),U[0]&4&&T!==(T=B[2]+1+"")&&ne(F,T),U[0]&2&&I!==(I=B[1].length+"")&&ne(N,I)},d(B){B&&(f(e),f(V),f(w))}}}function lo(s){let e,t,r,u="âœ‚ï¸ å›¾åƒç¼–è¾‘å™¨",a,o,d,p,h="ğŸ—‘ï¸ æ¸…ç©º",m,b,v,g="é€‰æ‹©å›¾åƒ",C,y,D,T,F,k,I,N,V,w,P,B,U,H,A=s[4]&&Qr(s);function M(G,X){return G[3]?qu:Ru}let R=M(s),q=R(s),W=s[4]&&Kr(s),Z=!s[4]&&sn(),K=s[4]&&rn(s);return{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("div"),A&&A.c(),d=x(),p=i("button"),p.textContent=h,m=x(),b=i("div"),v=i("label"),v.textContent=g,C=x(),y=i("input"),D=x(),T=i("button"),q.c(),F=x(),W&&W.c(),k=x(),I=i("div"),N=i("div"),V=i("canvas"),P=x(),Z&&Z.c(),B=x(),K&&K.c(),this.h()},l(G){e=c(G,"DIV",{class:!0});var X=_(e);t=c(X,"DIV",{class:!0});var pe=_(t);r=c(pe,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-jpfxvq"&&(r.textContent=u),a=E(pe),o=c(pe,"DIV",{class:!0});var Y=_(o);A&&A.l(Y),d=E(Y),p=c(Y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(p)!=="svelte-e32txe"&&(p.textContent=h),Y.forEach(f),pe.forEach(f),m=E(X),b=c(X,"DIV",{class:!0});var Q=_(b);v=c(Q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(v)!=="svelte-yos54t"&&(v.textContent=g),C=E(Q),y=c(Q,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),D=E(Q),T=c(Q,"BUTTON",{class:!0});var le=_(T);q.l(le),le.forEach(f),Q.forEach(f),F=E(X),W&&W.l(X),k=E(X),I=c(X,"DIV",{class:!0});var re=_(I);N=c(re,"DIV",{class:!0});var ae=_(N);V=c(ae,"CANVAS",{width:!0,height:!0,class:!0,style:!0}),_(V).forEach(f),ae.forEach(f),P=E(re),Z&&Z.l(re),re.forEach(f),B=E(X),K&&K.l(X),X.forEach(f),this.h()},h(){n(r,"class","text-lg font-semibold text-text-primary"),n(p,"class","px-3 py-1 text-sm bg-surface-elevated hover:bg-surface-elevated/80 border border-border rounded-lg text-text-secondary transition-colors"),n(p,"title","æ¸…ç©ºç”»å¸ƒ"),n(o,"class","flex gap-2"),n(t,"class","flex items-center justify-between mb-4"),n(v,"for","image-upload"),n(v,"class","block text-sm font-medium text-text-primary"),n(y,"id","image-upload"),n(y,"type","file"),n(y,"accept","image/*"),n(y,"class","hidden"),T.disabled=s[3],n(T,"class","w-full px-4 py-3 bg-primary hover:bg-primary/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(b,"class","space-y-2"),n(V,"width",s[6]),n(V,"height",s[7]),n(V,"class",w="max-w-full h-auto rounded-lg shadow-lg "+(s[21]==="split"?"cursor-ew-resize":s[21]==="toggle"?"cursor-pointer":s[8]==="crop"?"cursor-crosshair":"cursor-default")+" svelte-o3oskp"),zt(V,"image-rendering","auto"),n(N,"class","flex items-center justify-center min-h-[400px] p-4"),n(I,"class","relative border border-border rounded-lg overflow-hidden bg-surface-elevated"),n(e,"class","space-y-4")},m(G,X){j(G,e,X),l(e,t),l(t,r),l(t,a),l(t,o),A&&A.m(o,null),l(o,d),l(o,p),l(e,m),l(e,b),l(b,v),l(b,C),l(b,y),s[63](y),l(b,D),l(b,T),q.m(T,null),l(e,F),W&&W.m(e,null),l(e,k),l(e,I),l(I,N),l(N,V),s[75](V),l(I,P),Z&&Z.m(I,null),l(e,B),K&&K.m(e,null),U||(H=[z(p,"click",s[60]),z(y,"change",s[24]),z(T,"click",s[64]),z(V,"mousedown",s[76]),z(V,"mousemove",s[77]),z(V,"mouseup",s[33]),z(V,"mouseleave",s[33]),z(V,"click",s[78])],U=!0)},p(G,X){G[4]?A?A.p(G,X):(A=Qr(G),A.c(),A.m(o,d)):A&&(A.d(1),A=null),R===(R=M(G))&&q?q.p(G,X):(q.d(1),q=R(G),q&&(q.c(),q.m(T,null))),X[0]&8&&(T.disabled=G[3]),G[4]?W?W.p(G,X):(W=Kr(G),W.c(),W.m(e,k)):W&&(W.d(1),W=null),X[0]&64&&n(V,"width",G[6]),X[0]&128&&n(V,"height",G[7]),X[0]&2097408&&w!==(w="max-w-full h-auto rounded-lg shadow-lg "+(G[21]==="split"?"cursor-ew-resize":G[21]==="toggle"?"cursor-pointer":G[8]==="crop"?"cursor-crosshair":"cursor-default")+" svelte-o3oskp")&&n(V,"class",w),G[4]?Z&&(Z.d(1),Z=null):Z||(Z=sn(),Z.c(),Z.m(I,null)),G[4]?K?K.p(G,X):(K=rn(G),K.c(),K.m(e,null)):K&&(K.d(1),K=null)},i:pt,o:pt,d(G){G&&f(e),A&&A.d(),s[63](null),q.d(),W&&W.d(),s[75](null),Z&&Z.d(),K&&K.d(),U=!1,Rt(H)}}}const so=20;function ro(s,e){const t=s.data,r=s.width,u=s.height,a=new ImageData(r,u),o=a.data,d=Math.max(1,Math.floor(e/20));for(let p=0;p<u;p++)for(let h=0;h<r;h++){let m=0,b=0,v=0,g=0,C=0;for(let D=-d;D<=d;D++)for(let T=-d;T<=d;T++){const F=h+T,k=p+D;if(F>=0&&F<r&&k>=0&&k<u){const I=(k*r+F)*4;m+=t[I],b+=t[I+1],v+=t[I+2],g+=t[I+3],C++}}const y=(p*r+h)*4;o[y]=m/C,o[y+1]=b/C,o[y+2]=v/C,o[y+3]=g/C}return a}function no(s,e){const t=s.data,r=s.width,u=s.height,a=new ImageData(r,u),o=a.data,d=e/100,p=[0,-d,0,-d,1+4*d,-d,0,-d,0];for(let h=0;h<u;h++)for(let m=0;m<r;m++){let b=0,v=0,g=0;for(let y=-1;y<=1;y++)for(let D=-1;D<=1;D++){const T=Math.min(Math.max(m+D,0),r-1),k=(Math.min(Math.max(h+y,0),u-1)*r+T)*4,I=(y+1)*3+(D+1);b+=t[k]*p[I],v+=t[k+1]*p[I],g+=t[k+2]*p[I]}const C=(h*r+m)*4;o[C]=Math.max(0,Math.min(255,b)),o[C+1]=Math.max(0,Math.min(255,v)),o[C+2]=Math.max(0,Math.min(255,g)),o[C+3]=t[C+3]}return a}function ao(s){const e=s.data,t=new ImageData(new Uint8ClampedArray(e),s.width,s.height),r=t.data;for(let u=0;u<r.length;u+=4){const a=.299*r[u]+.587*r[u+1]+.114*r[u+2];r[u]=a,r[u+1]=a,r[u+2]=a}return t}function uo(s,e,t){let r=null,u,a=null,o=[],d=-1,p=!1,h=!1,m,b=512,v=512,g="none",C=0,y=0,D=0,T=0,F=!1,k=null,I=0,N=0,V=1,w=1,P=!0,B=0,U=0,H=0,A=null,M="none",R=100,q="none",W=50,Z=!1;is(()=>{u&&(a=u.getContext("2d",{willReadFrequently:!0}),a&&(a.fillStyle="#1a1a1a",a.fillRect(0,0,u.width,u.height)));const ue=se=>{se.code==="Space"&&q==="toggle"&&(se.preventDefault(),fe()),se.code==="Escape"&&q!=="none"&&(se.preventDefault(),he())};return window.addEventListener("keydown",ue),()=>{window.removeEventListener("keydown",ue)}});function K(ue){var te;const Le=(te=ue.target.files)==null?void 0:te[0];if(!Le)return;if(!Le.type.startsWith("image/")){_t({type:gt.VALIDATION,message:"è¯·é€‰æ‹©å›¾åƒæ–‡ä»¶",details:"åªæ”¯æŒå›¾åƒæ ¼å¼ï¼ˆPNG, JPG, WebPç­‰ï¼‰",recoverable:!0,suggestions:["é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆçš„å›¾åƒæ–‡ä»¶"]});return}t(3,p=!0);const ee=new FileReader;ee.onload=De=>{var xt;const dt=(xt=De.target)==null?void 0:xt.result;G(dt),nl()},ee.onerror=()=>{t(3,p=!1),_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•è¯»å–é€‰æ‹©çš„æ–‡ä»¶",recoverable:!0,suggestions:["å°è¯•é€‰æ‹©å…¶ä»–å›¾åƒæ–‡ä»¶"]})},ee.readAsDataURL(Le)}function G(ue){const se=new Image;se.onload=()=>{r=se;const Le=800,ee=600;let te=se.width,De=se.height;if(te>Le||De>ee){const dt=Math.min(Le/te,ee/De);te=Math.floor(te*dt),De=Math.floor(De*dt)}t(6,b=te),t(7,v=De),t(0,u.width=te,u),t(0,u.height=De,u),a&&(a.clearRect(0,0,te,De),a.drawImage(se,0,0,te,De),X(),t(4,h=!0),t(3,p=!1))},se.onerror=()=>{t(3,p=!1),_t({type:gt.VALIDATION,message:"å›¾åƒåŠ è½½å¤±è´¥",details:"æ— æ³•åŠ è½½å›¾åƒåˆ°ç”»å¸ƒ",recoverable:!0,suggestions:["å°è¯•é€‰æ‹©å…¶ä»–å›¾åƒæ–‡ä»¶"]})},se.src=ue}function X(){if(!a)return;t(1,o=o.slice(0,d+1));const ue=a.getImageData(0,0,u.width,u.height);o.push(ue),o.length>so?o.shift():t(2,d++,d)}function pe(){if(!Q()||!a)return;t(2,d--,d);const ue=o[d];a.putImageData(ue,0,0)}function Y(){if(!le()||!a)return;t(2,d++,d);const ue=o[d];a.putImageData(ue,0,0)}function Q(){return d>0}function le(){return d<o.length-1}function re(){a&&(r?(a.clearRect(0,0,u.width,u.height),a.drawImage(r,0,0,u.width,u.height),t(10,I=0),t(11,N=0),t(12,V=1),t(13,w=1),t(9,k=null),t(8,g="none"),t(15,B=0),t(16,U=0),t(17,H=0),t(18,A=null),t(19,M="none"),t(20,R=100),t(1,o=[]),t(2,d=-1),X()):(a.fillStyle="#1a1a1a",a.fillRect(0,0,u.width,u.height),t(1,o=[]),t(2,d=-1),t(4,h=!1)))}function ae(){t(8,g="crop"),t(9,k=null)}function we(ue){if(g!=="crop")return;const se=u.getBoundingClientRect(),Le=u.width/se.width,ee=u.height/se.height;C=(ue.clientX-se.left)*Le,y=(ue.clientY-se.top)*ee,F=!0}function J(ue){if(!F||g!=="crop")return;const se=u.getBoundingClientRect(),Le=u.width/se.width,ee=u.height/se.height;D=(ue.clientX-se.left)*Le,T=(ue.clientY-se.top)*ee,be()}function Ie(){if(!F||g!=="crop")return;F=!1;const ue=Math.min(C,D),se=Math.min(y,T),Le=Math.abs(D-C),ee=Math.abs(T-y);Le>10&&ee>10&&t(9,k={x:ue,y:se,width:Le,height:ee})}function be(){if(!a||!h)return;const ue=o[d];ue&&a.putImageData(ue,0,0);const se=Math.min(C,D),Le=Math.min(y,T),ee=Math.abs(D-C),te=Math.abs(T-y);a.fillStyle="rgba(0, 0, 0, 0.5)",a.fillRect(0,0,u.width,u.height),a.clearRect(se,Le,ee,te);const De=o[d];De&&a.putImageData(De,0,0,se,Le,ee,te),a.strokeStyle="#00ff00",a.lineWidth=2,a.strokeRect(se,Le,ee,te)}function Se(){if(!a||!k)return;const{x:ue,y:se,width:Le,height:ee}=k,te=a.getImageData(ue,se,Le,ee);t(0,u.width=Le,u),t(0,u.height=ee,u),t(6,b=Le),t(7,v=ee),a.putImageData(te,0,0),X(),t(9,k=null),t(8,g="none")}function ze(){t(9,k=null),t(8,g="none"),a&&o[d]&&a.putImageData(o[d],0,0)}function et(){Ae(90)}function Pe(){Ae(180)}function Oe(){Ae(270)}function We(){N!==0&&Ae(N)}function Ae(ue){if(!a||!h)return;const se=a.getImageData(0,0,u.width,u.height),Le=document.createElement("canvas"),ee=Le.getContext("2d");if(!ee)return;const te=ue*Math.PI/180;ue%90===0&&ue%180!==0?(Le.width=u.height,Le.height=u.width):(Le.width=u.width,Le.height=u.height),ee.translate(Le.width/2,Le.height/2),ee.rotate(te),ee.translate(-u.width/2,-u.height/2),ee.putImageData(se,0,0),t(0,u.width=Le.width,u),t(0,u.height=Le.height,u),t(6,b=Le.width),t(7,v=Le.height),a.clearRect(0,0,u.width,u.height),a.drawImage(Le,0,0),X(),t(10,I=(I+ue)%360)}function Re(){if(!a||!h)return;if(V<=0||w<=0){_t({type:gt.VALIDATION,message:"ç¼©æ”¾æ¯”ä¾‹æ— æ•ˆ",details:"ç¼©æ”¾æ¯”ä¾‹å¿…é¡»å¤§äº0",recoverable:!0,suggestions:["è¯·è¾“å…¥æœ‰æ•ˆçš„ç¼©æ”¾æ¯”ä¾‹"]});return}const ue=a.getImageData(0,0,u.width,u.height),se=document.createElement("canvas"),Le=se.getContext("2d");if(!Le)return;se.width=u.width,se.height=u.height,Le.putImageData(ue,0,0);const ee=Math.floor(u.width*V),te=Math.floor(u.height*w);t(0,u.width=ee,u),t(0,u.height=te,u),t(6,b=ee),t(7,v=te),a.clearRect(0,0,ee,te),a.drawImage(se,0,0,ee,te),X(),t(12,V=1),t(13,w=1)}function Xe(){P&&t(13,w=V)}function at(){P&&t(12,V=w)}function me(){if(!a||!h)return;!A&&o[d]&&t(18,A=a.getImageData(0,0,u.width,u.height));const ue=A?new ImageData(new Uint8ClampedArray(A.data),A.width,A.height):a.getImageData(0,0,u.width,u.height),se=ue.data,Le=B/100,ee=(U+100)/100,te=(H+100)/100;for(let De=0;De<se.length;De+=4){let dt=se[De],xt=se[De+1],bt=se[De+2];dt+=Le*255,xt+=Le*255,bt+=Le*255,dt=((dt/255-.5)*ee+.5)*255,xt=((xt/255-.5)*ee+.5)*255,bt=((bt/255-.5)*ee+.5)*255;const kt=.299*dt+.587*xt+.114*bt;dt=kt+(dt-kt)*te,xt=kt+(xt-kt)*te,bt=kt+(bt-kt)*te,se[De]=Math.max(0,Math.min(255,dt)),se[De+1]=Math.max(0,Math.min(255,xt)),se[De+2]=Math.max(0,Math.min(255,bt))}a.putImageData(ue,0,0)}function ke(){me()}function qe(){me()}function de(){me()}function Qe(){t(15,B=0),t(16,U=0),t(17,H=0),A&&a&&a.putImageData(A,0,0)}function Me(){a&&(X(),t(18,A=a.getImageData(0,0,u.width,u.height)),t(15,B=0),t(16,U=0),t(17,H=0))}function Ee(){if(!a||!h||M==="none")return;!A&&o[d]&&t(18,A=a.getImageData(0,0,u.width,u.height));const ue=A||a.getImageData(0,0,u.width,u.height);let se;switch(M){case"blur":se=ro(ue,R);break;case"sharpen":se=no(ue,R);break;case"grayscale":se=ao(ue);break;default:return}a.putImageData(se,0,0)}function Ke(){M==="none"?A&&a&&a.putImageData(A,0,0):Ee()}function ce(){M!=="none"&&M!=="grayscale"&&Ee()}function Ue(){!a||M==="none"||(X(),t(18,A=a.getImageData(0,0,u.width,u.height)),t(19,M="none"),t(20,R=100))}function Fe(){t(19,M="none"),t(20,R=100),A&&a&&a.putImageData(A,0,0)}function oe(){!A||!a||(t(21,q="split"),t(22,W=50),_e())}function _e(){if(!a||!A||q!=="split")return;const ue=a.getImageData(0,0,u.width,u.height),se=Math.floor(u.width*(W/100)),Le=document.createElement("canvas");Le.width=u.width,Le.height=u.height;const ee=Le.getContext("2d");if(!ee)return;ee.putImageData(A,0,0),ee.putImageData(ue,0,0,se,0,u.width-se,u.height),ee.strokeStyle="#00ff00",ee.lineWidth=3,ee.beginPath(),ee.moveTo(se,0),ee.lineTo(se,u.height),ee.stroke(),ee.fillStyle="#00ff00",ee.beginPath(),ee.arc(se,u.height/2,10,0,Math.PI*2),ee.fill(),ee.font="bold 14px sans-serif",ee.fillStyle="#ffffff",ee.strokeStyle="#000000",ee.lineWidth=3;const te="åŸå§‹";ee.strokeText(te,10,30),ee.fillText(te,10,30);const De="ç¼–è¾‘å",dt=ee.measureText(De).width;ee.strokeText(De,u.width-dt-10,30),ee.fillText(De,u.width-dt-10,30),a.clearRect(0,0,u.width,u.height),a.drawImage(Le,0,0)}function ie(ue){if(q!=="split")return;const se=u.getBoundingClientRect(),Le=ue.clientX-se.left;t(22,W=Math.max(0,Math.min(100,Le/se.width*100))),_e()}function $(){!A||!a||(t(21,q="toggle"),t(23,Z=!1))}function fe(){if(!(!a||!A||q!=="toggle"))if(t(23,Z=!Z),Z)a.putImageData(A,0,0);else{const ue=o[d];ue&&a.putImageData(ue,0,0)}}function he(){t(21,q="none"),t(23,Z=!1),a&&o[d]&&a.putImageData(o[d],0,0)}function Be(){if(!(!u||q==="none"))try{let ue;if(q==="split")ue=u;else{ue=document.createElement("canvas"),ue.width=u.width*2,ue.height=u.height;const ee=ue.getContext("2d");if(ee&&A){const te=document.createElement("canvas");te.width=u.width,te.height=u.height;const De=te.getContext("2d");De&&(De.putImageData(A,0,0),ee.drawImage(te,0,0));const dt=o[d];if(dt){const kt=document.createElement("canvas");kt.width=u.width,kt.height=u.height;const Tt=kt.getContext("2d");Tt&&(Tt.putImageData(dt,0,0),ee.drawImage(kt,u.width,0))}ee.strokeStyle="#00ff00",ee.lineWidth=3,ee.beginPath(),ee.moveTo(u.width,0),ee.lineTo(u.width,u.height),ee.stroke(),ee.font="bold 16px sans-serif",ee.fillStyle="#ffffff",ee.strokeStyle="#000000",ee.lineWidth=3,ee.strokeText("åŸå§‹",10,30),ee.fillText("åŸå§‹",10,30);const xt="ç¼–è¾‘å",bt=ee.measureText(xt).width;ee.strokeText(xt,u.width+10,30),ee.fillText(xt,u.width+10,30)}}const se=ue.toDataURL("image/png"),Le=document.createElement("a");Le.href=se,Le.download=`comparison_${Date.now()}.png`,Le.click()}catch(ue){_t({type:gt.VALIDATION,message:"å¯¹æ¯”å›¾å¯¼å‡ºå¤±è´¥",details:ue instanceof Error?ue.message:String(ue),recoverable:!0,suggestions:["å°è¯•é‡æ–°å¯¼å‡º"]})}}function Ge(){if(u)try{const ue=u.toDataURL("image/png"),se=document.createElement("a");se.href=ue,se.download=`edited_image_${Date.now()}.png`,se.click()}catch(ue){_t({type:gt.VALIDATION,message:"å›¾åƒä¸‹è½½å¤±è´¥",details:ue instanceof Error?ue.message:String(ue),recoverable:!0,suggestions:["å°è¯•é‡æ–°ä¸‹è½½"]})}}function lt(){r=null,t(4,h=!1),t(1,o=[]),t(2,d=-1),a&&(a.fillStyle="#1a1a1a",a.fillRect(0,0,u.width,u.height)),nl()}function it(){return u.toDataURL("image/png")}function He(){return u}function je(ue){ul[ue?"unshift":"push"](()=>{m=ue,t(5,m)})}const Ze=()=>m.click();function ve(){N=Ht(this.value),t(11,N)}function ye(){P=this.checked,t(14,P)}function Ne(){V=Ht(this.value),t(12,V)}function mt(){w=Ht(this.value),t(13,w)}function st(){M=ss(this),t(19,M)}function rt(){R=Ht(this.value),t(20,R)}function vt(){W=Ht(this.value),t(22,W)}function yt(){B=Ht(this.value),t(15,B)}function ut(){U=Ht(this.value),t(16,U)}function ct(){H=Ht(this.value),t(17,H)}function ft(ue){ul[ue?"unshift":"push"](()=>{u=ue,t(0,u)})}return[u,o,d,p,h,m,b,v,g,k,I,N,V,w,P,B,U,H,A,M,R,q,W,Z,K,pe,Y,Q,le,re,ae,we,J,Ie,Se,ze,et,Pe,Oe,We,Re,Xe,at,ke,qe,de,Qe,Me,Ke,ce,Ue,Fe,oe,_e,ie,$,fe,he,Be,Ge,lt,it,He,je,Ze,ve,ye,Ne,mt,st,rt,vt,yt,ut,ct,ft,ue=>{q==="split"?ie(ue):we(ue)},ue=>{q==="split"&&ue.buttons===1?ie(ue):J(ue)},()=>{q==="toggle"&&fe()}]}class oo extends Al{constructor(e){super(),Tl(this,e,uo,lo,Il,{getImageDataURL:61,getCanvas:62},null,[-1,-1,-1,-1])}get getImageDataURL(){return this.$$.ctx[61]}get getCanvas(){return this.$$.ctx[62]}}function xs(s,e="numeric"){if(!s||!s.trim())return{values:[],count:0,isValid:!1,error:"å‚æ•°å€¼ä¸èƒ½ä¸ºç©º"};const t=s.trim(),r=[];try{const u=t.split(",").map(o=>o.trim()).filter(o=>o);for(const o of u)if(io(o)){const d=co(o);r.push(...d)}else{const d=fo(o,e);d!==null&&r.push(d)}const a=Array.from(new Set(r.map(o=>String(o)))).map(o=>{const d=r.find(p=>String(p)===o);return d!==void 0?d:o});return{values:a,count:a.length,isValid:a.length>0,error:a.length===0?"æœªèƒ½è§£æå‡ºæœ‰æ•ˆçš„å‚æ•°å€¼":void 0}}catch(u){return{values:[],count:0,isValid:!1,error:u instanceof Error?u.message:"è§£æå¤±è´¥"}}}function io(s){return/[\d.]+\s*-\s*[\d.]+/.test(s)}function co(s){const e=s.match(/([\d.]+)\s*-\s*([\d.]+)/);if(!e)throw new Error(`æ— æ•ˆçš„èŒƒå›´è¡¨è¾¾å¼: ${s}`);const t=parseFloat(e[1]),r=parseFloat(e[2]);if(isNaN(t)||isNaN(r))throw new Error(`æ— æ•ˆçš„æ•°å€¼: ${s}`);if(t>=r)throw new Error(`èµ·å§‹å€¼å¿…é¡»å°äºç»“æŸå€¼: ${s}`);let u=1;const a=s.match(/(?:æ­¥é•¿|step)\s*([\d.]+)/i)||s.match(/:([\d.]+)/);if(a){if(u=parseFloat(a[1]),isNaN(u)||u<=0)throw new Error(`æ— æ•ˆçš„æ­¥é•¿: ${a[1]}`)}else{const m=r-t;m<=10?u=1:m<=100?u=10:u=Math.pow(10,Math.floor(Math.log10(m))-1)}const o=[];let d=t;const p=100;let h=0;for(;d<=r&&h<p;)o.push(parseFloat(d.toFixed(10))),d+=u,h++;if(h>=p)throw new Error(`èŒƒå›´è¡¨è¾¾å¼ç”Ÿæˆçš„å€¼è¿‡å¤š (>${p})ï¼Œè¯·å¢å¤§æ­¥é•¿`);return o}function fo(s,e){if(e==="numeric"||e==="steps"||e==="cfg_scale"||e==="denoising_strength"||e==="seed"||e==="width"||e==="height"){const t=parseFloat(s);return isNaN(t)?null:t}return s}function ho(s,e,t=null,r=100){const u=xs(s);if(!u.isValid)return{isValid:!1,error:`Xè½´: ${u.error}`,totalCombinations:0};const a=xs(e);if(!a.isValid)return{isValid:!1,error:`Yè½´: ${a.error}`,totalCombinations:0};let o=null;if(t&&t.trim()&&(o=xs(t),!o.isValid))return{isValid:!1,error:`Zè½´: ${o.error}`,totalCombinations:0};const d=u.count*a.count*((o==null?void 0:o.count)||1);return d>r?{isValid:!1,error:`ç”Ÿæˆæ•°é‡ (${d}) è¶…è¿‡é™åˆ¶ (${r})`,totalCombinations:d}:d<2?{isValid:!1,error:"XYZ Plotéœ€è¦è‡³å°‘2ä¸ªå‚æ•°ç»„åˆ",totalCombinations:d}:{isValid:!0,totalCombinations:d}}function jl(s){return{steps:"20, 30, 40, 50",cfg_scale:"5.0-10.0:2.5",denoising_strength:"0.5-0.9, æ­¥é•¿0.1",seed:"42, 123, 456",sampler:"euler, euler_a, dpm++",scheduler:"normal, karras, exponential",width:"512, 768, 1024",height:"512, 768, 1024"}[s]||"1, 2, 3"}function nn(s,e,t){const r=s.slice();return r[18]=e[t],r[20]=t,r}function an(s,e,t){const r=s.slice();return r[21]=e[t],r[23]=t,r}function un(s,e,t){const r=s.slice();r[24]=e[t],r[27]=t;const u=r[5](r[27],r[23],r[20]);return r[25]=u,r}function on(s,e,t){const r=s.slice();return r[24]=e[t],r}function cn(s,e,t){const r=s.slice();return r[30]=e[t],r[20]=t,r}function po(s){let e,t='<div class="text-4xl mb-3">ğŸ“Š</div> <p class="text-sm">æš‚æ— ç»“æœ</p> <p class="text-xs mt-1">é…ç½®å‚æ•°å¹¶ç”Ÿæˆç½‘æ ¼åï¼Œç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1hgt3wj"&&(e.innerHTML=t),this.h()},h(){n(e,"class","p-8 text-center text-text-secondary")},m(r,u){j(r,e,u)},p:pt,d(r){r&&f(e)}}}function mo(s){var at;let e,t,r,u="ğŸ“Š XYZ Plot ç»“æœ",a,o,d,p,h,m="ğŸ—‘ï¸ æ¸…é™¤",b,v,g,C,y,D="Xè½´:",T,F=s[4](s[0].xAxis.type)+"",k,I,N=s[0].xAxis.values.length+"",V,w,P,B,U,H="Yè½´:",A,M=s[4](s[0].yAxis.type)+"",R,q,W=s[0].yAxis.values.length+"",Z,K,G,X,pe,Y,Q="æ€»è®¡:",le,re=s[0].images.length+"",ae,we,J,Ie,be,Se,ze;function et(me,ke){return me[3]?bo:vo}let Pe=et(s),Oe=Pe(s),We=s[0].zAxis&&fn(s),Ae=s[0].zAxis&&dn(s),Re=Gt(Array(((at=s[0].zAxis)==null?void 0:at.values.length)||1)),Xe=[];for(let me=0;me<Re.length;me+=1)Xe[me]=_n(nn(s,Re,me));return{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("div"),d=i("button"),Oe.c(),p=x(),h=i("button"),h.textContent=m,b=x(),v=i("div"),g=i("div"),C=i("span"),y=i("strong"),y.textContent=D,T=x(),k=L(F),I=L(" ("),V=L(N),w=L("ä¸ªå€¼)"),P=x(),B=i("span"),U=i("strong"),U.textContent=H,A=x(),R=L(M),q=L(" ("),Z=L(W),K=L("ä¸ªå€¼)"),G=x(),We&&We.c(),X=x(),pe=i("span"),Y=i("strong"),Y.textContent=Q,le=x(),ae=L(re),we=L(" å¼ å›¾åƒ"),J=x(),Ae&&Ae.c(),Ie=x(),be=i("div");for(let me=0;me<Xe.length;me+=1)Xe[me].c();this.h()},l(me){e=c(me,"DIV",{class:!0});var ke=_(e);t=c(ke,"DIV",{class:!0});var qe=_(t);r=c(qe,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-60xen5"&&(r.textContent=u),a=E(qe),o=c(qe,"DIV",{class:!0});var de=_(o);d=c(de,"BUTTON",{class:!0});var Qe=_(d);Oe.l(Qe),Qe.forEach(f),p=E(de),h=c(de,"BUTTON",{class:!0,"data-svelte-h":!0}),O(h)!=="svelte-tgy0ob"&&(h.textContent=m),de.forEach(f),qe.forEach(f),b=E(ke),v=c(ke,"DIV",{class:!0});var Me=_(v);g=c(Me,"DIV",{class:!0});var Ee=_(g);C=c(Ee,"SPAN",{});var Ke=_(C);y=c(Ke,"STRONG",{"data-svelte-h":!0}),O(y)!=="svelte-4ylim8"&&(y.textContent=D),T=E(Ke),k=S(Ke,F),I=S(Ke," ("),V=S(Ke,N),w=S(Ke,"ä¸ªå€¼)"),Ke.forEach(f),P=E(Ee),B=c(Ee,"SPAN",{});var ce=_(B);U=c(ce,"STRONG",{"data-svelte-h":!0}),O(U)!=="svelte-1gbqpgt"&&(U.textContent=H),A=E(ce),R=S(ce,M),q=S(ce," ("),Z=S(ce,W),K=S(ce,"ä¸ªå€¼)"),ce.forEach(f),G=E(Ee),We&&We.l(Ee),X=E(Ee),pe=c(Ee,"SPAN",{class:!0});var Ue=_(pe);Y=c(Ue,"STRONG",{"data-svelte-h":!0}),O(Y)!=="svelte-15c9gbs"&&(Y.textContent=Q),le=E(Ue),ae=S(Ue,re),we=S(Ue," å¼ å›¾åƒ"),Ue.forEach(f),Ee.forEach(f),Me.forEach(f),J=E(ke),Ae&&Ae.l(ke),Ie=E(ke),be=c(ke,"DIV",{class:!0});var Fe=_(be);for(let oe=0;oe<Xe.length;oe+=1)Xe[oe].l(Fe);Fe.forEach(f),ke.forEach(f),this.h()},h(){n(r,"class","text-lg font-semibold text-text-primary"),d.disabled=s[3],n(d,"class","px-3 py-1.5 text-sm bg-primary hover:bg-primary/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors disabled:cursor-not-allowed"),n(h,"class","px-3 py-1.5 text-sm bg-surface-elevated hover:bg-surface-elevated/80 border border-border rounded-lg text-text-secondary transition-colors"),n(o,"class","flex gap-2"),n(t,"class","flex items-center justify-between"),n(pe,"class","ml-auto"),n(g,"class","flex items-center gap-4 text-sm text-text-primary"),n(v,"class","p-3 bg-info/10 border border-info/30 rounded-lg"),n(be,"class","space-y-8"),n(e,"class","space-y-4")},m(me,ke){j(me,e,ke),l(e,t),l(t,r),l(t,a),l(t,o),l(o,d),Oe.m(d,null),l(o,p),l(o,h),l(e,b),l(e,v),l(v,g),l(g,C),l(C,y),l(C,T),l(C,k),l(C,I),l(C,V),l(C,w),l(g,P),l(g,B),l(B,U),l(B,A),l(B,R),l(B,q),l(B,Z),l(B,K),l(g,G),We&&We.m(g,null),l(g,X),l(g,pe),l(pe,Y),l(pe,le),l(pe,ae),l(pe,we),l(e,J),Ae&&Ae.m(e,null),l(e,Ie),l(e,be);for(let qe=0;qe<Xe.length;qe+=1)Xe[qe]&&Xe[qe].m(be,null);Se||(ze=[z(d,"click",s[8]),z(h,"click",s[9])],Se=!0)},p(me,ke){var qe;if(Pe!==(Pe=et(me))&&(Oe.d(1),Oe=Pe(me),Oe&&(Oe.c(),Oe.m(d,null))),ke[0]&8&&(d.disabled=me[3]),ke[0]&1&&F!==(F=me[4](me[0].xAxis.type)+"")&&ne(k,F),ke[0]&1&&N!==(N=me[0].xAxis.values.length+"")&&ne(V,N),ke[0]&1&&M!==(M=me[4](me[0].yAxis.type)+"")&&ne(R,M),ke[0]&1&&W!==(W=me[0].yAxis.values.length+"")&&ne(Z,W),me[0].zAxis?We?We.p(me,ke):(We=fn(me),We.c(),We.m(g,X)):We&&(We.d(1),We=null),ke[0]&1&&re!==(re=me[0].images.length+"")&&ne(ae,re),me[0].zAxis?Ae?Ae.p(me,ke):(Ae=dn(me),Ae.c(),Ae.m(e,Ie)):Ae&&(Ae.d(1),Ae=null),ke[0]&113){Re=Gt(Array(((qe=me[0].zAxis)==null?void 0:qe.values.length)||1));let de;for(de=0;de<Re.length;de+=1){const Qe=nn(me,Re,de);Xe[de]?Xe[de].p(Qe,ke):(Xe[de]=_n(Qe),Xe[de].c(),Xe[de].m(be,null))}for(;de<Xe.length;de+=1)Xe[de].d(1);Xe.length=Re.length}},d(me){me&&f(e),Oe.d(),We&&We.d(),Ae&&Ae.d(),Sl(Xe,me),Se=!1,Rt(ze)}}}function vo(s){let e;return{c(){e=L("ğŸ“¥ æ‰¹é‡ä¸‹è½½")},l(t){e=S(t,"ğŸ“¥ æ‰¹é‡ä¸‹è½½")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function bo(s){let e,t=`<div class="animate-spin h-3 w-3 border-2 border-white border-t-transparent rounded-full"></div>
              ä¸‹è½½ä¸­...`;return{c(){e=i("span"),e.innerHTML=t,this.h()},l(r){e=c(r,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-bdnt1j"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center gap-2")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function fn(s){let e,t,r="Zè½´:",u,a=s[4](s[0].zAxis.type)+"",o,d,p=s[0].zAxis.values.length+"",h,m;return{c(){e=i("span"),t=i("strong"),t.textContent=r,u=x(),o=L(a),d=L(" ("),h=L(p),m=L("ä¸ªå€¼)")},l(b){e=c(b,"SPAN",{});var v=_(e);t=c(v,"STRONG",{"data-svelte-h":!0}),O(t)!=="svelte-1ld8qau"&&(t.textContent=r),u=E(v),o=S(v,a),d=S(v," ("),h=S(v,p),m=S(v,"ä¸ªå€¼)"),v.forEach(f)},m(b,v){j(b,e,v),l(e,t),l(e,u),l(e,o),l(e,d),l(e,h),l(e,m)},p(b,v){v[0]&1&&a!==(a=b[4](b[0].zAxis.type)+"")&&ne(o,a),v[0]&1&&p!==(p=b[0].zAxis.values.length+"")&&ne(h,p)},d(b){b&&f(e)}}}function dn(s){let e,t,r=s[4](s[0].zAxis.type)+"",u,a,o,d,p=Gt(s[0].zAxis.values),h=[];for(let m=0;m<p.length;m+=1)h[m]=hn(cn(s,p,m));return{c(){e=i("div"),t=i("label"),u=L(r),a=L(" é€‰æ‹©:"),o=x(),d=i("div");for(let m=0;m<h.length;m+=1)h[m].c();this.h()},l(m){e=c(m,"DIV",{class:!0});var b=_(e);t=c(b,"LABEL",{class:!0});var v=_(t);u=S(v,r),a=S(v," é€‰æ‹©:"),v.forEach(f),o=E(b),d=c(b,"DIV",{class:!0});var g=_(d);for(let C=0;C<h.length;C+=1)h[C].l(g);g.forEach(f),b.forEach(f),this.h()},h(){n(t,"class","block text-sm font-medium text-text-primary mb-2"),n(d,"class","flex flex-wrap gap-2"),n(e,"class","p-4 bg-surface-elevated border border-border rounded-lg")},m(m,b){j(m,e,b),l(e,t),l(t,u),l(t,a),l(e,o),l(e,d);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(d,null)},p(m,b){if(b[0]&1&&r!==(r=m[4](m[0].zAxis.type)+"")&&ne(u,r),b[0]&1){p=Gt(m[0].zAxis.values);let v;for(v=0;v<p.length;v+=1){const g=cn(m,p,v);h[v]?h[v].p(g,b):(h[v]=hn(g),h[v].c(),h[v].m(d,null))}for(;v<h.length;v+=1)h[v].d(1);h.length=p.length}},d(m){m&&f(e),Sl(h,m)}}}function hn(s){let e,t=Fl(s[30])+"",r,u,a,o;function d(){return s[13](s[20])}return{c(){e=i("button"),r=L(t),u=x(),this.h()},l(p){e=c(p,"BUTTON",{class:!0});var h=_(e);r=S(h,t),u=E(h),h.forEach(f),this.h()},h(){n(e,"class","px-3 py-1.5 text-sm bg-surface hover:bg-primary/20 border border-border hover:border-primary rounded-lg text-text-primary transition-colors")},m(p,h){j(p,e,h),l(e,r),l(e,u),a||(o=z(e,"click",d),a=!0)},p(p,h){s=p,h[0]&1&&t!==(t=Fl(s[30])+"")&&ne(r,t)},d(p){p&&f(e),a=!1,o()}}}function pn(s){let e,t=s[4](s[0].zAxis.type)+"",r,u,a=Fl(s[0].zAxis.values[s[20]])+"",o;return{c(){e=i("h4"),r=L(t),u=L(": "),o=L(a),this.h()},l(d){e=c(d,"H4",{class:!0});var p=_(e);r=S(p,t),u=S(p,": "),o=S(p,a),p.forEach(f),this.h()},h(){n(e,"class","text-md font-semibold text-text-primary")},m(d,p){j(d,e,p),l(e,r),l(e,u),l(e,o)},p(d,p){p[0]&1&&t!==(t=d[4](d[0].zAxis.type)+"")&&ne(r,t),p[0]&1&&a!==(a=Fl(d[0].zAxis.values[d[20]])+"")&&ne(o,a)},d(d){d&&f(e)}}}function mn(s){let e,t=Fl(s[24])+"",r,u;return{c(){e=i("th"),r=L(t),u=x(),this.h()},l(a){e=c(a,"TH",{class:!0});var o=_(e);r=S(o,t),u=E(o),o.forEach(f),this.h()},h(){n(e,"class","p-2 bg-surface-elevated border border-border text-sm font-medium text-text-primary min-w-[120px] svelte-1p3rmve")},m(a,o){j(a,e,o),l(e,r),l(e,u)},p(a,o){o[0]&1&&t!==(t=Fl(a[24])+"")&&ne(r,t)},d(a){a&&f(e)}}}function _o(s){let e,t="åŠ è½½ä¸­...";return{c(){e=i("div"),e.textContent=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1cqsxyc"&&(e.textContent=t),this.h()},h(){n(e,"class","w-full aspect-square bg-surface-elevated flex items-center justify-center text-text-secondary text-xs")},m(r,u){j(r,e,u)},p:pt,d(r){r&&f(e)}}}function go(s){let e,t,r,u,a,o='<span class="text-white opacity-0 group-hover:opacity-100 transition-opacity text-2xl">ğŸ”</span>',d,p;function h(){return s[14](s[27],s[23],s[20])}return{c(){e=i("button"),t=i("img"),u=x(),a=i("div"),a.innerHTML=o,this.h()},l(m){e=c(m,"BUTTON",{class:!0});var b=_(e);t=c(b,"IMG",{src:!0,alt:!0,class:!0}),u=E(b),a=c(b,"DIV",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-1p580kq"&&(a.innerHTML=o),b.forEach(f),this.h()},h(){Jt(t.src,r=s[0].images[s[25]])||n(t,"src",r),n(t,"alt","Result "+s[25]),n(t,"class","w-full h-auto object-cover transition-transform group-hover:scale-105"),n(a,"class","absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center"),n(e,"class","block w-full h-full group relative overflow-hidden rounded-lg hover:ring-2 hover:ring-primary transition-all svelte-1p3rmve")},m(m,b){j(m,e,b),l(e,t),l(e,u),l(e,a),d||(p=z(e,"click",h),d=!0)},p(m,b){s=m,b[0]&1&&!Jt(t.src,r=s[0].images[s[25]])&&n(t,"src",r)},d(m){m&&f(e),d=!1,p()}}}function vn(s){let e;function t(a,o){return a[25]>=0&&a[25]<a[0].images.length?go:_o}let r=t(s),u=r(s);return{c(){e=i("td"),u.c(),this.h()},l(a){e=c(a,"TD",{class:!0});var o=_(e);u.l(o),o.forEach(f),this.h()},h(){n(e,"class","p-2 border border-border bg-surface svelte-1p3rmve")},m(a,o){j(a,e,o),u.m(e,null)},p(a,o){r===(r=t(a))&&u?u.p(a,o):(u.d(1),u=r(a),u&&(u.c(),u.m(e,null)))},d(a){a&&f(e),u.d()}}}function bn(s){let e,t,r=Fl(s[21])+"",u,a,o,d=Gt(s[0].xAxis.values),p=[];for(let h=0;h<d.length;h+=1)p[h]=vn(un(s,d,h));return{c(){e=i("tr"),t=i("td"),u=L(r),a=x();for(let h=0;h<p.length;h+=1)p[h].c();o=x(),this.h()},l(h){e=c(h,"TR",{});var m=_(e);t=c(m,"TD",{class:!0});var b=_(t);u=S(b,r),b.forEach(f),a=E(m);for(let v=0;v<p.length;v+=1)p[v].l(m);o=E(m),m.forEach(f),this.h()},h(){n(t,"class","p-2 bg-surface-elevated border border-border text-sm font-medium text-text-primary svelte-1p3rmve")},m(h,m){j(h,e,m),l(e,t),l(t,u),l(e,a);for(let b=0;b<p.length;b+=1)p[b]&&p[b].m(e,null);l(e,o)},p(h,m){if(m[0]&1&&r!==(r=Fl(h[21])+"")&&ne(u,r),m[0]&97){d=Gt(h[0].xAxis.values);let b;for(b=0;b<d.length;b+=1){const v=un(h,d,b);p[b]?p[b].p(v,m):(p[b]=vn(v),p[b].c(),p[b].m(e,o))}for(;b<p.length;b+=1)p[b].d(1);p.length=d.length}},d(h){h&&f(e),Sl(p,h)}}}function _n(s){let e,t,r,u,a,o,d,p,h=s[4](s[0].yAxis.type)+"",m,b,v=s[4](s[0].xAxis.type)+"",g,C,y,D,T,F=s[0].zAxis&&pn(s),k=Gt(s[0].xAxis.values),I=[];for(let w=0;w<k.length;w+=1)I[w]=mn(on(s,k,w));let N=Gt(s[0].yAxis.values),V=[];for(let w=0;w<N.length;w+=1)V[w]=bn(an(s,N,w));return{c(){e=i("div"),F&&F.c(),t=x(),r=i("div"),u=i("div"),a=i("table"),o=i("thead"),d=i("tr"),p=i("th"),m=L(h),b=L(" \\ "),g=L(v),C=x();for(let w=0;w<I.length;w+=1)I[w].c();y=x(),D=i("tbody");for(let w=0;w<V.length;w+=1)V[w].c();T=x(),this.h()},l(w){e=c(w,"DIV",{id:!0,class:!0});var P=_(e);F&&F.l(P),t=E(P),r=c(P,"DIV",{class:!0});var B=_(r);u=c(B,"DIV",{class:!0});var U=_(u);a=c(U,"TABLE",{class:!0});var H=_(a);o=c(H,"THEAD",{});var A=_(o);d=c(A,"TR",{});var M=_(d);p=c(M,"TH",{class:!0});var R=_(p);m=S(R,h),b=S(R," \\ "),g=S(R,v),R.forEach(f),C=E(M);for(let W=0;W<I.length;W+=1)I[W].l(M);M.forEach(f),A.forEach(f),y=E(H),D=c(H,"TBODY",{});var q=_(D);for(let W=0;W<V.length;W+=1)V[W].l(q);q.forEach(f),H.forEach(f),U.forEach(f),B.forEach(f),T=E(P),P.forEach(f),this.h()},h(){n(p,"class","p-2 bg-surface-elevated border border-border text-sm font-medium text-text-primary svelte-1p3rmve"),n(a,"class","border-collapse svelte-1p3rmve"),n(u,"class","inline-block min-w-full"),n(r,"class","overflow-x-auto"),n(e,"id","grid-z-"+s[20]),n(e,"class","space-y-3")},m(w,P){j(w,e,P),F&&F.m(e,null),l(e,t),l(e,r),l(r,u),l(u,a),l(a,o),l(o,d),l(d,p),l(p,m),l(p,b),l(p,g),l(d,C);for(let B=0;B<I.length;B+=1)I[B]&&I[B].m(d,null);l(a,y),l(a,D);for(let B=0;B<V.length;B+=1)V[B]&&V[B].m(D,null);l(e,T)},p(w,P){if(w[0].zAxis?F?F.p(w,P):(F=pn(w),F.c(),F.m(e,t)):F&&(F.d(1),F=null),P[0]&1&&h!==(h=w[4](w[0].yAxis.type)+"")&&ne(m,h),P[0]&1&&v!==(v=w[4](w[0].xAxis.type)+"")&&ne(g,v),P[0]&1){k=Gt(w[0].xAxis.values);let B;for(B=0;B<k.length;B+=1){const U=on(w,k,B);I[B]?I[B].p(U,P):(I[B]=mn(U),I[B].c(),I[B].m(d,null))}for(;B<I.length;B+=1)I[B].d(1);I.length=k.length}if(P[0]&97){N=Gt(w[0].yAxis.values);let B;for(B=0;B<N.length;B+=1){const U=an(w,N,B);V[B]?V[B].p(U,P):(V[B]=bn(U),V[B].c(),V[B].m(D,null))}for(;B<V.length;B+=1)V[B].d(1);V.length=N.length}},d(w){w&&f(e),F&&F.d(),Sl(I,w),Sl(V,w)}}}function gn(s){let e,t,r,u="âœ•",a,o,d,p=s[2].x+"",h,m,b,v=s[2].y+"",g,C,y,D,T,F,k,I,N,V="ğŸ“¥ ä¸‹è½½å›¾åƒ",w,P,B=s[2].z&&xn(s);return{c(){e=i("div"),t=i("div"),r=i("button"),r.textContent=u,a=x(),o=i("div"),d=i("div"),h=L(p),m=x(),b=i("div"),g=L(v),C=x(),B&&B.c(),y=x(),D=i("div"),T=i("img"),k=x(),I=i("div"),N=i("button"),N.textContent=V,this.h()},l(U){e=c(U,"DIV",{class:!0,role:!0,tabindex:!0});var H=_(e);t=c(H,"DIV",{class:!0,role:!0,tabindex:!0});var A=_(t);r=c(A,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),O(r)!=="svelte-4jhssx"&&(r.textContent=u),a=E(A),o=c(A,"DIV",{class:!0});var M=_(o);d=c(M,"DIV",{});var R=_(d);h=S(R,p),R.forEach(f),m=E(M),b=c(M,"DIV",{});var q=_(b);g=S(q,v),q.forEach(f),C=E(M),B&&B.l(M),M.forEach(f),y=E(A),D=c(A,"DIV",{class:!0});var W=_(D);T=c(W,"IMG",{src:!0,alt:!0,class:!0}),W.forEach(f),k=E(A),I=c(A,"DIV",{class:!0});var Z=_(I);N=c(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),O(N)!=="svelte-15kkyow"&&(N.textContent=V),Z.forEach(f),A.forEach(f),H.forEach(f),this.h()},h(){n(r,"class","absolute top-4 right-4 z-10 w-8 h-8 flex items-center justify-center bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors"),n(r,"aria-label","å…³é—­é¢„è§ˆ"),n(o,"class","absolute top-4 left-4 z-10 bg-black/70 text-white px-3 py-2 rounded-lg text-sm space-y-1"),Jt(T.src,F=s[1])||n(T,"src",F),n(T,"alt","é¢„è§ˆ"),n(T,"class","max-w-full max-h-[80vh] object-contain"),n(D,"class","flex items-center justify-center p-4"),n(N,"class","px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors text-sm"),n(I,"class","absolute bottom-4 right-4 z-10"),n(t,"class","relative max-w-4xl max-h-[90vh] bg-surface rounded-lg overflow-hidden"),n(t,"role","dialog"),n(t,"tabindex","-1"),n(e,"class","fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4"),n(e,"role","button"),n(e,"tabindex","0")},m(U,H){j(U,e,H),l(e,t),l(t,r),l(t,a),l(t,o),l(o,d),l(d,h),l(o,m),l(o,b),l(b,g),l(o,C),B&&B.m(o,null),l(t,y),l(t,D),l(D,T),l(t,k),l(t,I),l(I,N),w||(P=[z(r,"click",s[7]),z(N,"click",s[15]),z(t,"click",xr(s[11])),z(t,"keydown",xr(s[12])),z(e,"click",s[7]),z(e,"keydown",s[16])],w=!0)},p(U,H){H[0]&4&&p!==(p=U[2].x+"")&&ne(h,p),H[0]&4&&v!==(v=U[2].y+"")&&ne(g,v),U[2].z?B?B.p(U,H):(B=xn(U),B.c(),B.m(o,null)):B&&(B.d(1),B=null),H[0]&2&&!Jt(T.src,F=U[1])&&n(T,"src",F)},d(U){U&&f(e),B&&B.d(),w=!1,Rt(P)}}}function xn(s){let e,t=s[2].z+"",r;return{c(){e=i("div"),r=L(t)},l(u){e=c(u,"DIV",{});var a=_(e);r=S(a,t),a.forEach(f)},m(u,a){j(u,e,a),l(e,r)},p(u,a){a[0]&4&&t!==(t=u[2].z+"")&&ne(r,t)},d(u){u&&f(e)}}}function xo(s){let e,t,r,u;function a(h,m){return h[0]?mo:po}let o=a(s),d=o(s),p=s[1]&&s[2]&&gn(s);return{c(){d.c(),e=x(),p&&p.c(),t=Wl()},l(h){d.l(h),e=E(h),p&&p.l(h),t=Wl()},m(h,m){d.m(h,m),j(h,e,m),p&&p.m(h,m),j(h,t,m),r||(u=z(window,"keydown",s[10]),r=!0)},p(h,m){o===(o=a(h))&&d?d.p(h,m):(d.d(1),d=o(h),d&&(d.c(),d.m(e.parentNode,e))),h[1]&&h[2]?p?p.p(h,m):(p=gn(h),p.c(),p.m(t.parentNode,t)):p&&(p.d(1),p=null)},i:pt,o:pt,d(h){h&&(f(e),f(t)),d.d(h),p&&p.d(h),r=!1,u()}}}function Fl(s){return typeof s=="number"?Number.isInteger(s)?s.toString():s.toFixed(2):String(s)}function En(s,e){const t=document.createElement("a");t.href=s,t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Eo(s,e,t){let{results:r=null}=e;const u={steps:"æ­¥æ•°",cfg_scale:"CFG",denoising_strength:"é™å™ª",seed:"ç§å­",sampler:"é‡‡æ ·å™¨",scheduler:"è°ƒåº¦å™¨",width:"å®½åº¦",height:"é«˜åº¦"};let a=null,o=null,d=!1;function p(N){return u[N]||N}function h(N,V,w=0){if(!r)return-1;const P=r.xAxis.values.length,B=r.yAxis.values.length;return w*(P*B)+V*P+N}function m(N,V,w=0){if(!r)return;const P=h(N,V,w);P>=0&&P<r.images.length&&(t(1,a=r.images[P]),t(2,o={x:`${p(r.xAxis.type)}: ${Fl(r.xAxis.values[N])}`,y:`${p(r.yAxis.type)}: ${Fl(r.yAxis.values[V])}`,z:r.zAxis?`${p(r.zAxis.type)}: ${Fl(r.zAxis.values[w])}`:void 0}))}function b(){t(1,a=null),t(2,o=null)}async function v(){var N;if(!(!r||d)){t(3,d=!0);try{const V=w=>new Promise(P=>setTimeout(P,w));for(let w=0;w<(((N=r.zAxis)==null?void 0:N.values.length)||1);w++)for(let P=0;P<r.yAxis.values.length;P++)for(let B=0;B<r.xAxis.values.length;B++){const U=h(B,P,w);if(U>=0&&U<r.images.length){const H=Fl(r.xAxis.values[B]),A=Fl(r.yAxis.values[P]),M=r.zAxis?Fl(r.zAxis.values[w]):"",R=r.zAxis?`xyz_${r.xAxis.type}_${H}_${r.yAxis.type}_${A}_${r.zAxis.type}_${M}.png`:`xy_${r.xAxis.type}_${H}_${r.yAxis.type}_${A}.png`;En(r.images[U],R),await V(100)}}}catch(V){console.error("æ‰¹é‡ä¸‹è½½å¤±è´¥:",V),alert("æ‰¹é‡ä¸‹è½½å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{t(3,d=!1)}}}function g(){confirm("ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰ç»“æœå—ï¼Ÿ")&&t(0,r=null)}function C(N){N.key==="Escape"&&a&&b()}function y(N){ar.call(this,s,N)}function D(N){ar.call(this,s,N)}const T=N=>{const V=document.getElementById(`grid-z-${N}`);V==null||V.scrollIntoView({behavior:"smooth",block:"start"})},F=(N,V,w)=>m(N,V,w),k=()=>{if(a){const N=`preview_${Date.now()}.png`;En(a,N)}},I=N=>N.key==="Escape"&&b();return s.$$set=N=>{"results"in N&&t(0,r=N.results)},[r,a,o,d,p,h,m,b,v,g,C,y,D,T,F,k,I]}class Co extends Al{constructor(e){super(),Tl(this,e,Eo,xo,Il,{results:0},null,[-1,-1])}}function Cn(s,e,t){const r=s.slice();return r[35]=e[t],r}function yn(s,e,t){const r=s.slice();return r[35]=e[t],r}function wn(s,e,t){const r=s.slice();return r[35]=e[t],r}function Dn(s){let e,t=s[35].label+"",r;return{c(){e=i("option"),r=L(t),this.h()},l(u){e=c(u,"OPTION",{});var a=_(e);r=S(a,t),a.forEach(f),this.h()},h(){e.__value=s[35].value,Ve(e,e.__value)},m(u,a){j(u,e,a),l(e,r)},p:pt,d(u){u&&f(e)}}}function yo(s){let e,t,r=s[9].error+"",u;return{c(){e=i("span"),t=L("âœ— "),u=L(r),this.h()},l(a){e=c(a,"SPAN",{class:!0});var o=_(e);t=S(o,"âœ— "),u=S(o,r),o.forEach(f),this.h()},h(){n(e,"class","text-error")},m(a,o){j(a,e,o),l(e,t),l(e,u)},p(a,o){o[0]&512&&r!==(r=a[9].error+"")&&ne(u,r)},d(a){a&&f(e)}}}function wo(s){let e,t,r=s[9].count+"",u,a;return{c(){e=i("span"),t=L("âœ“ å·²è§£æ "),u=L(r),a=L(" ä¸ªå€¼"),this.h()},l(o){e=c(o,"SPAN",{class:!0});var d=_(e);t=S(d,"âœ“ å·²è§£æ "),u=S(d,r),a=S(d," ä¸ªå€¼"),d.forEach(f),this.h()},h(){n(e,"class","text-success")},m(o,d){j(o,e,d),l(e,t),l(e,u),l(e,a)},p(o,d){d[0]&512&&r!==(r=o[9].count+"")&&ne(u,r)},d(o){o&&f(e)}}}function kn(s){let e,t=s[35].label+"",r;return{c(){e=i("option"),r=L(t),this.h()},l(u){e=c(u,"OPTION",{});var a=_(e);r=S(a,t),a.forEach(f),this.h()},h(){e.__value=s[35].value,Ve(e,e.__value)},m(u,a){j(u,e,a),l(e,r)},p:pt,d(u){u&&f(e)}}}function Do(s){let e,t,r=s[8].error+"",u;return{c(){e=i("span"),t=L("âœ— "),u=L(r),this.h()},l(a){e=c(a,"SPAN",{class:!0});var o=_(e);t=S(o,"âœ— "),u=S(o,r),o.forEach(f),this.h()},h(){n(e,"class","text-error")},m(a,o){j(a,e,o),l(e,t),l(e,u)},p(a,o){o[0]&256&&r!==(r=a[8].error+"")&&ne(u,r)},d(a){a&&f(e)}}}function ko(s){let e,t,r=s[8].count+"",u,a;return{c(){e=i("span"),t=L("âœ“ å·²è§£æ "),u=L(r),a=L(" ä¸ªå€¼"),this.h()},l(o){e=c(o,"SPAN",{class:!0});var d=_(e);t=S(d,"âœ“ å·²è§£æ "),u=S(d,r),a=S(d," ä¸ªå€¼"),d.forEach(f),this.h()},h(){n(e,"class","text-success")},m(o,d){j(o,e,d),l(e,t),l(e,u),l(e,a)},p(o,d){d[0]&256&&r!==(r=o[8].count+"")&&ne(u,r)},d(o){o&&f(e)}}}function Fn(s){let e,t,r="å‚æ•°ç±»å‹",u,a,o,d,p,h="å‚æ•°å€¼",m,b,v,g,C,y,D,T="ä½¿ç”¨ç¤ºä¾‹",F,k,I='ğŸ’¡ æ”¯æŒæ ¼å¼: "1, 2, 3" æˆ– "1.0-5.0:1.0" æˆ– "1-5, æ­¥é•¿1"',N,V,w=Gt(s[17]),P=[];for(let A=0;A<w.length;A+=1)P[A]=In(Cn(s,w,A));function B(A,M){return A[7].isValid?Io:Fo}let U=B(s),H=U(s);return{c(){e=i("div"),t=i("label"),t.textContent=r,u=x(),a=i("select");for(let A=0;A<P.length;A+=1)P[A].c();o=x(),d=i("div"),p=i("label"),p.textContent=h,m=x(),b=i("input"),g=x(),C=i("div"),H.c(),y=x(),D=i("button"),D.textContent=T,F=x(),k=i("p"),k.textContent=I,this.h()},l(A){e=c(A,"DIV",{class:!0});var M=_(e);t=c(M,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1bewnuw"&&(t.textContent=r),u=E(M),a=c(M,"SELECT",{id:!0,class:!0});var R=_(a);for(let Z=0;Z<P.length;Z+=1)P[Z].l(R);R.forEach(f),M.forEach(f),o=E(A),d=c(A,"DIV",{class:!0});var q=_(d);p=c(q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(p)!=="svelte-1ldolww"&&(p.textContent=h),m=E(q),b=c(q,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),g=E(q),C=c(q,"DIV",{class:!0});var W=_(C);H.l(W),y=E(W),D=c(W,"BUTTON",{class:!0,"data-svelte-h":!0}),O(D)!=="svelte-7juhvv"&&(D.textContent=T),W.forEach(f),F=E(q),k=c(q,"P",{class:!0,"data-svelte-h":!0}),O(k)!=="svelte-1fz7nc7"&&(k.textContent=I),q.forEach(f),this.h()},h(){n(t,"for","z-axis-type"),n(t,"class","block text-sm font-medium text-text-primary"),n(a,"id","z-axis-type"),n(a,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary"),s[5]===void 0&&rs(()=>s[30].call(a)),n(e,"class","space-y-2"),n(p,"for","z-axis-values"),n(p,"class","block text-sm font-medium text-text-primary"),n(b,"id","z-axis-values"),n(b,"type","text"),n(b,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary"),n(b,"placeholder",v=jl(s[5])),n(D,"class","text-primary hover:underline"),n(C,"class","flex items-center justify-between text-xs"),n(k,"class","text-xs text-text-secondary"),n(d,"class","space-y-2")},m(A,M){j(A,e,M),l(e,t),l(e,u),l(e,a);for(let R=0;R<P.length;R+=1)P[R]&&P[R].m(a,null);yl(a,s[5],!0),j(A,o,M),j(A,d,M),l(d,p),l(d,m),l(d,b),Ve(b,s[6]),l(d,g),l(d,C),H.m(C,null),l(C,y),l(C,D),l(d,F),l(d,k),N||(V=[z(a,"change",s[30]),z(b,"input",s[31]),z(D,"click",s[32])],N=!0)},p(A,M){if(M[0]&131072){w=Gt(A[17]);let R;for(R=0;R<w.length;R+=1){const q=Cn(A,w,R);P[R]?P[R].p(q,M):(P[R]=In(q),P[R].c(),P[R].m(a,null))}for(;R<P.length;R+=1)P[R].d(1);P.length=w.length}M[0]&131104&&yl(a,A[5]),M[0]&131104&&v!==(v=jl(A[5]))&&n(b,"placeholder",v),M[0]&64&&b.value!==A[6]&&Ve(b,A[6]),U===(U=B(A))&&H?H.p(A,M):(H.d(1),H=U(A),H&&(H.c(),H.m(C,y)))},d(A){A&&(f(e),f(o),f(d)),Sl(P,A),H.d(),N=!1,Rt(V)}}}function In(s){let e,t=s[35].label+"",r;return{c(){e=i("option"),r=L(t),this.h()},l(u){e=c(u,"OPTION",{});var a=_(e);r=S(a,t),a.forEach(f),this.h()},h(){e.__value=s[35].value,Ve(e,e.__value)},m(u,a){j(u,e,a),l(e,r)},p:pt,d(u){u&&f(e)}}}function Fo(s){let e,t,r=s[7].error+"",u;return{c(){e=i("span"),t=L("âœ— "),u=L(r),this.h()},l(a){e=c(a,"SPAN",{class:!0});var o=_(e);t=S(o,"âœ— "),u=S(o,r),o.forEach(f),this.h()},h(){n(e,"class","text-error")},m(a,o){j(a,e,o),l(e,t),l(e,u)},p(a,o){o[0]&128&&r!==(r=a[7].error+"")&&ne(u,r)},d(a){a&&f(e)}}}function Io(s){let e,t,r=s[7].count+"",u,a;return{c(){e=i("span"),t=L("âœ“ å·²è§£æ "),u=L(r),a=L(" ä¸ªå€¼"),this.h()},l(o){e=c(o,"SPAN",{class:!0});var d=_(e);t=S(d,"âœ“ å·²è§£æ "),u=S(d,r),a=S(d," ä¸ªå€¼"),d.forEach(f),this.h()},h(){n(e,"class","text-success")},m(o,d){j(o,e,d),l(e,t),l(e,u),l(e,a)},p(o,d){d[0]&128&&r!==(r=o[7].count+"")&&ne(u,r)},d(o){o&&f(e)}}}function An(s){let e,t=s[7].count+"",r;return{c(){e=L("Ã— "),r=L(t)},l(u){e=S(u,"Ã— "),r=S(u,t)},m(u,a){j(u,e,a),j(u,r,a)},p(u,a){a[0]&128&&t!==(t=u[7].count+"")&&ne(r,t)},d(u){u&&(f(e),f(r))}}}function Tn(s){let e,t='<p class="text-xs text-warning">âš ï¸ ç”Ÿæˆæ•°é‡è¾ƒå¤šï¼Œå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-7ao0vf"&&(e.innerHTML=t),this.h()},h(){n(e,"class","mt-3 p-2 bg-warning/10 border border-warning/30 rounded")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Ao(s){let e;return{c(){e=L("å¼€å§‹ç”Ÿæˆç½‘æ ¼")},l(t){e=S(t,"å¼€å§‹ç”Ÿæˆç½‘æ ¼")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function To(s){let e,t=`<div class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></div>
          ç”Ÿæˆä¸­...`;return{c(){e=i("span"),e.innerHTML=t,this.h()},l(r){e=c(r,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-v3y3ju"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center justify-center gap-2")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Bn(s){let e,t,r,u,a,o,d=s[13]>0&&Pn(s),p=s[13]>0&&Vn(s);return{c(){e=i("div"),t=i("div"),r=i("span"),u=L(s[14]),a=x(),d&&d.c(),o=x(),p&&p.c(),this.h()},l(h){e=c(h,"DIV",{class:!0});var m=_(e);t=c(m,"DIV",{class:!0});var b=_(t);r=c(b,"SPAN",{class:!0});var v=_(r);u=S(v,s[14]),v.forEach(f),a=E(b),d&&d.l(b),b.forEach(f),o=E(m),p&&p.l(m),m.forEach(f),this.h()},h(){n(r,"class","text-sm font-medium text-text-primary"),n(t,"class","flex items-center justify-between mb-2"),n(e,"class","p-4 bg-primary/10 border border-primary/30 rounded-lg")},m(h,m){j(h,e,m),l(e,t),l(t,r),l(r,u),l(t,a),d&&d.m(t,null),l(e,o),p&&p.m(e,null)},p(h,m){m[0]&16384&&ne(u,h[14]),h[13]>0?d?d.p(h,m):(d=Pn(h),d.c(),d.m(t,null)):d&&(d.d(1),d=null),h[13]>0?p?p.p(h,m):(p=Vn(h),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(h){h&&f(e),d&&d.d(),p&&p.d()}}}function Pn(s){let e,t=s[13].toFixed(0)+"",r,u;return{c(){e=i("span"),r=L(t),u=L("%"),this.h()},l(a){e=c(a,"SPAN",{class:!0});var o=_(e);r=S(o,t),u=S(o,"%"),o.forEach(f),this.h()},h(){n(e,"class","text-sm text-text-secondary")},m(a,o){j(a,e,o),l(e,r),l(e,u)},p(a,o){o[0]&8192&&t!==(t=a[13].toFixed(0)+"")&&ne(r,t)},d(a){a&&f(e)}}}function Vn(s){let e,t;return{c(){e=i("div"),t=i("div"),this.h()},l(r){e=c(r,"DIV",{class:!0});var u=_(e);t=c(u,"DIV",{class:!0,style:!0}),_(t).forEach(f),u.forEach(f),this.h()},h(){n(t,"class","bg-primary h-full transition-all duration-300"),zt(t,"width",s[13]+"%"),n(e,"class","w-full bg-surface-elevated rounded-full h-2 overflow-hidden")},m(r,u){j(r,e,u),l(e,t)},p(r,u){u[0]&8192&&zt(t,"width",r[13]+"%")},d(r){r&&f(e)}}}function Nn(s){let e,t,r;return t=new Co({props:{results:s[15]}}),{c(){e=i("div"),ol(t.$$.fragment),this.h()},l(u){e=c(u,"DIV",{class:!0});var a=_(e);il(t.$$.fragment,a),a.forEach(f),this.h()},h(){n(e,"class","mt-6")},m(u,a){j(u,e,a),cl(t,e,null),r=!0},p(u,a){const o={};a[0]&32768&&(o.results=u[15]),t.$set(o)},i(u){r||($e(t.$$.fragment,u),r=!0)},o(u){ht(t.$$.fragment,u),r=!1},d(u){u&&f(e),fl(t)}}}function Bo(s){let e,t,r,u="ğŸ“Š XYZ Plot å‚æ•°å¯¹æ¯”",a,o,d="é‡ç½®",p,h,m='<p class="text-sm text-text-primary">ğŸ’¡ <strong>XYZ Plot</strong> å¯ä»¥ç”Ÿæˆå‚æ•°ç½‘æ ¼å¯¹æ¯”å›¾ï¼Œå¸®åŠ©ä½ æ‰¾åˆ°æœ€ä½³å‚æ•°ç»„åˆã€‚</p>',b,v,g,C="åŸºç¡€é…ç½®",y,D,T,F="åŸºç¡€Prompt",k,I,N,V,w,P="åŸºç¡€Negative Prompt",B,U,H,A,M,R="Xè½´å‚æ•°",q,W,Z,K="å‚æ•°ç±»å‹",G,X,pe,Y,Q,le="å‚æ•°å€¼",re,ae,we,J,Ie,be,Se,ze="ä½¿ç”¨ç¤ºä¾‹",et,Pe,Oe='ğŸ’¡ æ”¯æŒæ ¼å¼: "1, 2, 3" æˆ– "1.0-5.0:1.0" æˆ– "1-5, æ­¥é•¿1"',We,Ae,Re,Xe="Yè½´å‚æ•°",at,me,ke,qe="å‚æ•°ç±»å‹",de,Qe,Me,Ee,Ke,ce="å‚æ•°å€¼",Ue,Fe,oe,_e,ie,$,fe,he="ä½¿ç”¨ç¤ºä¾‹",Be,Ge,lt='ğŸ’¡ æ”¯æŒæ ¼å¼: "1, 2, 3" æˆ– "1.0-5.0:1.0" æˆ– "1-5, æ­¥é•¿1"',it,He,je,Ze,ve='Zè½´å‚æ•° <span class="text-text-secondary text-xs">(å¯é€‰)</span>',ye,Ne,mt,st,rt,vt="å¯ç”¨Zè½´",yt,ut,ct,ft,ge,xe,Te="é¢„è®¡ç”Ÿæˆæ•°é‡",ue,se,Le=s[9].count+"",ee,te,De=s[8].count+"",dt,xt,bt,kt,Tt,Xt,Nt,Ft,qt,Zt,It,Et,Yt,Ut,Qt,ml,Dt,dl,At,Bt=Gt(s[17]),Lt=[];for(let Ce=0;Ce<Bt.length;Ce+=1)Lt[Ce]=Dn(wn(s,Bt,Ce));function Bl(Ce,nt){return Ce[9].isValid?wo:yo}let el=Bl(s),Pt=el(s),Ye=Gt(s[17]),Je=[];for(let Ce=0;Ce<Ye.length;Ce+=1)Je[Ce]=kn(yn(s,Ye,Ce));function Mt(Ce,nt){return Ce[8].isValid?ko:Do}let hl=Mt(s),Wt=hl(s),St=s[4]&&Fn(s),Ot=s[4]&&An(s),wt=s[16]>50&&Tn();function Rl(Ce,nt){return Ce[12]?To:Ao}let Pl=Rl(s),Kt=Pl(s),jt=s[12]&&s[14]&&Bn(s),Vt=s[15]&&Nn(s);return{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),h=i("div"),h.innerHTML=m,b=x(),v=i("div"),g=i("h4"),g.textContent=C,y=x(),D=i("div"),T=i("label"),T.textContent=F,k=x(),I=i("textarea"),N=x(),V=i("div"),w=i("label"),w.textContent=P,B=x(),U=i("textarea"),H=x(),A=i("div"),M=i("h4"),M.textContent=R,q=x(),W=i("div"),Z=i("label"),Z.textContent=K,G=x(),X=i("select");for(let Ce=0;Ce<Lt.length;Ce+=1)Lt[Ce].c();pe=x(),Y=i("div"),Q=i("label"),Q.textContent=le,re=x(),ae=i("input"),J=x(),Ie=i("div"),Pt.c(),be=x(),Se=i("button"),Se.textContent=ze,et=x(),Pe=i("p"),Pe.textContent=Oe,We=x(),Ae=i("div"),Re=i("h4"),Re.textContent=Xe,at=x(),me=i("div"),ke=i("label"),ke.textContent=qe,de=x(),Qe=i("select");for(let Ce=0;Ce<Je.length;Ce+=1)Je[Ce].c();Me=x(),Ee=i("div"),Ke=i("label"),Ke.textContent=ce,Ue=x(),Fe=i("input"),_e=x(),ie=i("div"),Wt.c(),$=x(),fe=i("button"),fe.textContent=he,Be=x(),Ge=i("p"),Ge.textContent=lt,it=x(),He=i("div"),je=i("div"),Ze=i("h4"),Ze.innerHTML=ve,ye=x(),Ne=i("label"),mt=i("input"),st=x(),rt=i("span"),rt.textContent=vt,yt=x(),St&&St.c(),ut=x(),ct=i("div"),ft=i("div"),ge=i("div"),xe=i("h4"),xe.textContent=Te,ue=x(),se=i("p"),ee=L(Le),te=L(" Ã— "),dt=L(De),xt=x(),Ot&&Ot.c(),bt=L(`
          = `),kt=L(s[16]),Tt=L(" å¼ å›¾åƒ"),Xt=x(),Nt=i("div"),Ft=L(s[16]),qt=x(),wt&&wt.c(),Zt=x(),It=i("div"),Et=i("button"),Kt.c(),Ut=x(),jt&&jt.c(),Qt=x(),Vt&&Vt.c(),ml=Wl(),this.h()},l(Ce){e=c(Ce,"DIV",{class:!0});var nt=_(e);t=c(nt,"DIV",{class:!0});var ot=_(t);r=c(ot,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1kkxwrt"&&(r.textContent=u),a=E(ot),o=c(ot,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-1qqk7vf"&&(o.textContent=d),ot.forEach(f),p=E(nt),h=c(nt,"DIV",{class:!0,"data-svelte-h":!0}),O(h)!=="svelte-1o8ffoz"&&(h.innerHTML=m),b=E(nt),v=c(nt,"DIV",{class:!0});var sl=_(v);g=c(sl,"H4",{class:!0,"data-svelte-h":!0}),O(g)!=="svelte-1a9x4zd"&&(g.textContent=C),y=E(sl),D=c(sl,"DIV",{class:!0});var pl=_(D);T=c(pl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(T)!=="svelte-voa909"&&(T.textContent=F),k=E(pl),I=c(pl,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),_(I).forEach(f),pl.forEach(f),N=E(sl),V=c(sl,"DIV",{class:!0});var rl=_(V);w=c(rl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(w)!=="svelte-vijyit"&&(w.textContent=P),B=E(rl),U=c(rl,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),_(U).forEach(f),rl.forEach(f),sl.forEach(f),H=E(nt),A=c(nt,"DIV",{class:!0});var al=_(A);M=c(al,"H4",{class:!0,"data-svelte-h":!0}),O(M)!=="svelte-f73pjq"&&(M.textContent=R),q=E(al),W=c(al,"DIV",{class:!0});var ql=_(W);Z=c(ql,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(Z)!=="svelte-1kbmmlu"&&(Z.textContent=K),G=E(ql),X=c(ql,"SELECT",{id:!0,class:!0});var Hl=_(X);for(let ll=0;ll<Lt.length;ll+=1)Lt[ll].l(Hl);Hl.forEach(f),ql.forEach(f),pe=E(al),Y=c(al,"DIV",{class:!0});var tl=_(Y);Q=c(tl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(Q)!=="svelte-1rr94e2"&&(Q.textContent=le),re=E(tl),ae=c(tl,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),J=E(tl),Ie=c(tl,"DIV",{class:!0});var Vl=_(Ie);Pt.l(Vl),be=E(Vl),Se=c(Vl,"BUTTON",{class:!0,"data-svelte-h":!0}),O(Se)!=="svelte-l6hg69"&&(Se.textContent=ze),Vl.forEach(f),et=E(tl),Pe=c(tl,"P",{class:!0,"data-svelte-h":!0}),O(Pe)!=="svelte-x0d33b"&&(Pe.textContent=Oe),tl.forEach(f),al.forEach(f),We=E(nt),Ae=c(nt,"DIV",{class:!0});var Dl=_(Ae);Re=c(Dl,"H4",{class:!0,"data-svelte-h":!0}),O(Re)!=="svelte-1cjrprj"&&(Re.textContent=Xe),at=E(Dl),me=c(Dl,"DIV",{class:!0});var Ol=_(me);ke=c(Ol,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(ke)!=="svelte-zyhe5v"&&(ke.textContent=qe),de=E(Ol),Qe=c(Ol,"SELECT",{id:!0,class:!0});var Gl=_(Qe);for(let ll=0;ll<Je.length;ll+=1)Je[ll].l(Gl);Gl.forEach(f),Ol.forEach(f),Me=E(Dl),Ee=c(Dl,"DIV",{class:!0});var $t=_(Ee);Ke=c($t,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(Ke)!=="svelte-17e3vy3"&&(Ke.textContent=ce),Ue=E($t),Fe=c($t,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),_e=E($t),ie=c($t,"DIV",{class:!0});var Ql=_(ie);Wt.l(Ql),$=E(Ql),fe=c(Ql,"BUTTON",{class:!0,"data-svelte-h":!0}),O(fe)!=="svelte-1hpvnza"&&(fe.textContent=he),Ql.forEach(f),Be=E($t),Ge=c($t,"P",{class:!0,"data-svelte-h":!0}),O(Ge)!=="svelte-x0d33b"&&(Ge.textContent=lt),$t.forEach(f),Dl.forEach(f),it=E(nt),He=c(nt,"DIV",{class:!0});var Nl=_(He);je=c(Nl,"DIV",{class:!0});var Ll=_(je);Ze=c(Ll,"H4",{class:!0,"data-svelte-h":!0}),O(Ze)!=="svelte-wfz4w"&&(Ze.innerHTML=ve),ye=E(Ll),Ne=c(Ll,"LABEL",{class:!0});var Ml=_(Ne);mt=c(Ml,"INPUT",{type:!0,class:!0}),st=E(Ml),rt=c(Ml,"SPAN",{class:!0,"data-svelte-h":!0}),O(rt)!=="svelte-1myqgmk"&&(rt.textContent=vt),Ml.forEach(f),Ll.forEach(f),yt=E(Nl),St&&St.l(Nl),Nl.forEach(f),ut=E(nt),ct=c(nt,"DIV",{class:!0});var ns=_(ct);ft=c(ns,"DIV",{class:!0});var Kl=_(ft);ge=c(Kl,"DIV",{});var Ul=_(ge);xe=c(Ul,"H4",{class:!0,"data-svelte-h":!0}),O(xe)!=="svelte-w08vpp"&&(xe.textContent=Te),ue=E(Ul),se=c(Ul,"P",{class:!0});var wl=_(se);ee=S(wl,Le),te=S(wl," Ã— "),dt=S(wl,De),xt=E(wl),Ot&&Ot.l(wl),bt=S(wl,`
          = `),kt=S(wl,s[16]),Tt=S(wl," å¼ å›¾åƒ"),wl.forEach(f),Ul.forEach(f),Xt=E(Kl),Nt=c(Kl,"DIV",{class:!0});var as=_(Nt);Ft=S(as,s[16]),as.forEach(f),Kl.forEach(f),qt=E(ns),wt&&wt.l(ns),ns.forEach(f),Zt=E(nt),It=c(nt,"DIV",{class:!0});var us=_(It);Et=c(us,"BUTTON",{class:!0});var cs=_(Et);Kt.l(cs),cs.forEach(f),us.forEach(f),Ut=E(nt),jt&&jt.l(nt),nt.forEach(f),Qt=E(Ce),Vt&&Vt.l(Ce),ml=Wl(),this.h()},h(){n(r,"class","text-lg font-semibold text-text-primary"),n(o,"class","px-3 py-1 text-sm bg-surface-elevated hover:bg-surface-elevated/80 border border-border rounded-lg text-text-secondary transition-colors"),n(t,"class","flex items-center justify-between mb-4"),n(h,"class","p-3 bg-info/10 border border-info/30 rounded-lg"),n(g,"class","text-sm font-semibold text-text-primary"),n(T,"for","xyz-base-prompt"),n(T,"class","block text-sm font-medium text-text-primary"),n(I,"id","xyz-base-prompt"),n(I,"rows","3"),n(I,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary resize-none"),n(I,"placeholder","è¾“å…¥åŸºç¡€Promptï¼Œå°†åº”ç”¨äºæ‰€æœ‰å‚æ•°ç»„åˆ..."),n(D,"class","space-y-2"),n(w,"for","xyz-base-negative"),n(w,"class","block text-sm font-medium text-text-primary"),n(U,"id","xyz-base-negative"),n(U,"rows","2"),n(U,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary resize-none"),n(U,"placeholder","è¾“å…¥ä¸æƒ³è¦çš„å†…å®¹..."),n(V,"class","space-y-2"),n(v,"class","space-y-4 p-4 bg-surface-elevated border border-border rounded-lg"),n(M,"class","text-sm font-semibold text-text-primary"),n(Z,"for","x-axis-type"),n(Z,"class","block text-sm font-medium text-text-primary"),n(X,"id","x-axis-type"),n(X,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary"),s[0]===void 0&&rs(()=>s[23].call(X)),n(W,"class","space-y-2"),n(Q,"for","x-axis-values"),n(Q,"class","block text-sm font-medium text-text-primary"),n(ae,"id","x-axis-values"),n(ae,"type","text"),n(ae,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary"),n(ae,"placeholder",we=jl(s[0])),n(Se,"class","text-primary hover:underline"),n(Ie,"class","flex items-center justify-between text-xs"),n(Pe,"class","text-xs text-text-secondary"),n(Y,"class","space-y-2"),n(A,"class","space-y-3 p-4 bg-surface-elevated border border-border rounded-lg"),n(Re,"class","text-sm font-semibold text-text-primary"),n(ke,"for","y-axis-type"),n(ke,"class","block text-sm font-medium text-text-primary"),n(Qe,"id","y-axis-type"),n(Qe,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary"),s[2]===void 0&&rs(()=>s[26].call(Qe)),n(me,"class","space-y-2"),n(Ke,"for","y-axis-values"),n(Ke,"class","block text-sm font-medium text-text-primary"),n(Fe,"id","y-axis-values"),n(Fe,"type","text"),n(Fe,"class","w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary"),n(Fe,"placeholder",oe=jl(s[2])),n(fe,"class","text-primary hover:underline"),n(ie,"class","flex items-center justify-between text-xs"),n(Ge,"class","text-xs text-text-secondary"),n(Ee,"class","space-y-2"),n(Ae,"class","space-y-3 p-4 bg-surface-elevated border border-border rounded-lg"),n(Ze,"class","text-sm font-semibold text-text-primary"),n(mt,"type","checkbox"),n(mt,"class","w-4 h-4 text-primary bg-surface border-border rounded focus:ring-2 focus:ring-primary svelte-8rapxn"),n(rt,"class","text-sm text-text-primary"),n(Ne,"class","flex items-center gap-2 cursor-pointer"),n(je,"class","flex items-center justify-between"),n(He,"class","space-y-3 p-4 bg-surface-elevated border border-border rounded-lg"),n(xe,"class","text-sm font-semibold text-text-primary"),n(se,"class","text-xs text-text-secondary mt-1"),n(Nt,"class","text-3xl font-bold text-primary"),n(ft,"class","flex items-center justify-between"),n(ct,"class","p-4 bg-primary/10 border border-primary/30 rounded-lg"),Et.disabled=Yt=s[12]||!s[10].trim()||s[16]<2,n(Et,"class","flex-1 px-4 py-3 bg-success hover:bg-success/90 disabled:bg-surface-elevated disabled:text-text-secondary text-white rounded-lg transition-colors font-medium disabled:cursor-not-allowed"),n(It,"class","flex gap-3"),n(e,"class","space-y-4")},m(Ce,nt){j(Ce,e,nt),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),l(e,h),l(e,b),l(e,v),l(v,g),l(v,y),l(v,D),l(D,T),l(D,k),l(D,I),Ve(I,s[10]),l(v,N),l(v,V),l(V,w),l(V,B),l(V,U),Ve(U,s[11]),l(e,H),l(e,A),l(A,M),l(A,q),l(A,W),l(W,Z),l(W,G),l(W,X);for(let ot=0;ot<Lt.length;ot+=1)Lt[ot]&&Lt[ot].m(X,null);yl(X,s[0],!0),l(A,pe),l(A,Y),l(Y,Q),l(Y,re),l(Y,ae),Ve(ae,s[1]),l(Y,J),l(Y,Ie),Pt.m(Ie,null),l(Ie,be),l(Ie,Se),l(Y,et),l(Y,Pe),l(e,We),l(e,Ae),l(Ae,Re),l(Ae,at),l(Ae,me),l(me,ke),l(me,de),l(me,Qe);for(let ot=0;ot<Je.length;ot+=1)Je[ot]&&Je[ot].m(Qe,null);yl(Qe,s[2],!0),l(Ae,Me),l(Ae,Ee),l(Ee,Ke),l(Ee,Ue),l(Ee,Fe),Ve(Fe,s[3]),l(Ee,_e),l(Ee,ie),Wt.m(ie,null),l(ie,$),l(ie,fe),l(Ee,Be),l(Ee,Ge),l(e,it),l(e,He),l(He,je),l(je,Ze),l(je,ye),l(je,Ne),l(Ne,mt),mt.checked=s[4],l(Ne,st),l(Ne,rt),l(He,yt),St&&St.m(He,null),l(e,ut),l(e,ct),l(ct,ft),l(ft,ge),l(ge,xe),l(ge,ue),l(ge,se),l(se,ee),l(se,te),l(se,dt),l(se,xt),Ot&&Ot.m(se,null),l(se,bt),l(se,kt),l(se,Tt),l(ft,Xt),l(ft,Nt),l(Nt,Ft),l(ct,qt),wt&&wt.m(ct,null),l(e,Zt),l(e,It),l(It,Et),Kt.m(Et,null),l(e,Ut),jt&&jt.m(e,null),j(Ce,Qt,nt),Vt&&Vt.m(Ce,nt),j(Ce,ml,nt),Dt=!0,dl||(At=[z(o,"click",s[19]),z(I,"input",s[21]),z(U,"input",s[22]),z(X,"change",s[23]),z(ae,"input",s[24]),z(Se,"click",s[25]),z(Qe,"change",s[26]),z(Fe,"input",s[27]),z(fe,"click",s[28]),z(mt,"change",s[29]),z(Et,"click",s[18])],dl=!0)},p(Ce,nt){if(nt[0]&1024&&Ve(I,Ce[10]),nt[0]&2048&&Ve(U,Ce[11]),nt[0]&131072){Bt=Gt(Ce[17]);let ot;for(ot=0;ot<Bt.length;ot+=1){const sl=wn(Ce,Bt,ot);Lt[ot]?Lt[ot].p(sl,nt):(Lt[ot]=Dn(sl),Lt[ot].c(),Lt[ot].m(X,null))}for(;ot<Lt.length;ot+=1)Lt[ot].d(1);Lt.length=Bt.length}if(nt[0]&131073&&yl(X,Ce[0]),(!Dt||nt[0]&131073&&we!==(we=jl(Ce[0])))&&n(ae,"placeholder",we),nt[0]&2&&ae.value!==Ce[1]&&Ve(ae,Ce[1]),el===(el=Bl(Ce))&&Pt?Pt.p(Ce,nt):(Pt.d(1),Pt=el(Ce),Pt&&(Pt.c(),Pt.m(Ie,be))),nt[0]&131072){Ye=Gt(Ce[17]);let ot;for(ot=0;ot<Ye.length;ot+=1){const sl=yn(Ce,Ye,ot);Je[ot]?Je[ot].p(sl,nt):(Je[ot]=kn(sl),Je[ot].c(),Je[ot].m(Qe,null))}for(;ot<Je.length;ot+=1)Je[ot].d(1);Je.length=Ye.length}nt[0]&131076&&yl(Qe,Ce[2]),(!Dt||nt[0]&131076&&oe!==(oe=jl(Ce[2])))&&n(Fe,"placeholder",oe),nt[0]&8&&Fe.value!==Ce[3]&&Ve(Fe,Ce[3]),hl===(hl=Mt(Ce))&&Wt?Wt.p(Ce,nt):(Wt.d(1),Wt=hl(Ce),Wt&&(Wt.c(),Wt.m(ie,$))),nt[0]&16&&(mt.checked=Ce[4]),Ce[4]?St?St.p(Ce,nt):(St=Fn(Ce),St.c(),St.m(He,null)):St&&(St.d(1),St=null),(!Dt||nt[0]&512)&&Le!==(Le=Ce[9].count+"")&&ne(ee,Le),(!Dt||nt[0]&256)&&De!==(De=Ce[8].count+"")&&ne(dt,De),Ce[4]?Ot?Ot.p(Ce,nt):(Ot=An(Ce),Ot.c(),Ot.m(se,bt)):Ot&&(Ot.d(1),Ot=null),(!Dt||nt[0]&65536)&&ne(kt,Ce[16]),(!Dt||nt[0]&65536)&&ne(Ft,Ce[16]),Ce[16]>50?wt||(wt=Tn(),wt.c(),wt.m(ct,null)):wt&&(wt.d(1),wt=null),Pl!==(Pl=Rl(Ce))&&(Kt.d(1),Kt=Pl(Ce),Kt&&(Kt.c(),Kt.m(Et,null))),(!Dt||nt[0]&70656&&Yt!==(Yt=Ce[12]||!Ce[10].trim()||Ce[16]<2))&&(Et.disabled=Yt),Ce[12]&&Ce[14]?jt?jt.p(Ce,nt):(jt=Bn(Ce),jt.c(),jt.m(e,null)):jt&&(jt.d(1),jt=null),Ce[15]?Vt?(Vt.p(Ce,nt),nt[0]&32768&&$e(Vt,1)):(Vt=Nn(Ce),Vt.c(),$e(Vt,1),Vt.m(ml.parentNode,ml)):Vt&&(xl(),ht(Vt,1,1,()=>{Vt=null}),El())},i(Ce){Dt||($e(Vt),Dt=!0)},o(Ce){ht(Vt),Dt=!1},d(Ce){Ce&&(f(e),f(Qt),f(ml)),Sl(Lt,Ce),Pt.d(),Sl(Je,Ce),Wt.d(),St&&St.d(),Ot&&Ot.d(),wt&&wt.d(),Kt.d(),jt&&jt.d(),Vt&&Vt.d(Ce),dl=!1,Rt(At)}}}function Po(s,e,t){let r,u,a,o,d;const p=[{value:"steps",label:"æ­¥æ•° (Steps)"},{value:"cfg_scale",label:"å¼•å¯¼å¼ºåº¦ (CFG Scale)"},{value:"denoising_strength",label:"é™å™ªå¼ºåº¦ (Denoising)"},{value:"seed",label:"ç§å­ (Seed)"},{value:"sampler",label:"é‡‡æ ·å™¨ (Sampler)"},{value:"scheduler",label:"è°ƒåº¦å™¨ (Scheduler)"},{value:"width",label:"å®½åº¦ (Width)"},{value:"height",label:"é«˜åº¦ (Height)"}];let h="steps",m="20, 30, 40, 50",b="cfg_scale",v="5.0-10.0:2.5",g=!1,C="seed",y="42, 123, 456",D="",T="",F=!1,k=0,I="",N=null;function V(){return r.isValid?u.isValid?g&&!a.isValid?(_t({type:gt.VALIDATION,message:"Zè½´å‚æ•°è§£æå¤±è´¥",details:a.error,recoverable:!0,suggestions:["æ£€æŸ¥å‚æ•°å€¼æ ¼å¼æ˜¯å¦æ­£ç¡®",`ç¤ºä¾‹: ${jl(C)}`,"æˆ–ç¦ç”¨Zè½´"]}),!1):D.trim()?d.isValid?(nl(),!0):(_t({type:gt.VALIDATION,message:"ç½‘æ ¼é…ç½®éªŒè¯å¤±è´¥",details:d.error,recoverable:!0,suggestions:["å‡å°‘å‚æ•°å€¼æ•°é‡","ç¦ç”¨Zè½´","å¢å¤§èŒƒå›´è¡¨è¾¾å¼çš„æ­¥é•¿"]}),!1):(_t({type:gt.VALIDATION,message:"è¯·è¾“å…¥åŸºç¡€Prompt",recoverable:!0,suggestions:["Promptç”¨äºæ‰€æœ‰å‚æ•°ç»„åˆçš„å›¾åƒç”Ÿæˆ"]}),!1):(_t({type:gt.VALIDATION,message:"Yè½´å‚æ•°è§£æå¤±è´¥",details:u.error,recoverable:!0,suggestions:["æ£€æŸ¥å‚æ•°å€¼æ ¼å¼æ˜¯å¦æ­£ç¡®",`ç¤ºä¾‹: ${jl(b)}`]}),!1):(_t({type:gt.VALIDATION,message:"Xè½´å‚æ•°è§£æå¤±è´¥",details:r.error,recoverable:!0,suggestions:["æ£€æŸ¥å‚æ•°å€¼æ ¼å¼æ˜¯å¦æ­£ç¡®",`ç¤ºä¾‹: ${jl(h)}`]}),!1)}async function w(){if(V()){t(12,F=!0),t(13,k=0),t(14,I="å‡†å¤‡ç”Ÿæˆ..."),t(15,N=null);try{const Y={x_axis:{type:h,values:r.values},y_axis:{type:b,values:u.values},z_axis:g?{type:C,values:a.values}:null,base_prompt:D,base_negative_prompt:T};t(14,I="æ­£åœ¨ç”Ÿæˆå‚æ•°ç½‘æ ¼...");const Q=await fetch("/api/xyz-plot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(!Q.ok){const re=await Q.json().catch(()=>({}));throw new Error(re.message||`HTTPé”™è¯¯: ${Q.status}`)}const le=await Q.json();if(le.success){t(14,I="ç”Ÿæˆå®Œæˆï¼"),t(13,k=100);const re=[],ae=le.results.filter(we=>we.success).length;for(const we of le.results)we.success&&we.image?re.push(we.image):re.push("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIj7nlJ/miJDlpLHotKU8L3RleHQ+PC9zdmc+");t(15,N={images:re,xAxis:{type:le.x_axis.type,values:le.x_axis.values},yAxis:{type:le.y_axis.type,values:le.y_axis.values},zAxis:le.z_axis?{type:le.z_axis.type,values:le.z_axis.values}:void 0}),nl(),console.log(`XYZ Plotç”ŸæˆæˆåŠŸ: ${ae}/${le.grid_size} å¼ å›¾åƒ`)}else throw new Error(le.message||"ç”Ÿæˆå¤±è´¥")}catch(Y){const Q=Y instanceof Error?Y.message:String(Y);_t({type:gt.API,message:"XYZ Plotç”Ÿæˆå¤±è´¥",details:Q,recoverable:!0,suggestions:["æ£€æŸ¥å‚æ•°é…ç½®æ˜¯å¦æ­£ç¡®","ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ","æŸ¥çœ‹åç«¯æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯"]}),console.error("XYZ Plotå¤±è´¥:",Y)}finally{t(12,F=!1),k<100&&(t(13,k=0),t(14,I=""))}}}function P(){t(0,h="steps"),t(1,m="20, 30, 40, 50"),t(2,b="cfg_scale"),t(3,v="5.0-10.0:2.5"),t(4,g=!1),t(5,C="seed"),t(6,y="42, 123, 456"),t(10,D=""),t(11,T=""),nl()}function B(Y){Y==="x"?t(1,m=jl(h)):Y==="y"?t(3,v=jl(b)):Y==="z"&&t(6,y=jl(C))}function U(){D=this.value,t(10,D)}function H(){T=this.value,t(11,T)}function A(){h=ss(this),t(0,h),t(17,p)}function M(){m=this.value,t(1,m)}const R=()=>B("x");function q(){b=ss(this),t(2,b),t(17,p)}function W(){v=this.value,t(3,v)}const Z=()=>B("y");function K(){g=this.checked,t(4,g)}function G(){C=ss(this),t(5,C),t(17,p)}function X(){y=this.value,t(6,y)}const pe=()=>B("z");return s.$$.update=()=>{s.$$.dirty[0]&3&&t(9,r=xs(m,h)),s.$$.dirty[0]&12&&t(8,u=xs(v,b)),s.$$.dirty[0]&112&&t(7,a=g?xs(y,C):{values:[],count:0,isValid:!0}),s.$$.dirty[0]&912&&t(16,o=r.count*u.count*(g?a.count:1)),s.$$.dirty[0]&90&&(d=ho(m,v,g?y:null,100))},[h,m,b,v,g,C,y,a,u,r,D,T,F,k,I,N,o,p,w,P,B,U,H,A,M,R,q,W,Z,K,G,X,pe]}class Vo extends Al{constructor(e){super(),Tl(this,e,Po,Bo,Il,{},null,[-1,-1])}}function Ln(s,e,t){const r=s.slice();return r[21]=e[t],r}function Sn(s){let e,t="âœ•",r,u;return{c(){e=i("button"),e.textContent=t,this.h()},l(a){e=c(a,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(e)!=="svelte-179tgxk"&&(e.textContent=t),this.h()},h(){n(e,"class","btn-ghost text-sm px-2 py-1"),n(e,"title","å…³é—­CLIPé¢æ¿")},m(a,o){j(a,e,o),r||(u=z(e,"click",s[14]),r=!0)},p:pt,d(a){a&&f(e),r=!1,u()}}}function No(s){let e,t,r,u="é¢„è§ˆå›¾åƒ",a,o,d,p="ğŸ”„ æ›´æ¢",h,m,b="ğŸ—‘ï¸ æ¸…é™¤",v,g,C,y,D,T;return{c(){e=i("div"),t=i("div"),r=i("span"),r.textContent=u,a=x(),o=i("div"),d=i("button"),d.textContent=p,h=x(),m=i("button"),m.textContent=b,v=x(),g=i("div"),C=i("img"),this.h()},l(F){e=c(F,"DIV",{class:!0});var k=_(e);t=c(k,"DIV",{class:!0});var I=_(t);r=c(I,"SPAN",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-o6xt7c"&&(r.textContent=u),a=E(I),o=c(I,"DIV",{class:!0});var N=_(o);d=c(N,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(d)!=="svelte-romsyk"&&(d.textContent=p),h=E(N),m=c(N,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(m)!=="svelte-zw5rsb"&&(m.textContent=b),N.forEach(f),I.forEach(f),v=E(k),g=c(k,"DIV",{class:!0});var V=_(g);C=c(V,"IMG",{src:!0,alt:!0,class:!0}),V.forEach(f),k.forEach(f),this.h()},h(){n(r,"class","label mb-0"),n(d,"class","btn-ghost text-xs px-2 py-1"),n(d,"title","æ›´æ¢å›¾åƒ"),n(m,"class","btn-ghost text-xs px-2 py-1"),n(m,"title","æ¸…é™¤å›¾åƒ"),n(o,"class","flex gap-2"),n(t,"class","flex items-center justify-between mb-2"),Jt(C.src,y=s[1])||n(C,"src",y),n(C,"alt","é¢„è§ˆå›¾åƒ"),n(C,"class","max-w-full h-auto max-h-64 border border-border rounded-xl shadow-medium"),n(g,"class","flex justify-center"),n(e,"class","bg-surface/50 p-4 rounded-xl border border-border")},m(F,k){j(F,e,k),l(e,t),l(t,r),l(t,a),l(t,o),l(o,d),l(o,h),l(o,m),l(e,v),l(e,g),l(g,C),D||(T=[z(d,"click",s[8]),z(m,"click",s[9])],D=!0)},p(F,k){k&2&&!Jt(C.src,y=F[1])&&n(C,"src",y)},d(F){F&&f(e),D=!1,Rt(T)}}}function Lo(s){let e,t='<span class="text-2xl">ğŸ“</span> <span>ç‚¹å‡»ä¸Šä¼ å›¾åƒ</span>',r,u,a="æ”¯æŒ JPGã€PNGã€WebP ç­‰æ ¼å¼ï¼Œæœ€å¤§ 10MB",o,d;return{c(){e=i("button"),e.innerHTML=t,r=x(),u=i("p"),u.textContent=a,this.h()},l(p){e=c(p,"BUTTON",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-42355l"&&(e.innerHTML=t),r=E(p),u=c(p,"P",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-a1ufde"&&(u.textContent=a),this.h()},h(){n(e,"class","btn-primary w-full flex items-center justify-center gap-2 py-8 border-2 border-dashed border-primary/30 hover:border-primary/50 transition-colors"),n(u,"class","text-xs text-text-tertiary mt-2 text-center")},m(p,h){j(p,e,h),j(p,r,h),j(p,u,h),o||(d=z(e,"click",s[8]),o=!0)},p:pt,d(p){p&&(f(e),f(r),f(u)),o=!1,d()}}}function On(s){let e,t,r="åæ¨æ¨¡å¼",u,a,o,d="âš¡ å¿«é€Ÿæ¨¡å¼ (Fast)",p,h="ğŸ¯ ç»å…¸æ¨¡å¼ (Classic)",m,b="ğŸš« è´Ÿé¢Prompt (Negative)",v,g,C,y,D,T,F;function k(B,U){return B[2]==="fast"?Mo:B[2]==="classic"?Oo:So}let I=k(s),N=I(s);function V(B,U){return B[3]?jo:Uo}let w=V(s),P=w(s);return{c(){e=i("div"),t=i("label"),t.textContent=r,u=x(),a=i("select"),o=i("option"),o.textContent=d,p=i("option"),p.textContent=h,m=i("option"),m.textContent=b,v=x(),g=i("div"),C=i("p"),N.c(),y=x(),D=i("button"),P.c(),this.h()},l(B){e=c(B,"DIV",{class:!0});var U=_(e);t=c(U,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(t)!=="svelte-gt44gn"&&(t.textContent=r),u=E(U),a=c(U,"SELECT",{id:!0,class:!0});var H=_(a);o=c(H,"OPTION",{"data-svelte-h":!0}),O(o)!=="svelte-17jwity"&&(o.textContent=d),p=c(H,"OPTION",{"data-svelte-h":!0}),O(p)!=="svelte-1el2jzj"&&(p.textContent=h),m=c(H,"OPTION",{"data-svelte-h":!0}),O(m)!=="svelte-25o1ge"&&(m.textContent=b),H.forEach(f),v=E(U),g=c(U,"DIV",{class:!0});var A=_(g);C=c(A,"P",{class:!0});var M=_(C);N.l(M),M.forEach(f),A.forEach(f),U.forEach(f),y=E(B),D=c(B,"BUTTON",{class:!0});var R=_(D);P.l(R),R.forEach(f),this.h()},h(){n(t,"for","clipMode"),n(t,"class","label"),o.__value="fast",Ve(o,o.__value),p.__value="classic",Ve(p,p.__value),m.__value="negative",Ve(m,m.__value),n(a,"id","clipMode"),n(a,"class","input"),a.disabled=s[3],s[2]===void 0&&rs(()=>s[18].call(a)),n(C,"class","text-xs text-text-secondary"),n(g,"class","mt-2 p-3 bg-surface/50 rounded-lg border border-border"),n(e,"class","mb-4"),D.disabled=s[3],n(D,"class","btn-primary w-full mb-4 relative overflow-hidden disabled:opacity-70")},m(B,U){j(B,e,U),l(e,t),l(e,u),l(e,a),l(a,o),l(a,p),l(a,m),yl(a,s[2],!0),l(e,v),l(e,g),l(g,C),N.m(C,null),j(B,y,U),j(B,D,U),P.m(D,null),T||(F=[z(a,"change",s[18]),z(D,"click",s[10])],T=!0)},p(B,U){U&8&&(a.disabled=B[3]),U&4&&yl(a,B[2]),I!==(I=k(B))&&(N.d(1),N=I(B),N&&(N.c(),N.m(C,null))),w!==(w=V(B))&&(P.d(1),P=w(B),P&&(P.c(),P.m(D,null))),U&8&&(D.disabled=B[3])},d(B){B&&(f(e),f(y),f(D)),N.d(),P.d(),T=!1,Rt(F)}}}function So(s){let e,t="ğŸš« è´Ÿé¢Promptï¼š",r;return{c(){e=i("span"),e.textContent=t,r=L("ä¸“é—¨ç”Ÿæˆè´Ÿé¢æç¤ºè¯ï¼Œç”¨äºæ’é™¤ä¸æƒ³è¦çš„å…ƒç´ å’Œç‰¹å¾ã€‚"),this.h()},l(u){e=c(u,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1inaan9"&&(e.textContent=t),r=S(u,"ä¸“é—¨ç”Ÿæˆè´Ÿé¢æç¤ºè¯ï¼Œç”¨äºæ’é™¤ä¸æƒ³è¦çš„å…ƒç´ å’Œç‰¹å¾ã€‚"),this.h()},h(){n(e,"class","font-semibold text-text-primary")},m(u,a){j(u,e,a),j(u,r,a)},d(u){u&&(f(e),f(r))}}}function Oo(s){let e,t="ğŸ¯ ç»å…¸æ¨¡å¼ï¼š",r;return{c(){e=i("span"),e.textContent=t,r=L("ç”Ÿæˆæ›´è¯¦ç»†å’Œå‡†ç¡®çš„Promptæè¿°ï¼Œä½†å¤„ç†æ—¶é—´è¾ƒé•¿ï¼Œé€‚åˆéœ€è¦ç²¾ç¡®æè¿°çš„åœºæ™¯ã€‚"),this.h()},l(u){e=c(u,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-11v9njo"&&(e.textContent=t),r=S(u,"ç”Ÿæˆæ›´è¯¦ç»†å’Œå‡†ç¡®çš„Promptæè¿°ï¼Œä½†å¤„ç†æ—¶é—´è¾ƒé•¿ï¼Œé€‚åˆéœ€è¦ç²¾ç¡®æè¿°çš„åœºæ™¯ã€‚"),this.h()},h(){n(e,"class","font-semibold text-text-primary")},m(u,a){j(u,e,a),j(u,r,a)},d(u){u&&(f(e),f(r))}}}function Mo(s){let e,t="âš¡ å¿«é€Ÿæ¨¡å¼ï¼š",r;return{c(){e=i("span"),e.textContent=t,r=L("ä½¿ç”¨BLIPå¿«é€Ÿç”Ÿæˆå›¾åƒæè¿°ï¼Œç„¶åé€šè¿‡CLIPè¿›è¡Œä¼˜åŒ–ï¼Œé€Ÿåº¦å¿«ä½†å¯èƒ½ä¸å¤Ÿè¯¦ç»†ã€‚"),this.h()},l(u){e=c(u,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1ktff0b"&&(e.textContent=t),r=S(u,"ä½¿ç”¨BLIPå¿«é€Ÿç”Ÿæˆå›¾åƒæè¿°ï¼Œç„¶åé€šè¿‡CLIPè¿›è¡Œä¼˜åŒ–ï¼Œé€Ÿåº¦å¿«ä½†å¯èƒ½ä¸å¤Ÿè¯¦ç»†ã€‚"),this.h()},h(){n(e,"class","font-semibold text-text-primary")},m(u,a){j(u,e,a),j(u,r,a)},d(u){u&&(f(e),f(r))}}}function Uo(s){let e,t="ğŸš€ å¼€å§‹åæ¨";return{c(){e=i("span"),e.textContent=t},l(r){e=c(r,"SPAN",{"data-svelte-h":!0}),O(e)!=="svelte-ce3ctz"&&(e.textContent=t)},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function jo(s){let e,t='<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>æ­£åœ¨åˆ†æå›¾åƒ...</span>';return{c(){e=i("span"),e.innerHTML=t,this.h()},l(r){e=c(r,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1fi3ame"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center justify-center gap-2")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Mn(s){let e,t,r,u="âš ï¸",a,o,d,p="åæ¨å¤±è´¥",h,m,b,v,g,C="âœ•",y,D;return{c(){e=i("div"),t=i("div"),r=i("span"),r.textContent=u,a=x(),o=i("div"),d=i("p"),d.textContent=p,h=x(),m=i("p"),b=L(s[5]),v=x(),g=i("button"),g.textContent=C,this.h()},l(T){e=c(T,"DIV",{class:!0});var F=_(e);t=c(F,"DIV",{class:!0});var k=_(t);r=c(k,"SPAN",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-15g1o1n"&&(r.textContent=u),a=E(k),o=c(k,"DIV",{class:!0});var I=_(o);d=c(I,"P",{class:!0,"data-svelte-h":!0}),O(d)!=="svelte-17upyf4"&&(d.textContent=p),h=E(I),m=c(I,"P",{});var N=_(m);b=S(N,s[5]),N.forEach(f),I.forEach(f),v=E(k),g=c(k,"BUTTON",{class:!0,"data-svelte-h":!0}),O(g)!=="svelte-cyjc5w"&&(g.textContent=C),k.forEach(f),F.forEach(f),this.h()},h(){n(r,"class","text-lg"),n(d,"class","font-semibold mb-1"),n(o,"class","flex-1"),n(g,"class","btn-ghost text-xs px-2 py-1"),n(t,"class","flex items-start gap-2"),n(e,"class","bg-danger/20 border border-danger/30 text-danger p-4 rounded-xl text-sm mb-4")},m(T,F){j(T,e,F),l(e,t),l(t,r),l(t,a),l(t,o),l(o,d),l(o,h),l(o,m),l(m,b),l(t,v),l(t,g),y||(D=z(g,"click",s[19]),y=!0)},p(T,F){F&32&&ne(b,T[5])},d(T){T&&f(e),y=!1,D()}}}function Un(s){let e,t,r,u="<span>âœ¨</span> <span>åæ¨ç»“æœ</span>",a,o,d,p=s[4].mode==="fast"?"âš¡ å¿«é€Ÿ":s[4].mode==="classic"?"ğŸ¯ ç»å…¸":"ğŸš« è´Ÿé¢",h,m,b,v,g,C="Prompt",y,D,T,F="ğŸ“‹ å¤åˆ¶",k,I,N="âœ“ åº”ç”¨",V,w,P,B,U,H,A,M="Negative Prompt",R,q,W="ğŸ“‹ å¤åˆ¶",Z,K,G,X,pe,Y,Q='<p class="font-semibold mb-1">ğŸ’¡ ä½¿ç”¨æç¤ºï¼š</p> <ul class="list-disc list-inside space-y-1"><li>ç‚¹å‡»&quot;åº”ç”¨&quot;æŒ‰é’®å°†Promptå’ŒNegative Promptåº”ç”¨åˆ°å‚æ•°</li> <li>ç‚¹å‡»&quot;å¤åˆ¶&quot;æŒ‰é’®å¯ä»¥å•ç‹¬å¤åˆ¶Promptæˆ–Negative Prompt</li> <li>é£æ ¼æ ‡ç­¾æ˜¾ç¤ºäº†å›¾åƒçš„ä¸»è¦é£æ ¼ç‰¹å¾</li></ul>',le,re,ae=s[4].flavors&&s[4].flavors.length>0&&jn(s);return{c(){e=i("div"),t=i("div"),r=i("h4"),r.innerHTML=u,a=x(),o=i("span"),d=L("æ¨¡å¼: "),h=L(p),m=x(),b=i("div"),v=i("div"),g=i("span"),g.textContent=C,y=x(),D=i("div"),T=i("button"),T.textContent=F,k=x(),I=i("button"),I.textContent=N,V=x(),w=i("textarea"),B=x(),U=i("div"),H=i("div"),A=i("span"),A.textContent=M,R=x(),q=i("button"),q.textContent=W,Z=x(),K=i("textarea"),X=x(),ae&&ae.c(),pe=x(),Y=i("div"),Y.innerHTML=Q,this.h()},l(we){e=c(we,"DIV",{class:!0});var J=_(e);t=c(J,"DIV",{class:!0});var Ie=_(t);r=c(Ie,"H4",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-gjdiwc"&&(r.innerHTML=u),a=E(Ie),o=c(Ie,"SPAN",{class:!0});var be=_(o);d=S(be,"æ¨¡å¼: "),h=S(be,p),be.forEach(f),Ie.forEach(f),m=E(J),b=c(J,"DIV",{class:!0});var Se=_(b);v=c(Se,"DIV",{class:!0});var ze=_(v);g=c(ze,"SPAN",{class:!0,"data-svelte-h":!0}),O(g)!=="svelte-17fkxlp"&&(g.textContent=C),y=E(ze),D=c(ze,"DIV",{class:!0});var et=_(D);T=c(et,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(T)!=="svelte-2h9bix"&&(T.textContent=F),k=E(et),I=c(et,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(I)!=="svelte-19zad0y"&&(I.textContent=N),et.forEach(f),ze.forEach(f),V=E(Se),w=c(Se,"TEXTAREA",{class:!0,rows:!0,"aria-label":!0}),_(w).forEach(f),Se.forEach(f),B=E(J),U=c(J,"DIV",{class:!0});var Pe=_(U);H=c(Pe,"DIV",{class:!0});var Oe=_(H);A=c(Oe,"SPAN",{class:!0,"data-svelte-h":!0}),O(A)!=="svelte-eb9ils"&&(A.textContent=M),R=E(Oe),q=c(Oe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(q)!=="svelte-15ultf7"&&(q.textContent=W),Oe.forEach(f),Z=E(Pe),K=c(Pe,"TEXTAREA",{class:!0,rows:!0,"aria-label":!0}),_(K).forEach(f),Pe.forEach(f),X=E(J),ae&&ae.l(J),pe=E(J),Y=c(J,"DIV",{class:!0,"data-svelte-h":!0}),O(Y)!=="svelte-wxme39"&&(Y.innerHTML=Q),J.forEach(f),this.h()},h(){n(r,"class","text-sm font-semibold text-text-primary flex items-center gap-2"),n(o,"class","text-xs text-text-tertiary px-2 py-1 bg-surface rounded-lg border border-border"),n(t,"class","flex items-center justify-between"),n(g,"class","label mb-0 text-xs font-semibold"),n(T,"class","btn-ghost text-xs px-2 py-1 hover:bg-surface"),n(T,"title","å¤åˆ¶Prompt"),n(I,"class","btn-success text-xs px-2 py-1"),n(I,"title","åº”ç”¨åˆ°å‚æ•°"),n(D,"class","flex gap-2"),n(v,"class","flex justify-between items-center mb-2"),w.value=P=s[4].prompt,w.readOnly=!0,n(w,"class","input-textarea font-mono text-sm bg-transparent resize-none"),n(w,"rows","4"),n(w,"aria-label","Prompt"),n(b,"class","bg-white/5 p-3 rounded-lg border border-border"),n(A,"class","label mb-0 text-xs font-semibold"),n(q,"class","btn-ghost text-xs px-2 py-1 hover:bg-surface"),n(q,"title","å¤åˆ¶Negative Prompt"),n(H,"class","flex justify-between items-center mb-2"),K.value=G=s[4].negative_prompt,K.readOnly=!0,n(K,"class","input-textarea font-mono text-sm bg-transparent resize-none"),n(K,"rows","3"),n(K,"aria-label","Negative Prompt"),n(U,"class","bg-white/5 p-3 rounded-lg border border-border"),n(Y,"class","text-xs text-text-tertiary p-3 bg-surface/50 rounded-lg border border-border"),n(e,"class","space-y-4 bg-surface/50 p-4 rounded-xl border border-border")},m(we,J){j(we,e,J),l(e,t),l(t,r),l(t,a),l(t,o),l(o,d),l(o,h),l(e,m),l(e,b),l(b,v),l(v,g),l(v,y),l(v,D),l(D,T),l(D,k),l(D,I),l(b,V),l(b,w),l(e,B),l(e,U),l(U,H),l(H,A),l(H,R),l(H,q),l(U,Z),l(U,K),l(e,X),ae&&ae.m(e,null),l(e,pe),l(e,Y),le||(re=[z(T,"click",s[12]),z(I,"click",s[11]),z(q,"click",s[13])],le=!0)},p(we,J){J&16&&p!==(p=we[4].mode==="fast"?"âš¡ å¿«é€Ÿ":we[4].mode==="classic"?"ğŸ¯ ç»å…¸":"ğŸš« è´Ÿé¢")&&ne(h,p),J&16&&P!==(P=we[4].prompt)&&(w.value=P),J&16&&G!==(G=we[4].negative_prompt)&&(K.value=G),we[4].flavors&&we[4].flavors.length>0?ae?ae.p(we,J):(ae=jn(we),ae.c(),ae.m(e,pe)):ae&&(ae.d(1),ae=null)},d(we){we&&f(e),ae&&ae.d(),le=!1,Rt(re)}}}function jn(s){let e,t,r="ğŸ¨ é£æ ¼æ ‡ç­¾",u,a,o=Gt(s[4].flavors),d=[];for(let p=0;p<o.length;p+=1)d[p]=Hn(Ln(s,o,p));return{c(){e=i("div"),t=i("span"),t.textContent=r,u=x(),a=i("div");for(let p=0;p<d.length;p+=1)d[p].c();this.h()},l(p){e=c(p,"DIV",{class:!0});var h=_(e);t=c(h,"SPAN",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-97klsa"&&(t.textContent=r),u=E(h),a=c(h,"DIV",{class:!0});var m=_(a);for(let b=0;b<d.length;b+=1)d[b].l(m);m.forEach(f),h.forEach(f),this.h()},h(){n(t,"class","label mb-2 text-xs font-semibold"),n(a,"class","flex flex-wrap gap-2"),n(e,"class","bg-white/5 p-3 rounded-lg border border-border")},m(p,h){j(p,e,h),l(e,t),l(e,u),l(e,a);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(a,null)},p(p,h){if(h&16){o=Gt(p[4].flavors);let m;for(m=0;m<o.length;m+=1){const b=Ln(p,o,m);d[m]?d[m].p(b,h):(d[m]=Hn(b),d[m].c(),d[m].m(a,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=o.length}},d(p){p&&f(e),Sl(d,p)}}}function Hn(s){let e,t=s[21]+"",r,u;return{c(){e=i("span"),r=L(t),u=x(),this.h()},l(a){e=c(a,"SPAN",{class:!0});var o=_(e);r=S(o,t),u=E(o),o.forEach(f),this.h()},h(){n(e,"class","px-3 py-1 bg-primary/10 border border-primary/30 text-primary rounded-full text-xs font-medium")},m(a,o){j(a,e,o),l(e,r),l(e,u)},p(a,o){o&16&&t!==(t=a[21]+"")&&ne(r,t)},d(a){a&&f(e)}}}function Ho(s){let e,t,r,u="ğŸ” CLIP Promptåæ¨",a,o,d,p,h,m,b,v,g,C,y=s[0]&&Sn(s);function D(V,w){return V[1]?No:Lo}let T=D(s),F=T(s),k=s[1]&&On(s),I=s[5]&&Mn(s),N=s[4]&&Un(s);return{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),y&&y.c(),o=x(),d=i("div"),p=i("input"),h=x(),F.c(),m=x(),k&&k.c(),b=x(),I&&I.c(),v=x(),N&&N.c(),this.h()},l(V){e=c(V,"DIV",{class:!0});var w=_(e);t=c(w,"DIV",{class:!0});var P=_(t);r=c(P,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1rahhk8"&&(r.textContent=u),a=E(P),y&&y.l(P),P.forEach(f),o=E(w),d=c(w,"DIV",{class:!0});var B=_(d);p=c(B,"INPUT",{type:!0,accept:!0,class:!0,"aria-label":!0}),h=E(B),F.l(B),B.forEach(f),m=E(w),k&&k.l(w),b=E(w),I&&I.l(w),v=E(w),N&&N.l(w),w.forEach(f),this.h()},h(){n(r,"class","heading mb-0"),n(t,"class","flex items-center justify-between mb-4"),n(p,"type","file"),n(p,"accept","image/*"),n(p,"class","hidden"),n(p,"aria-label","ä¸Šä¼ å›¾åƒ"),n(d,"class","mb-4"),n(e,"class","card-compact svelte-11br4wi")},m(V,w){j(V,e,w),l(e,t),l(t,r),l(t,a),y&&y.m(t,null),l(e,o),l(e,d),l(d,p),s[17](p),l(d,h),F.m(d,null),l(e,m),k&&k.m(e,null),l(e,b),I&&I.m(e,null),l(e,v),N&&N.m(e,null),g||(C=z(p,"change",s[7]),g=!0)},p(V,[w]){V[0]?y?y.p(V,w):(y=Sn(V),y.c(),y.m(t,null)):y&&(y.d(1),y=null),T===(T=D(V))&&F?F.p(V,w):(F.d(1),F=T(V),F&&(F.c(),F.m(d,null))),V[1]?k?k.p(V,w):(k=On(V),k.c(),k.m(e,b)):k&&(k.d(1),k=null),V[5]?I?I.p(V,w):(I=Mn(V),I.c(),I.m(e,v)):I&&(I.d(1),I=null),V[4]?N?N.p(V,w):(N=Un(V),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i:pt,o:pt,d(V){V&&f(e),y&&y.d(),s[17](null),F.d(),k&&k.d(),I&&I.d(),N&&N.d(),g=!1,C()}}}function zo(s,e,t){const r=Ca();let{initialImageUrl:u=""}=e,{showCloseButton:a=!0}=e,{autoApplyPrompt:o=!1}=e,d=u,p="fast",h=!1,m=null,b="",v;function g(P){var A;const U=(A=P.target.files)==null?void 0:A[0];if(!U)return;if(!U.type.startsWith("image/")){t(5,b="è¯·ä¸Šä¼ å›¾åƒæ–‡ä»¶");return}if(U.size>10*1024*1024){t(5,b="å›¾åƒæ–‡ä»¶è¿‡å¤§ï¼Œè¯·ä¸Šä¼ å°äº 10MB çš„æ–‡ä»¶");return}const H=new FileReader;H.onload=M=>{var R;t(1,d=(R=M.target)==null?void 0:R.result),t(4,m=null),t(5,b="")},H.onerror=()=>{t(5,b="è¯»å–æ–‡ä»¶å¤±è´¥")},H.readAsDataURL(U)}function C(){v==null||v.click()}function y(){t(1,d=""),t(4,m=null),t(5,b=""),v&&t(6,v.value="",v)}async function D(){if(!d){t(5,b="è¯·å…ˆä¸Šä¼ æˆ–é€‰æ‹©å›¾åƒ");return}t(3,h=!0),t(5,b=""),t(4,m=null);try{let P=d;if(!P.startsWith("data:"))try{const A=await(await fetch(P)).blob();P=await new Promise((M,R)=>{const q=new FileReader;q.onloadend=()=>M(q.result),q.onerror=R,q.readAsDataURL(A)})}catch(H){console.error("è·å–å›¾åƒå¤±è´¥:",H),t(5,b="æ— æ³•è·å–å›¾åƒæ•°æ®");return}const B=await fetch("/api/clip/interrogate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:P,mode:p})}),U=await B.json();if(!B.ok||!U.success){t(5,b=U.message||"CLIP åæ¨å¤±è´¥");return}t(4,m={flavors:U.flavors||[],prompt:U.prompt||"",negative_prompt:U.negative_prompt||"",mode:U.mode||p}),r("result",m),o&&T()}catch(P){console.error("CLIP åæ¨å¤±è´¥:",P),t(5,b=P instanceof Error?P.message:"æœªçŸ¥é”™è¯¯")}finally{t(3,h=!1)}}function T(){m&&(va.update(P=>({...P,prompt:m.prompt,negative_prompt:m.negative_prompt})),r("apply",m))}async function F(){if(m)try{await navigator.clipboard.writeText(m.prompt),r("copy",{type:"prompt",text:m.prompt})}catch(P){console.error("å¤åˆ¶å¤±è´¥:",P)}}async function k(){if(m)try{await navigator.clipboard.writeText(m.negative_prompt),r("copy",{type:"negative_prompt",text:m.negative_prompt})}catch(P){console.error("å¤åˆ¶å¤±è´¥:",P)}}function I(){r("close")}function N(P){ul[P?"unshift":"push"](()=>{v=P,t(6,v)})}function V(){p=ss(this),t(2,p)}const w=()=>t(5,b="");return s.$$set=P=>{"initialImageUrl"in P&&t(15,u=P.initialImageUrl),"showCloseButton"in P&&t(0,a=P.showCloseButton),"autoApplyPrompt"in P&&t(16,o=P.autoApplyPrompt)},s.$$.update=()=>{s.$$.dirty&32768&&u&&(t(1,d=u),t(4,m=null),t(5,b=""))},[a,d,p,h,m,b,v,g,C,y,D,T,F,k,I,u,o,N,V,w]}class Ro extends Al{constructor(e){super(),Tl(this,e,zo,Ho,Il,{initialImageUrl:15,showCloseButton:0,autoApplyPrompt:16})}}function zn(s){let e,t,r;return{c(){e=i("section"),t=i("div"),r=new wa(!1),this.h()},l(u){e=c(u,"SECTION",{class:!0});var a=_(e);t=c(a,"DIV",{class:!0});var o=_(t);r=Da(o,!1),o.forEach(f),a.forEach(f),this.h()},h(){r.a=null,n(t,"class","max-w-none text-text-primary"),n(e,"class","mb-4 sm:mb-6 text-center")},m(u,a){j(u,e,a),l(e,t),r.m(s[16],t)},p(u,a){a[0]&65536&&r.p(u[16])},d(u){u&&f(e)}}}function Rn(s){let e,t,r,u,a,o,d,p,h=s[19]>0&&qn();return{c(){e=i("div"),t=i("p"),r=L("é˜Ÿåˆ—çŠ¶æ€: "),u=i("span"),a=L(s[19]),o=L("/"),d=L(s[18]),p=x(),h&&h.c(),this.h()},l(m){e=c(m,"DIV",{class:!0});var b=_(e);t=c(b,"P",{class:!0});var v=_(t);r=S(v,"é˜Ÿåˆ—çŠ¶æ€: "),u=c(v,"SPAN",{class:!0});var g=_(u);a=S(g,s[19]),o=S(g,"/"),d=S(g,s[18]),g.forEach(f),p=E(v),h&&h.l(v),v.forEach(f),b.forEach(f),this.h()},h(){n(u,"class","font-semibold text-text-primary"),n(t,"class","text-sm text-text-secondary"),n(e,"class","card-compact mb-4 sm:mb-6 bg-warning/10 border-warning/30")},m(m,b){j(m,e,b),l(e,t),l(t,r),l(t,u),l(u,a),l(u,o),l(u,d),l(t,p),h&&h.m(t,null)},p(m,b){b[0]&524288&&ne(a,m[19]),b[0]&262144&&ne(d,m[18]),m[19]>0?h||(h=qn(),h.c(),h.m(t,null)):h&&(h.d(1),h=null)},d(m){m&&f(e),h&&h.d()}}}function qn(s){let e,t="å¯èƒ½å½±å“å®æ—¶æ€§èƒ½";return{c(){e=i("span"),e.textContent=t,this.h()},l(r){e=c(r,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-98qknf"&&(e.textContent=t),this.h()},h(){n(e,"class","text-warning ml-2")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function qo(s){let e,t,r,u,a="åŠ è½½ä¸­...",o;return t=new Va({props:{classList:"animate-spin opacity-50"}}),{c(){e=i("div"),ol(t.$$.fragment),r=x(),u=i("p"),u.textContent=a,this.h()},l(d){e=c(d,"DIV",{class:!0});var p=_(e);il(t.$$.fragment,p),r=E(p),u=c(p,"P",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-bqbwh1"&&(u.textContent=a),p.forEach(f),this.h()},h(){n(u,"class","text-xl text-text-secondary"),n(e,"class","flex items-center justify-center gap-4 py-48")},m(d,p){j(d,e,p),cl(t,e,null),l(e,r),l(e,u),o=!0},p:pt,i(d){o||($e(t.$$.fragment,d),o=!0)},o(d){ht(t.$$.fragment,d),o=!1},d(d){d&&f(e),fl(t)}}}function Go(s){let e,t,r,u,a=s[3]&&s[2]&&s[4]&&s[5]?"å…¨éƒ¨æŠ˜å ":"å…¨éƒ¨å±•å¼€",o,d,p,h,m,b="ğŸ“· è¾“å…¥æº",v,g,C,y,D,T,F,k,I,N="ğŸ¨ æ¨¡å‹ç®¡ç†",V,w,P,B,U,H,A,M,R,q="ğŸ® æ§åˆ¶",W,Z,K,G,X,pe,Y,Q,le,re,ae="ğŸ¯ é«˜çº§åŠŸèƒ½",we,J,Ie,be,Se,ze,et,Pe,Oe,We,Ae,Re,Xe,at,me,ke,qe,de,Qe="âœ¨ ç”Ÿæˆç»“æœ",Me,Ee,Ke,ce,Ue,Fe=s[3]&&Gn(s),oe=s[2]&&Wn(),_e=s[4]&&Xn(s),ie=s[1]&&Yn(s),$=s[5]&&Jn(s),fe=s[6]&&aa(s),he=s[7]&&ua(s),Be=s[8]&&oa(s),Ge=s[9]&&ia(s),lt=s[10]&&ca(s),it=s[11]&&fa(s),He=s[12]&&da(s),je=s[13]&&ha(s),Ze=s[14]&&pa(s);return Ee=new Ra({}),{c(){e=i("div"),t=i("div"),r=i("div"),u=i("button"),o=L(a),d=x(),p=i("div"),h=i("button"),m=i("h3"),m.textContent=b,v=x(),g=i("span"),C=L("â–¼"),D=x(),Fe&&Fe.c(),T=x(),F=i("div"),k=i("button"),I=i("h3"),I.textContent=N,V=x(),w=i("span"),P=L("â–¼"),U=x(),oe&&oe.c(),H=x(),A=i("div"),M=i("button"),R=i("h3"),R.textContent=q,W=x(),Z=i("span"),K=L("â–¼"),X=x(),_e&&_e.c(),pe=x(),ie&&ie.c(),Y=x(),Q=i("div"),le=i("button"),re=i("h3"),re.textContent=ae,we=x(),J=i("span"),Ie=L("â–¼"),Se=x(),$&&$.c(),ze=x(),fe&&fe.c(),et=x(),he&&he.c(),Pe=x(),Be&&Be.c(),Oe=x(),Ge&&Ge.c(),We=x(),lt&&lt.c(),Ae=x(),it&&it.c(),Re=x(),He&&He.c(),Xe=x(),je&&je.c(),at=x(),Ze&&Ze.c(),me=x(),ke=i("div"),qe=i("div"),de=i("h3"),de.textContent=Qe,Me=x(),ol(Ee.$$.fragment),this.h()},l(ve){e=c(ve,"DIV",{class:!0});var ye=_(e);t=c(ye,"DIV",{class:!0});var Ne=_(t);r=c(Ne,"DIV",{class:!0});var mt=_(r);u=c(mt,"BUTTON",{class:!0,title:!0});var st=_(u);o=S(st,a),st.forEach(f),mt.forEach(f),d=E(Ne),p=c(Ne,"DIV",{class:!0});var rt=_(p);h=c(rt,"BUTTON",{class:!0,"aria-expanded":!0});var vt=_(h);m=c(vt,"H3",{class:!0,"data-svelte-h":!0}),O(m)!=="svelte-17izdbl"&&(m.textContent=b),v=E(vt),g=c(vt,"SPAN",{class:!0});var yt=_(g);C=S(yt,"â–¼"),yt.forEach(f),vt.forEach(f),D=E(rt),Fe&&Fe.l(rt),rt.forEach(f),T=E(Ne),F=c(Ne,"DIV",{class:!0});var ut=_(F);k=c(ut,"BUTTON",{class:!0,"aria-expanded":!0});var ct=_(k);I=c(ct,"H3",{class:!0,"data-svelte-h":!0}),O(I)!=="svelte-4od0l4"&&(I.textContent=N),V=E(ct),w=c(ct,"SPAN",{class:!0});var ft=_(w);P=S(ft,"â–¼"),ft.forEach(f),ct.forEach(f),U=E(ut),oe&&oe.l(ut),ut.forEach(f),H=E(Ne),A=c(Ne,"DIV",{class:!0});var ge=_(A);M=c(ge,"BUTTON",{class:!0,"aria-expanded":!0});var xe=_(M);R=c(xe,"H3",{class:!0,"data-svelte-h":!0}),O(R)!=="svelte-1eqmnbk"&&(R.textContent=q),W=E(xe),Z=c(xe,"SPAN",{class:!0});var Te=_(Z);K=S(Te,"â–¼"),Te.forEach(f),xe.forEach(f),X=E(ge),_e&&_e.l(ge),ge.forEach(f),pe=E(Ne),ie&&ie.l(Ne),Y=E(Ne),Q=c(Ne,"DIV",{class:!0});var ue=_(Q);le=c(ue,"BUTTON",{class:!0,"aria-expanded":!0});var se=_(le);re=c(se,"H3",{class:!0,"data-svelte-h":!0}),O(re)!=="svelte-3aa6m9"&&(re.textContent=ae),we=E(se),J=c(se,"SPAN",{class:!0});var Le=_(J);Ie=S(Le,"â–¼"),Le.forEach(f),se.forEach(f),Se=E(ue),$&&$.l(ue),ue.forEach(f),ze=E(Ne),fe&&fe.l(Ne),et=E(Ne),he&&he.l(Ne),Pe=E(Ne),Be&&Be.l(Ne),Oe=E(Ne),Ge&&Ge.l(Ne),We=E(Ne),lt&&lt.l(Ne),Ae=E(Ne),it&&it.l(Ne),Re=E(Ne),He&&He.l(Ne),Xe=E(Ne),je&&je.l(Ne),at=E(Ne),Ze&&Ze.l(Ne),Ne.forEach(f),me=E(ye),ke=c(ye,"DIV",{class:!0});var ee=_(ke);qe=c(ee,"DIV",{class:!0});var te=_(qe);de=c(te,"H3",{class:!0,"data-svelte-h":!0}),O(de)!=="svelte-1qz9115"&&(de.textContent=Qe),Me=E(te),il(Ee.$$.fragment,te),te.forEach(f),ee.forEach(f),ye.forEach(f),this.h()},h(){n(u,"class","text-xs text-text-tertiary hover:text-text-secondary transition-colors"),n(u,"title","å…¨éƒ¨æŠ˜å /å±•å¼€"),n(r,"class","flex justify-end mb-2"),n(m,"class","heading mb-0"),n(g,"class",y="collapsible-icon "+(s[3]?"expanded":"collapsed")),n(h,"class","collapsible-header mb-3"),n(h,"aria-expanded",s[3]),n(p,"class","card"),n(I,"class","heading mb-0"),n(w,"class",B="collapsible-icon "+(s[2]?"expanded":"collapsed")),n(k,"class","collapsible-header mb-3"),n(k,"aria-expanded",s[2]),n(F,"class","card"),n(R,"class","heading mb-0"),n(Z,"class",G="collapsible-icon "+(s[4]?"expanded":"collapsed")),n(M,"class","collapsible-header mb-3"),n(M,"aria-expanded",s[4]),n(A,"class","card"),n(re,"class","heading mb-0"),n(J,"class",be="collapsible-icon "+(s[5]?"expanded":"collapsed")),n(le,"class","collapsible-header mb-3"),n(le,"aria-expanded",s[5]),n(Q,"class","card"),n(t,"class","lg:col-span-1 space-y-4"),n(de,"class","heading mb-4"),n(qe,"class","card h-full"),n(ke,"class","lg:col-span-2"),n(e,"class","grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6")},m(ve,ye){j(ve,e,ye),l(e,t),l(t,r),l(r,u),l(u,o),l(t,d),l(t,p),l(p,h),l(h,m),l(h,v),l(h,g),l(g,C),l(p,D),Fe&&Fe.m(p,null),l(t,T),l(t,F),l(F,k),l(k,I),l(k,V),l(k,w),l(w,P),l(F,U),oe&&oe.m(F,null),l(t,H),l(t,A),l(A,M),l(M,R),l(M,W),l(M,Z),l(Z,K),l(A,X),_e&&_e.m(A,null),l(t,pe),ie&&ie.m(t,null),l(t,Y),l(t,Q),l(Q,le),l(le,re),l(le,we),l(le,J),l(J,Ie),l(Q,Se),$&&$.m(Q,null),l(t,ze),fe&&fe.m(t,null),l(t,et),he&&he.m(t,null),l(t,Pe),Be&&Be.m(t,null),l(t,Oe),Ge&&Ge.m(t,null),l(t,We),lt&&lt.m(t,null),l(t,Ae),it&&it.m(t,null),l(t,Re),He&&He.m(t,null),l(t,Xe),je&&je.m(t,null),l(t,at),Ze&&Ze.m(t,null),l(e,me),l(e,ke),l(ke,qe),l(qe,de),l(qe,Me),cl(Ee,qe,null),Ke=!0,ce||(Ue=[z(u,"click",s[26]),z(h,"click",s[27]),z(k,"click",s[28]),z(M,"click",s[29]),z(le,"click",s[31])],ce=!0)},p(ve,ye){(!Ke||ye[0]&60)&&a!==(a=ve[3]&&ve[2]&&ve[4]&&ve[5]?"å…¨éƒ¨æŠ˜å ":"å…¨éƒ¨å±•å¼€")&&ne(o,a),(!Ke||ye[0]&8&&y!==(y="collapsible-icon "+(ve[3]?"expanded":"collapsed")))&&n(g,"class",y),(!Ke||ye[0]&8)&&n(h,"aria-expanded",ve[3]),ve[3]?Fe?(Fe.p(ve,ye),ye[0]&8&&$e(Fe,1)):(Fe=Gn(ve),Fe.c(),$e(Fe,1),Fe.m(p,null)):Fe&&(xl(),ht(Fe,1,1,()=>{Fe=null}),El()),(!Ke||ye[0]&4&&B!==(B="collapsible-icon "+(ve[2]?"expanded":"collapsed")))&&n(w,"class",B),(!Ke||ye[0]&4)&&n(k,"aria-expanded",ve[2]),ve[2]?oe?ye[0]&4&&$e(oe,1):(oe=Wn(),oe.c(),$e(oe,1),oe.m(F,null)):oe&&(xl(),ht(oe,1,1,()=>{oe=null}),El()),(!Ke||ye[0]&16&&G!==(G="collapsible-icon "+(ve[4]?"expanded":"collapsed")))&&n(Z,"class",G),(!Ke||ye[0]&16)&&n(M,"aria-expanded",ve[4]),ve[4]?_e?(_e.p(ve,ye),ye[0]&16&&$e(_e,1)):(_e=Xn(ve),_e.c(),$e(_e,1),_e.m(A,null)):_e&&(xl(),ht(_e,1,1,()=>{_e=null}),El()),ve[1]?ie?(ie.p(ve,ye),ye[0]&2&&$e(ie,1)):(ie=Yn(ve),ie.c(),$e(ie,1),ie.m(t,Y)):ie&&(xl(),ht(ie,1,1,()=>{ie=null}),El()),(!Ke||ye[0]&32&&be!==(be="collapsible-icon "+(ve[5]?"expanded":"collapsed")))&&n(J,"class",be),(!Ke||ye[0]&32)&&n(le,"aria-expanded",ve[5]),ve[5]?$?$.p(ve,ye):($=Jn(ve),$.c(),$.m(Q,null)):$&&($.d(1),$=null),ve[6]?fe?(fe.p(ve,ye),ye[0]&64&&$e(fe,1)):(fe=aa(ve),fe.c(),$e(fe,1),fe.m(t,et)):fe&&(xl(),ht(fe,1,1,()=>{fe=null}),El()),ve[7]?he?(he.p(ve,ye),ye[0]&128&&$e(he,1)):(he=ua(ve),he.c(),$e(he,1),he.m(t,Pe)):he&&(xl(),ht(he,1,1,()=>{he=null}),El()),ve[8]?Be?(Be.p(ve,ye),ye[0]&256&&$e(Be,1)):(Be=oa(ve),Be.c(),$e(Be,1),Be.m(t,Oe)):Be&&(xl(),ht(Be,1,1,()=>{Be=null}),El()),ve[9]?Ge?(Ge.p(ve,ye),ye[0]&512&&$e(Ge,1)):(Ge=ia(ve),Ge.c(),$e(Ge,1),Ge.m(t,We)):Ge&&(xl(),ht(Ge,1,1,()=>{Ge=null}),El()),ve[10]?lt?(lt.p(ve,ye),ye[0]&1024&&$e(lt,1)):(lt=ca(ve),lt.c(),$e(lt,1),lt.m(t,Ae)):lt&&(xl(),ht(lt,1,1,()=>{lt=null}),El()),ve[11]?it?(it.p(ve,ye),ye[0]&2048&&$e(it,1)):(it=fa(ve),it.c(),$e(it,1),it.m(t,Re)):it&&(xl(),ht(it,1,1,()=>{it=null}),El()),ve[12]?He?(He.p(ve,ye),ye[0]&4096&&$e(He,1)):(He=da(ve),He.c(),$e(He,1),He.m(t,Xe)):He&&(xl(),ht(He,1,1,()=>{He=null}),El()),ve[13]?je?(je.p(ve,ye),ye[0]&8192&&$e(je,1)):(je=ha(ve),je.c(),$e(je,1),je.m(t,at)):je&&(xl(),ht(je,1,1,()=>{je=null}),El()),ve[14]?Ze?(Ze.p(ve,ye),ye[0]&16384&&$e(Ze,1)):(Ze=pa(ve),Ze.c(),$e(Ze,1),Ze.m(t,null)):Ze&&(xl(),ht(Ze,1,1,()=>{Ze=null}),El())},i(ve){Ke||($e(Fe),$e(oe),$e(_e),$e(ie),$e(fe),$e(he),$e(Be),$e(Ge),$e(lt),$e(it),$e(He),$e(je),$e(Ze),$e(Ee.$$.fragment,ve),Ke=!0)},o(ve){ht(Fe),ht(oe),ht(_e),ht(ie),ht(fe),ht(he),ht(Be),ht(Ge),ht(lt),ht(it),ht(He),ht(je),ht(Ze),ht(Ee.$$.fragment,ve),Ke=!1},d(ve){ve&&f(e),Fe&&Fe.d(),oe&&oe.d(),_e&&_e.d(),ie&&ie.d(),$&&$.d(),fe&&fe.d(),he&&he.d(),Be&&Be.d(),Ge&&Ge.d(),lt&&lt.d(),it&&it.d(),He&&He.d(),je&&je.d(),Ze&&Ze.d(),fl(Ee),ce=!1,Rt(Ue)}}}function Gn(s){let e,t,r,u;const a=[Xo,Wo],o=[];function d(p,h){return p[17]?0:1}return t=d(s),r=o[t]=a[t](s),{c(){e=i("div"),r.c(),this.h()},l(p){e=c(p,"DIV",{class:!0});var h=_(e);r.l(h),h.forEach(f),this.h()},h(){n(e,"class","pt-2")},m(p,h){j(p,e,h),o[t].m(e,null),u=!0},p(p,h){let m=t;t=d(p),t===m?o[t].p(p,h):(xl(),ht(o[m],1,1,()=>{o[m]=null}),El(),r=o[t],r?r.p(p,h):(r=o[t]=a[t](p),r.c()),$e(r,1),r.m(e,null))},i(p){u||($e(r),u=!0)},o(p){ht(r),u=!1},d(p){p&&f(e),o[t].d()}}}function Wo(s){let e,t='<div class="text-4xl mb-2">ğŸ¥</div> <p class="text-sm text-text-secondary mb-2">è§†é¢‘æ¨¡å¼ï¼šæ— éœ€æ‘„åƒå¤´è¾“å…¥</p> <p class="text-xs text-text-tertiary text-center">å®æ—¶ç”Ÿæˆå°†ä½¿ç”¨å‚æ•°é…ç½®è¿›è¡Œç”Ÿæˆ</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1ytqmcn"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex flex-col items-center justify-center min-h-[180px] w-full bg-surface-elevated rounded-lg border border-border p-4")},m(r,u){j(r,e,u)},p:pt,i:pt,o:pt,d(r){r&&f(e)}}}function Xo(s){let e,t;return e=new Qa({props:{width:Number(s[15].width.default),height:Number(s[15].height.default)}}),{c(){ol(e.$$.fragment)},l(r){il(e.$$.fragment,r)},m(r,u){cl(e,r,u),t=!0},p(r,u){const a={};u[0]&32768&&(a.width=Number(r[15].width.default)),u[0]&32768&&(a.height=Number(r[15].height.default)),e.$set(a)},i(r){t||($e(e.$$.fragment,r),t=!0)},o(r){ht(e.$$.fragment,r),t=!1},d(r){fl(e,r)}}}function Wn(s){let e,t,r;return t=new ka({}),{c(){e=i("div"),ol(t.$$.fragment),this.h()},l(u){e=c(u,"DIV",{class:!0});var a=_(e);il(t.$$.fragment,a),a.forEach(f),this.h()},h(){n(e,"class","pt-2")},m(u,a){j(u,e,a),cl(t,e,null),r=!0},i(u){r||($e(t.$$.fragment,u),r=!0)},o(u){ht(t.$$.fragment,u),r=!1},d(u){u&&f(e),fl(t)}}}function Xn(s){let e,t,r,u,a,o=s[1]?"éšè—å‚æ•°":"æ˜¾ç¤ºå‚æ•°",d,p,h,m;t=new eu({props:{disabled:s[21],variant:s[22]?"danger":"success",classList:"w-full text-lg py-3",$$slots:{default:[Jo]},$$scope:{ctx:s}}}),t.$on("click",s[23]);let b=s[22]&&Zn();return{c(){e=i("div"),ol(t.$$.fragment),r=x(),b&&b.c(),u=x(),a=i("button"),d=L(o),this.h()},l(v){e=c(v,"DIV",{class:!0});var g=_(e);il(t.$$.fragment,g),r=E(g),b&&b.l(g),u=E(g),a=c(g,"BUTTON",{class:!0});var C=_(a);d=S(C,o),C.forEach(f),g.forEach(f),this.h()},h(){n(a,"class","btn-secondary w-full"),n(e,"class","pt-2 flex flex-col gap-3")},m(v,g){j(v,e,g),cl(t,e,null),l(e,r),b&&b.m(e,null),l(e,u),l(e,a),l(a,d),p=!0,h||(m=z(a,"click",s[30]),h=!0)},p(v,g){const C={};g[0]&2097152&&(C.disabled=v[21]),g[0]&4194304&&(C.variant=v[22]?"danger":"success"),g[0]&4194304|g[2]&1&&(C.$$scope={dirty:g,ctx:v}),t.$set(C),v[22]?b||(b=Zn(),b.c(),b.m(e,u)):b&&(b.d(1),b=null),(!p||g[0]&2)&&o!==(o=v[1]?"éšè—å‚æ•°":"æ˜¾ç¤ºå‚æ•°")&&ne(d,o)},i(v){p||($e(t.$$.fragment,v),p=!0)},o(v){ht(t.$$.fragment,v),p=!1},d(v){v&&f(e),fl(t),b&&b.d(),h=!1,m()}}}function Zo(s){let e;return{c(){e=L("â–¶ å¼€å§‹ç”Ÿæˆ")},l(t){e=S(t,"â–¶ å¼€å§‹ç”Ÿæˆ")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Yo(s){let e;return{c(){e=L("â¹ åœæ­¢ç”Ÿæˆ")},l(t){e=S(t,"â¹ åœæ­¢ç”Ÿæˆ")},m(t,r){j(t,e,r)},d(t){t&&f(e)}}}function Jo(s){let e;function t(a,o){return a[22]?Yo:Zo}let r=t(s),u=r(s);return{c(){u.c(),e=Wl()},l(a){u.l(a),e=Wl()},m(a,o){u.m(a,o),j(a,e,o)},p(a,o){r!==(r=t(a))&&(u.d(1),u=r(a),u&&(u.c(),u.m(e.parentNode,e)))},d(a){a&&f(e),u.d(a)}}}function Zn(s){let e,t='<div class="status-dot status-dot-online"></div> <span class="text-sm text-text-secondary">ç”Ÿæˆä¸­...</span>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1wzretd"&&(e.innerHTML=t),this.h()},h(){n(e,"class","flex items-center gap-2 px-3 py-2 bg-success/10 border border-success/30 rounded-lg")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Yn(s){let e,t,r="âš™ï¸ ç”Ÿæˆå‚æ•°",u,a,o;return a=new Fa({props:{pipelineParams:s[15]}}),{c(){e=i("div"),t=i("h3"),t.textContent=r,u=x(),ol(a.$$.fragment),this.h()},l(d){e=c(d,"DIV",{class:!0});var p=_(e);t=c(p,"H3",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-pfmq46"&&(t.textContent=r),u=E(p),il(a.$$.fragment,p),p.forEach(f),this.h()},h(){n(t,"class","heading mb-4"),n(e,"class","card")},m(d,p){j(d,e,p),l(e,t),l(e,u),cl(a,e,null),o=!0},p(d,p){const h={};p[0]&32768&&(h.pipelineParams=d[15]),a.$set(h)},i(d){o||($e(a.$$.fragment,d),o=!0)},o(d){ht(a.$$.fragment,d),o=!1},d(d){d&&f(e),fl(a)}}}function Jn(s){let e,t,r,u="ğŸ¨",a,o,d=s[6]?"éšè—å±€éƒ¨é‡ç»˜":"å±€éƒ¨é‡ç»˜",p,h,m,b,v,g="ğŸ–¼ï¸",C,y,D=s[7]?"éšè—ç”»å¸ƒæ‰©å±•":"ç”»å¸ƒæ‰©å±•",T,F,k,I,N,V="ğŸ”",w,P,B=s[8]?"éšè—é«˜åˆ†è¾¨ç‡ä¿®å¤":"é«˜åˆ†è¾¨ç‡ä¿®å¤",U,H,A,M,R,q="ğŸ“",W,Z,K=s[9]?"éšè—å›¾åƒæ”¾å¤§":"å›¾åƒæ”¾å¤§",G,X,pe,Y,Q,le="ğŸ‘¤",re,ae,we=s[10]?"éšè—é¢éƒ¨ä¿®å¤":"é¢éƒ¨ä¿®å¤",J,Ie,be,Se,ze,et="ğŸ®",Pe,Oe,We=s[11]?"éšè—å¤šControlNet":"å¤šControlNet",Ae,Re,Xe,at,me,ke="âœ‚ï¸",qe,de,Qe=s[12]?"éšè—å›¾åƒç¼–è¾‘":"å›¾åƒç¼–è¾‘",Me,Ee,Ke,ce,Ue,Fe="ğŸ“Š",oe,_e,ie=s[13]?"éšè—å‚æ•°å¯¹æ¯”":"å‚æ•°å¯¹æ¯”",$,fe,he,Be,Ge,lt="ğŸ”",it,He,je=s[14]?"éšè—Promptåæ¨":"Promptåæ¨",Ze,ve,ye,Ne,mt=s[6]&&Qn(),st=s[7]&&Kn(),rt=s[8]&&$n(),vt=s[9]&&ea(),yt=s[10]&&ta(),ut=s[11]&&la(),ct=s[12]&&sa(),ft=s[13]&&ra(),ge=s[14]&&na();return{c(){e=i("div"),t=i("button"),r=i("span"),r.textContent=u,a=x(),o=i("span"),p=L(d),h=x(),mt&&mt.c(),m=x(),b=i("button"),v=i("span"),v.textContent=g,C=x(),y=i("span"),T=L(D),F=x(),st&&st.c(),k=x(),I=i("button"),N=i("span"),N.textContent=V,w=x(),P=i("span"),U=L(B),H=x(),rt&&rt.c(),A=x(),M=i("button"),R=i("span"),R.textContent=q,W=x(),Z=i("span"),G=L(K),X=x(),vt&&vt.c(),pe=x(),Y=i("button"),Q=i("span"),Q.textContent=le,re=x(),ae=i("span"),J=L(we),Ie=x(),yt&&yt.c(),be=x(),Se=i("button"),ze=i("span"),ze.textContent=et,Pe=x(),Oe=i("span"),Ae=L(We),Re=x(),ut&&ut.c(),Xe=x(),at=i("button"),me=i("span"),me.textContent=ke,qe=x(),de=i("span"),Me=L(Qe),Ee=x(),ct&&ct.c(),Ke=x(),ce=i("button"),Ue=i("span"),Ue.textContent=Fe,oe=x(),_e=i("span"),$=L(ie),fe=x(),ft&&ft.c(),he=x(),Be=i("button"),Ge=i("span"),Ge.textContent=lt,it=x(),He=i("span"),Ze=L(je),ve=x(),ge&&ge.c(),this.h()},l(xe){e=c(xe,"DIV",{class:!0});var Te=_(e);t=c(Te,"BUTTON",{class:!0});var ue=_(t);r=c(ue,"SPAN",{"data-svelte-h":!0}),O(r)!=="svelte-eg97li"&&(r.textContent=u),a=E(ue),o=c(ue,"SPAN",{});var se=_(o);p=S(se,d),se.forEach(f),ue.forEach(f),h=E(Te),mt&&mt.l(Te),m=E(Te),b=c(Te,"BUTTON",{class:!0});var Le=_(b);v=c(Le,"SPAN",{"data-svelte-h":!0}),O(v)!=="svelte-1v791xo"&&(v.textContent=g),C=E(Le),y=c(Le,"SPAN",{});var ee=_(y);T=S(ee,D),ee.forEach(f),Le.forEach(f),F=E(Te),st&&st.l(Te),k=E(Te),I=c(Te,"BUTTON",{class:!0});var te=_(I);N=c(te,"SPAN",{"data-svelte-h":!0}),O(N)!=="svelte-1pe8bl8"&&(N.textContent=V),w=E(te),P=c(te,"SPAN",{});var De=_(P);U=S(De,B),De.forEach(f),te.forEach(f),H=E(Te),rt&&rt.l(Te),A=E(Te),M=c(Te,"BUTTON",{class:!0});var dt=_(M);R=c(dt,"SPAN",{"data-svelte-h":!0}),O(R)!=="svelte-1fdjmpj"&&(R.textContent=q),W=E(dt),Z=c(dt,"SPAN",{});var xt=_(Z);G=S(xt,K),xt.forEach(f),dt.forEach(f),X=E(Te),vt&&vt.l(Te),pe=E(Te),Y=c(Te,"BUTTON",{class:!0});var bt=_(Y);Q=c(bt,"SPAN",{"data-svelte-h":!0}),O(Q)!=="svelte-4ldczv"&&(Q.textContent=le),re=E(bt),ae=c(bt,"SPAN",{});var kt=_(ae);J=S(kt,we),kt.forEach(f),bt.forEach(f),Ie=E(Te),yt&&yt.l(Te),be=E(Te),Se=c(Te,"BUTTON",{class:!0});var Tt=_(Se);ze=c(Tt,"SPAN",{"data-svelte-h":!0}),O(ze)!=="svelte-166apnw"&&(ze.textContent=et),Pe=E(Tt),Oe=c(Tt,"SPAN",{});var Xt=_(Oe);Ae=S(Xt,We),Xt.forEach(f),Tt.forEach(f),Re=E(Te),ut&&ut.l(Te),Xe=E(Te),at=c(Te,"BUTTON",{class:!0});var Nt=_(at);me=c(Nt,"SPAN",{"data-svelte-h":!0}),O(me)!=="svelte-12o3bm9"&&(me.textContent=ke),qe=E(Nt),de=c(Nt,"SPAN",{});var Ft=_(de);Me=S(Ft,Qe),Ft.forEach(f),Nt.forEach(f),Ee=E(Te),ct&&ct.l(Te),Ke=E(Te),ce=c(Te,"BUTTON",{class:!0});var qt=_(ce);Ue=c(qt,"SPAN",{"data-svelte-h":!0}),O(Ue)!=="svelte-1e78acp"&&(Ue.textContent=Fe),oe=E(qt),_e=c(qt,"SPAN",{});var Zt=_(_e);$=S(Zt,ie),Zt.forEach(f),qt.forEach(f),fe=E(Te),ft&&ft.l(Te),he=E(Te),Be=c(Te,"BUTTON",{class:!0});var It=_(Be);Ge=c(It,"SPAN",{"data-svelte-h":!0}),O(Ge)!=="svelte-1pe8bl8"&&(Ge.textContent=lt),it=E(It),He=c(It,"SPAN",{});var Et=_(He);Ze=S(Et,je),Et.forEach(f),It.forEach(f),ve=E(Te),ge&&ge.l(Te),Te.forEach(f),this.h()},h(){n(t,"class","btn-secondary w-full flex items-center justify-center gap-2"),n(b,"class","btn-secondary w-full flex items-center justify-center gap-2"),n(I,"class","btn-secondary w-full flex items-center justify-center gap-2"),n(M,"class","btn-secondary w-full flex items-center justify-center gap-2"),n(Y,"class","btn-secondary w-full flex items-center justify-center gap-2"),n(Se,"class","btn-secondary w-full flex items-center justify-center gap-2"),n(at,"class","btn-secondary w-full flex items-center justify-center gap-2"),n(ce,"class","btn-secondary w-full flex items-center justify-center gap-2"),n(Be,"class","btn-secondary w-full flex items-center justify-center gap-2"),n(e,"class","pt-2 flex flex-col gap-2")},m(xe,Te){j(xe,e,Te),l(e,t),l(t,r),l(t,a),l(t,o),l(o,p),l(e,h),mt&&mt.m(e,null),l(e,m),l(e,b),l(b,v),l(b,C),l(b,y),l(y,T),l(e,F),st&&st.m(e,null),l(e,k),l(e,I),l(I,N),l(I,w),l(I,P),l(P,U),l(e,H),rt&&rt.m(e,null),l(e,A),l(e,M),l(M,R),l(M,W),l(M,Z),l(Z,G),l(e,X),vt&&vt.m(e,null),l(e,pe),l(e,Y),l(Y,Q),l(Y,re),l(Y,ae),l(ae,J),l(e,Ie),yt&&yt.m(e,null),l(e,be),l(e,Se),l(Se,ze),l(Se,Pe),l(Se,Oe),l(Oe,Ae),l(e,Re),ut&&ut.m(e,null),l(e,Xe),l(e,at),l(at,me),l(at,qe),l(at,de),l(de,Me),l(e,Ee),ct&&ct.m(e,null),l(e,Ke),l(e,ce),l(ce,Ue),l(ce,oe),l(ce,_e),l(_e,$),l(e,fe),ft&&ft.m(e,null),l(e,he),l(e,Be),l(Be,Ge),l(Be,it),l(Be,He),l(He,Ze),l(e,ve),ge&&ge.m(e,null),ye||(Ne=[z(t,"click",s[32]),z(b,"click",s[33]),z(I,"click",s[34]),z(M,"click",s[35]),z(Y,"click",s[36]),z(Se,"click",s[37]),z(at,"click",s[38]),z(ce,"click",s[39]),z(Be,"click",s[40])],ye=!0)},p(xe,Te){Te[0]&64&&d!==(d=xe[6]?"éšè—å±€éƒ¨é‡ç»˜":"å±€éƒ¨é‡ç»˜")&&ne(p,d),xe[6]?mt||(mt=Qn(),mt.c(),mt.m(e,m)):mt&&(mt.d(1),mt=null),Te[0]&128&&D!==(D=xe[7]?"éšè—ç”»å¸ƒæ‰©å±•":"ç”»å¸ƒæ‰©å±•")&&ne(T,D),xe[7]?st||(st=Kn(),st.c(),st.m(e,k)):st&&(st.d(1),st=null),Te[0]&256&&B!==(B=xe[8]?"éšè—é«˜åˆ†è¾¨ç‡ä¿®å¤":"é«˜åˆ†è¾¨ç‡ä¿®å¤")&&ne(U,B),xe[8]?rt||(rt=$n(),rt.c(),rt.m(e,A)):rt&&(rt.d(1),rt=null),Te[0]&512&&K!==(K=xe[9]?"éšè—å›¾åƒæ”¾å¤§":"å›¾åƒæ”¾å¤§")&&ne(G,K),xe[9]?vt||(vt=ea(),vt.c(),vt.m(e,pe)):vt&&(vt.d(1),vt=null),Te[0]&1024&&we!==(we=xe[10]?"éšè—é¢éƒ¨ä¿®å¤":"é¢éƒ¨ä¿®å¤")&&ne(J,we),xe[10]?yt||(yt=ta(),yt.c(),yt.m(e,be)):yt&&(yt.d(1),yt=null),Te[0]&2048&&We!==(We=xe[11]?"éšè—å¤šControlNet":"å¤šControlNet")&&ne(Ae,We),xe[11]?ut||(ut=la(),ut.c(),ut.m(e,Xe)):ut&&(ut.d(1),ut=null),Te[0]&4096&&Qe!==(Qe=xe[12]?"éšè—å›¾åƒç¼–è¾‘":"å›¾åƒç¼–è¾‘")&&ne(Me,Qe),xe[12]?ct||(ct=sa(),ct.c(),ct.m(e,Ke)):ct&&(ct.d(1),ct=null),Te[0]&8192&&ie!==(ie=xe[13]?"éšè—å‚æ•°å¯¹æ¯”":"å‚æ•°å¯¹æ¯”")&&ne($,ie),xe[13]?ft||(ft=ra(),ft.c(),ft.m(e,he)):ft&&(ft.d(1),ft=null),Te[0]&16384&&je!==(je=xe[14]?"éšè—Promptåæ¨":"Promptåæ¨")&&ne(Ze,je),xe[14]?ge||(ge=na(),ge.c(),ge.m(e,null)):ge&&(ge.d(1),ge=null)},d(xe){xe&&f(e),mt&&mt.d(),st&&st.d(),rt&&rt.d(),vt&&vt.d(),yt&&yt.d(),ut&&ut.d(),ct&&ct.d(),ft&&ft.d(),ge&&ge.d(),ye=!1,Rt(Ne)}}}function Qn(s){let e,t='<p class="text-xs text-text-tertiary mb-2">ğŸ’¡ æç¤ºï¼šå±€éƒ¨é‡ç»˜åŠŸèƒ½å…è®¸æ‚¨ä¿®å¤æˆ–æ›¿æ¢å›¾åƒçš„ç‰¹å®šåŒºåŸŸ</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-3r3zl3"&&(e.innerHTML=t),this.h()},h(){n(e,"class","mt-2 p-3 bg-surface-elevated rounded-lg border border-border")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function Kn(s){let e,t='<p class="text-xs text-text-tertiary mb-2">ğŸ’¡ æç¤ºï¼šç”»å¸ƒæ‰©å±•åŠŸèƒ½å…è®¸æ‚¨å‘ä»»æ„æ–¹å‘æ‰©å±•å›¾åƒè¾¹ç•Œ</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1661i3k"&&(e.innerHTML=t),this.h()},h(){n(e,"class","mt-2 p-3 bg-surface-elevated rounded-lg border border-border")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function $n(s){let e,t='<p class="text-xs text-text-tertiary mb-2">ğŸ’¡ æç¤ºï¼šé«˜åˆ†è¾¨ç‡ä¿®å¤é€šè¿‡ä¸¤é˜¶æ®µç”Ÿæˆæå‡å›¾åƒè´¨é‡å’Œåˆ†è¾¨ç‡</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-11g7m5z"&&(e.innerHTML=t),this.h()},h(){n(e,"class","mt-2 p-3 bg-surface-elevated rounded-lg border border-border")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function ea(s){let e,t='<p class="text-xs text-text-tertiary mb-2">ğŸ’¡ æç¤ºï¼šä½¿ç”¨Real-ESRGANç­‰ç®—æ³•æ”¾å¤§å›¾åƒå¹¶å¢å¼ºç»†èŠ‚</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-17p3b6v"&&(e.innerHTML=t),this.h()},h(){n(e,"class","mt-2 p-3 bg-surface-elevated rounded-lg border border-border")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function ta(s){let e,t='<p class="text-xs text-text-tertiary mb-2">ğŸ’¡ æç¤ºï¼šä½¿ç”¨CodeFormeræˆ–GFPGANä¿®å¤å’Œå¢å¼ºé¢éƒ¨ç»†èŠ‚</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1027tq9"&&(e.innerHTML=t),this.h()},h(){n(e,"class","mt-2 p-3 bg-surface-elevated rounded-lg border border-border")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function la(s){let e,t='<p class="text-xs text-text-tertiary mb-2">ğŸ’¡ æç¤ºï¼šåŒæ—¶ä½¿ç”¨å¤šä¸ªControlNetï¼ˆæœ€å¤š3ä¸ªï¼‰ç²¾ç¡®æ§åˆ¶å›¾åƒç”Ÿæˆ</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-tmrot8"&&(e.innerHTML=t),this.h()},h(){n(e,"class","mt-2 p-3 bg-surface-elevated rounded-lg border border-border")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function sa(s){let e,t='<p class="text-xs text-text-tertiary mb-2">ğŸ’¡ æç¤ºï¼šè£å‰ªã€æ—‹è½¬ã€è°ƒæ•´é¢œè‰²å’Œåº”ç”¨æ»¤é•œç­‰å›¾åƒç¼–è¾‘å·¥å…·</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1g0lisa"&&(e.innerHTML=t),this.h()},h(){n(e,"class","mt-2 p-3 bg-surface-elevated rounded-lg border border-border")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function ra(s){let e,t='<p class="text-xs text-text-tertiary mb-2">ğŸ’¡ æç¤ºï¼šXYZ PlotåŠŸèƒ½å…è®¸æ‚¨å¯¹æ¯”ä¸åŒå‚æ•°ç»„åˆçš„ç”Ÿæˆæ•ˆæœ</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-ptvnkc"&&(e.innerHTML=t),this.h()},h(){n(e,"class","mt-2 p-3 bg-surface-elevated rounded-lg border border-border")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function na(s){let e,t='<p class="text-xs text-text-tertiary mb-2">ğŸ’¡ æç¤ºï¼šCLIP Interrogatorå¯ä»¥ä»å›¾åƒä¸­åæ¨ç”ŸæˆPrompt</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=c(r,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-ltyzd6"&&(e.innerHTML=t),this.h()},h(){n(e,"class","mt-2 p-3 bg-surface-elevated rounded-lg border border-border")},m(r,u){j(r,e,u)},d(r){r&&f(e)}}}function aa(s){let e,t,r,u="ğŸ¨ å±€éƒ¨é‡ç»˜ (Inpainting)",a,o,d="âœ•",p,h,m,b,v;return h=new ou({}),{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),ol(h.$$.fragment),this.h()},l(g){e=c(g,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var y=_(t);r=c(y,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-blg1t2"&&(r.textContent=u),a=E(y),o=c(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(o)!=="svelte-u1102x"&&(o.textContent=d),y.forEach(f),p=E(C),il(h.$$.fragment,C),C.forEach(f),this.h()},h(){n(r,"class","heading mb-0"),n(o,"class","text-text-tertiary hover:text-text-primary transition-colors"),n(o,"title","å…³é—­"),n(t,"class","flex items-center justify-between mb-4"),n(e,"class","card")},m(g,C){j(g,e,C),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),cl(h,e,null),m=!0,b||(v=z(o,"click",s[41]),b=!0)},p:pt,i(g){m||($e(h.$$.fragment,g),m=!0)},o(g){ht(h.$$.fragment,g),m=!1},d(g){g&&f(e),fl(h),b=!1,v()}}}function ua(s){let e,t,r,u="ğŸ–¼ï¸ ç”»å¸ƒæ‰©å±• (Outpainting)",a,o,d="âœ•",p,h,m,b,v;return h=new hu({}),{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),ol(h.$$.fragment),this.h()},l(g){e=c(g,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var y=_(t);r=c(y,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-11yfmiq"&&(r.textContent=u),a=E(y),o=c(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(o)!=="svelte-nyx7hu"&&(o.textContent=d),y.forEach(f),p=E(C),il(h.$$.fragment,C),C.forEach(f),this.h()},h(){n(r,"class","heading mb-0"),n(o,"class","text-text-tertiary hover:text-text-primary transition-colors"),n(o,"title","å…³é—­"),n(t,"class","flex items-center justify-between mb-4"),n(e,"class","card")},m(g,C){j(g,e,C),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),cl(h,e,null),m=!0,b||(v=z(o,"click",s[42]),b=!0)},p:pt,i(g){m||($e(h.$$.fragment,g),m=!0)},o(g){ht(h.$$.fragment,g),m=!1},d(g){g&&f(e),fl(h),b=!1,v()}}}function oa(s){let e,t,r,u="ğŸ” é«˜åˆ†è¾¨ç‡ä¿®å¤ (Hires.fix)",a,o,d="âœ•",p,h,m,b,v;return h=new Eu({}),{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),ol(h.$$.fragment),this.h()},l(g){e=c(g,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var y=_(t);r=c(y,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-soyuly"&&(r.textContent=u),a=E(y),o=c(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(o)!=="svelte-cgwxyk"&&(o.textContent=d),y.forEach(f),p=E(C),il(h.$$.fragment,C),C.forEach(f),this.h()},h(){n(r,"class","heading mb-0"),n(o,"class","text-text-tertiary hover:text-text-primary transition-colors"),n(o,"title","å…³é—­"),n(t,"class","flex items-center justify-between mb-4"),n(e,"class","card")},m(g,C){j(g,e,C),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),cl(h,e,null),m=!0,b||(v=z(o,"click",s[43]),b=!0)},p:pt,i(g){m||($e(h.$$.fragment,g),m=!0)},o(g){ht(h.$$.fragment,g),m=!1},d(g){g&&f(e),fl(h),b=!1,v()}}}function ia(s){let e,t,r,u="ğŸ“ å›¾åƒæ”¾å¤§ (Upscale)",a,o,d="âœ•",p,h,m,b,v;return h=new Au({}),{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),ol(h.$$.fragment),this.h()},l(g){e=c(g,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var y=_(t);r=c(y,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-jba918"&&(r.textContent=u),a=E(y),o=c(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(o)!=="svelte-a3xr5l"&&(o.textContent=d),y.forEach(f),p=E(C),il(h.$$.fragment,C),C.forEach(f),this.h()},h(){n(r,"class","heading mb-0"),n(o,"class","text-text-tertiary hover:text-text-primary transition-colors"),n(o,"title","å…³é—­"),n(t,"class","flex items-center justify-between mb-4"),n(e,"class","card")},m(g,C){j(g,e,C),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),cl(h,e,null),m=!0,b||(v=z(o,"click",s[44]),b=!0)},p:pt,i(g){m||($e(h.$$.fragment,g),m=!0)},o(g){ht(h.$$.fragment,g),m=!1},d(g){g&&f(e),fl(h),b=!1,v()}}}function ca(s){let e,t,r,u="ğŸ‘¤ é¢éƒ¨ä¿®å¤ (Face Restore)",a,o,d="âœ•",p,h,m,b,v;return h=new zu({}),{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),ol(h.$$.fragment),this.h()},l(g){e=c(g,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var y=_(t);r=c(y,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1kmrejr"&&(r.textContent=u),a=E(y),o=c(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(o)!=="svelte-1tcxdb1"&&(o.textContent=d),y.forEach(f),p=E(C),il(h.$$.fragment,C),C.forEach(f),this.h()},h(){n(r,"class","heading mb-0"),n(o,"class","text-text-tertiary hover:text-text-primary transition-colors"),n(o,"title","å…³é—­"),n(t,"class","flex items-center justify-between mb-4"),n(e,"class","card")},m(g,C){j(g,e,C),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),cl(h,e,null),m=!0,b||(v=z(o,"click",s[45]),b=!0)},p:pt,i(g){m||($e(h.$$.fragment,g),m=!0)},o(g){ht(h.$$.fragment,g),m=!1},d(g){g&&f(e),fl(h),b=!1,v()}}}function fa(s){let e,t,r,u="ğŸ® å¤šControlNetæ§åˆ¶",a,o,d="âœ•",p,h,m,b,v;return h=new Pa({}),{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),ol(h.$$.fragment),this.h()},l(g){e=c(g,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var y=_(t);r=c(y,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-4d38ke"&&(r.textContent=u),a=E(y),o=c(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(o)!=="svelte-gm8ke1"&&(o.textContent=d),y.forEach(f),p=E(C),il(h.$$.fragment,C),C.forEach(f),this.h()},h(){n(r,"class","heading mb-0"),n(o,"class","text-text-tertiary hover:text-text-primary transition-colors"),n(o,"title","å…³é—­"),n(t,"class","flex items-center justify-between mb-4"),n(e,"class","card")},m(g,C){j(g,e,C),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),cl(h,e,null),m=!0,b||(v=z(o,"click",s[46]),b=!0)},p:pt,i(g){m||($e(h.$$.fragment,g),m=!0)},o(g){ht(h.$$.fragment,g),m=!1},d(g){g&&f(e),fl(h),b=!1,v()}}}function da(s){let e,t,r,u="âœ‚ï¸ å›¾åƒç¼–è¾‘",a,o,d="âœ•",p,h,m,b,v;return h=new oo({}),{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),ol(h.$$.fragment),this.h()},l(g){e=c(g,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var y=_(t);r=c(y,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-3d3feg"&&(r.textContent=u),a=E(y),o=c(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(o)!=="svelte-k84j2m"&&(o.textContent=d),y.forEach(f),p=E(C),il(h.$$.fragment,C),C.forEach(f),this.h()},h(){n(r,"class","heading mb-0"),n(o,"class","text-text-tertiary hover:text-text-primary transition-colors"),n(o,"title","å…³é—­"),n(t,"class","flex items-center justify-between mb-4"),n(e,"class","card")},m(g,C){j(g,e,C),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),cl(h,e,null),m=!0,b||(v=z(o,"click",s[47]),b=!0)},p:pt,i(g){m||($e(h.$$.fragment,g),m=!0)},o(g){ht(h.$$.fragment,g),m=!1},d(g){g&&f(e),fl(h),b=!1,v()}}}function ha(s){let e,t,r,u="ğŸ“Š å‚æ•°å¯¹æ¯” (XYZ Plot)",a,o,d="âœ•",p,h,m,b,v;return h=new Vo({}),{c(){e=i("div"),t=i("div"),r=i("h3"),r.textContent=u,a=x(),o=i("button"),o.textContent=d,p=x(),ol(h.$$.fragment),this.h()},l(g){e=c(g,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var y=_(t);r=c(y,"H3",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-eegfck"&&(r.textContent=u),a=E(y),o=c(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(o)!=="svelte-1a3j4a6"&&(o.textContent=d),y.forEach(f),p=E(C),il(h.$$.fragment,C),C.forEach(f),this.h()},h(){n(r,"class","heading mb-0"),n(o,"class","text-text-tertiary hover:text-text-primary transition-colors"),n(o,"title","å…³é—­"),n(t,"class","flex items-center justify-between mb-4"),n(e,"class","card")},m(g,C){j(g,e,C),l(e,t),l(t,r),l(t,a),l(t,o),l(e,p),cl(h,e,null),m=!0,b||(v=z(o,"click",s[48]),b=!0)},p:pt,i(g){m||($e(h.$$.fragment,g),m=!0)},o(g){ht(h.$$.fragment,g),m=!1},d(g){g&&f(e),fl(h),b=!1,v()}}}function pa(s){let e,t,r,u,a="å…³é—­é¢æ¿",o,d,p;return t=new Ro({props:{showCloseButton:!1}}),t.$on("close",s[49]),t.$on("apply",s[50]),{c(){e=i("div"),ol(t.$$.fragment),r=x(),u=i("button"),u.textContent=a,this.h()},l(h){e=c(h,"DIV",{class:!0});var m=_(e);il(t.$$.fragment,m),r=E(m),u=c(m,"BUTTON",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-1rckrmd"&&(u.textContent=a),m.forEach(f),this.h()},h(){n(u,"class","btn-secondary w-full mt-4"),n(e,"class","card")},m(h,m){j(h,e,m),cl(t,e,null),l(e,r),l(e,u),o=!0,d||(p=z(u,"click",s[51]),d=!0)},p:pt,i(h){o||($e(t.$$.fragment,h),o=!0)},o(h){ht(t.$$.fragment,h),o=!1},d(h){h&&f(e),fl(t),d=!1,p()}}}function Qo(s){let e,t="",r,u,a,o,d,p,h,m,b,v,g,C,y,D,T,F,k,I,N,V="âŒ¨ï¸ å¿«æ·é”®",w,P,B;d=new Aa({});function U(G){s[25](G)}let H={};s[20]!==void 0&&(H.message=s[20]),h=new su({props:H}),ul.push(()=>Cr(h,"message",U));let A=s[16]&&zn(s),M=s[18]>0&&Rn(s);const R=[Go,qo],q=[];function W(G,X){return G[15]?0:1}C=W(s),y=q[C]=R[C](s);function Z(G){s[52](G)}let K={};return s[0]!==void 0&&(K.show=s[0]),T=new Ta({props:K}),ul.push(()=>Cr(T,"show",Z)),{c(){e=i("script"),e.innerHTML=t,u=x(),a=i("main"),o=i("div"),ol(d.$$.fragment),p=x(),ol(h.$$.fragment),b=x(),A&&A.c(),v=x(),M&&M.c(),g=x(),y.c(),D=x(),ol(T.$$.fragment),k=x(),I=i("div"),N=i("button"),N.textContent=V,this.h()},l(G){const X=ya("svelte-1mxwd5t",document.head);e=c(X,"SCRIPT",{src:!0,"data-svelte-h":!0}),O(e)!=="svelte-1oi43ze"&&(e.innerHTML=t),X.forEach(f),u=E(G),a=c(G,"MAIN",{class:!0});var pe=_(a);o=c(pe,"DIV",{class:!0});var Y=_(o);il(d.$$.fragment,Y),p=E(Y),il(h.$$.fragment,Y),b=E(Y),A&&A.l(Y),v=E(Y),M&&M.l(Y),g=E(Y),y.l(Y),Y.forEach(f),D=E(pe),il(T.$$.fragment,pe),k=E(pe),I=c(pe,"DIV",{class:!0});var Q=_(I);N=c(Q,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),O(N)!=="svelte-1lbjoky"&&(N.textContent=V),Q.forEach(f),pe.forEach(f),this.h()},h(){document.title="å®æ—¶ç”Ÿæˆ - ArtFlow",Jt(e.src,r="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.3.9/iframeResizer.contentWindow.min.js")||n(e,"src",r),n(o,"class","container mx-auto max-w-7xl px-3 sm:px-4 py-4 sm:py-6"),n(N,"class","btn-ghost shadow-medium"),n(N,"title","å¿«æ·é”®å¸®åŠ© (Shift+?)"),n(I,"class","fixed bottom-6 right-6"),n(a,"class","min-h-screen bg-surface")},m(G,X){l(document.head,e),j(G,u,X),j(G,a,X),l(a,o),cl(d,o,null),l(o,p),cl(h,o,null),l(o,b),A&&A.m(o,null),l(o,v),M&&M.m(o,null),l(o,g),q[C].m(o,null),l(a,D),cl(T,a,null),l(a,k),l(a,I),l(I,N),w=!0,P||(B=z(N,"click",s[53]),P=!0)},p(G,X){const pe={};!m&&X[0]&1048576&&(m=!0,pe.message=G[20],Er(()=>m=!1)),h.$set(pe),G[16]?A?A.p(G,X):(A=zn(G),A.c(),A.m(o,v)):A&&(A.d(1),A=null),G[18]>0?M?M.p(G,X):(M=Rn(G),M.c(),M.m(o,g)):M&&(M.d(1),M=null);let Y=C;C=W(G),C===Y?q[C].p(G,X):(xl(),ht(q[Y],1,1,()=>{q[Y]=null}),El(),y=q[C],y?y.p(G,X):(y=q[C]=R[C](G),y.c()),$e(y,1),y.m(o,null));const Q={};!F&&X[0]&1&&(F=!0,Q.show=G[0],Er(()=>F=!1)),T.$set(Q)},i(G){w||($e(d.$$.fragment,G),$e(h.$$.fragment,G),$e(y),$e(T.$$.fragment,G),w=!0)},o(G){ht(d.$$.fragment,G),ht(h.$$.fragment,G),ht(y),ht(T.$$.fragment,G),w=!1},d(G){G&&(f(u),f(a)),f(e),fl(d),fl(h),A&&A.d(),M&&M.d(),q[C].d(),fl(T),P=!1,B()}}}function Ko(s,e,t){let r,u,a;Xs(s,ur,ce=>t(57,u=ce)),Xs(s,Jl,ce=>t(24,a=ce));let o=!1,d=!1,p=!0,h=!0,m=!0,b=!1,v=!1,g=!1,C=!1,y=!1,D=!1,T=!1,F=!1,k=!1,I=!1,N,V,w,P=!1,B=0,U=0,H=!1,A="",M=[];is(()=>{R(),M=[Ba.register({key:"?",shift:!0},Ue=>(t(0,o=!o),!1))]}),ma(()=>{M.forEach(ce=>ce())});async function R(){const ce=await fetch("/api/settings").then(Fe=>Fe.json());t(15,N=ce.input_params.properties),V=ce.info.properties,t(17,P=V.input_mode.default===ba.IMAGE),t(18,B=ce.max_queue_size),t(16,w=ce.page_content);const Ue={};for(const[Fe,oe]of Object.entries(N))Ue[Fe]=oe.default;va.set(Ue),q(!0)}function q(ce){H=ce&&B>0,ce&&W()}async function W(){if(!H)return;const ce=await fetch("/api/queue").then(Ue=>Ue.json());t(19,U=ce.queue_size),setTimeout(W,1e4)}function Z(){if(P){const ce=u==null?void 0:u.blob;return ce?[yr(),ce]:[yr(),null]}else return[Ia()]}let K=!1;async function G(){try{if(r)wr.stop(),q(!0);else{if(P&&!(u==null?void 0:u.blob)){_t({type:gt.VALIDATION,message:"è¯·å…ˆå¯åŠ¨æ‘„åƒå¤´",details:'ç‚¹å‡»"è¾“å…¥æº"åŒºåŸŸä¸­çš„"å¯åŠ¨æ‘„åƒå¤´"æŒ‰é’®ã€‚',recoverable:!0,suggestions:["å¯åŠ¨æ‘„åƒå¤´åå†å¼€å§‹ç”Ÿæˆ"]});return}t(21,K=!0),await wr.start(Z),t(21,K=!1),q(!1),t(20,A="")}}catch(ce){_t({type:gt.GENERATION,message:"ç”Ÿæˆå¤±è´¥",details:ce instanceof Error?ce.message:"æœªçŸ¥é”™è¯¯",recoverable:!0,suggestions:["æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ","æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°è·å–æ›´å¤šä¿¡æ¯"]}),t(21,K=!1),q(!0)}}function X(ce){A=ce,t(20,A),t(24,a)}const pe=()=>{const Ue=!(h&&p&&m&&b);t(3,h=Ue),t(2,p=Ue),t(4,m=Ue),t(5,b=Ue)},Y=()=>t(3,h=!h),Q=()=>t(2,p=!p),le=()=>t(4,m=!m),re=()=>t(1,d=!d),ae=()=>t(5,b=!b),we=()=>t(6,v=!v),J=()=>t(7,g=!g),Ie=()=>t(8,C=!C),be=()=>t(9,y=!y),Se=()=>t(10,D=!D),ze=()=>t(11,T=!T),et=()=>t(12,F=!F),Pe=()=>t(13,k=!k),Oe=()=>t(14,I=!I),We=()=>t(6,v=!1),Ae=()=>t(7,g=!1),Re=()=>t(8,C=!1),Xe=()=>t(9,y=!1),at=()=>t(10,D=!1),me=()=>t(11,T=!1),ke=()=>t(12,F=!1),qe=()=>t(13,k=!1),de=()=>t(14,I=!1),Qe=()=>{console.log("CLIP Promptå·²åº”ç”¨")},Me=()=>t(14,I=!1);function Ee(ce){o=ce,t(0,o)}const Ke=()=>t(0,o=!0);return s.$$.update=()=>{s.$$.dirty[0]&16777216&&t(22,r=a!==ws.DISCONNECTED),s.$$.dirty[0]&16777216&&a===ws.TIMEOUT&&t(20,A="Session timed out. Please try again.")},[o,d,p,h,m,b,v,g,C,y,D,T,F,k,I,N,w,P,B,U,A,K,r,G,a,X,pe,Y,Q,le,re,ae,we,J,Ie,be,Se,ze,et,Pe,Oe,We,Ae,Re,Xe,at,me,ke,qe,de,Qe,Me,Ee,Ke]}class ui extends Al{constructor(e){super(),Tl(this,e,Ko,Qo,Il,{},null,[-1,-1,-1])}}export{ui as component,ai as universal};
